(this["webpackJsonprocations-dashboard-app"]=this["webpackJsonprocations-dashboard-app"]||[]).push([[0],{163:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),c=a.n(o),i=(a(163),a(141)),s=a(289),l=a(296),u=a(8),d=a(281),O=a(29),j=a(285),b=a(280),p=a(293),f=a(291),g=a(279),m=a(277),C=a(278),h=a(133),x=a.n(h),L=a(134),v=a.n(L),K=a.p+"static/media/logo.3f900ba7.png",A="https://locations-dashboard.herokuapp.com",q={longitude:-79.3966596,latitude:43.6565291,zoom:13},y=window.google,w=a(2),I=Object(d.a)({header:{padding:"10px 20px",backgroundColor:"white"},logo:{height:80},headerTitle:{flex:1}});var D=function(e){var t=I(),a=e.setSearchLocation,r=e.address,o=e.setAddress,c=e.selectedDate,i=e.setSelectedDate,s=e.setTimeRange;return Object(n.useEffect)((function(){var e=document.getElementById("input-address"),t=new y.maps.places.Autocomplete(e);y.maps.event.addListener(t,"place_changed",(function(){var e=t.getPlace();a(e.geometry.location.toJSON()),o(e.formatted_address)}))}),[]),Object(w.jsxs)(j.a,{container:!0,className:t.header,spacing:3,children:[Object(w.jsx)(j.a,{container:!0,item:!0,sm:4,justifyContent:"center",alignItems:"center",children:Object(w.jsx)("img",{src:K,className:t.logo})}),Object(w.jsx)(j.a,{container:!0,item:!0,sm:4,alignItems:"center",children:Object(w.jsx)(b.a,{id:"input-address",name:"address",placeholder:"Enter your address.",InputProps:{startAdornment:Object(w.jsx)(f.a,{position:"start",children:Object(w.jsx)(x.a,{})}),endAdornment:Object(w.jsx)(f.a,{position:"end",children:Object(w.jsx)(p.a,{"aria-label":"toggle password visibility",onClick:function(){o(""),document.getElementById("input-address").value=""},onMouseDown:function(e){return e.preventDefault()},edge:"end",children:r&&Object(w.jsx)(v.a,{})})})},fullWidth:!0,autoComplete:"off"})}),Object(w.jsx)(j.a,{container:!0,item:!0,sm:4,alignItems:"center",children:Object(w.jsx)(m.b,{dateAdapter:g.a,children:Object(w.jsx)(C.a,{value:c,onChange:function(e){var t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();i(n+"-"+(a<=9?"0"+a:a)+"-"+(t<=9?"0"+t:t)),s([0,24])},renderInput:function(e){return Object(w.jsx)(b.a,Object(O.a)({},e))}})})})]})},k=a(41),M=a.n(k),T=a(55),R=a(295),B=a(46),S=(a(188),a(84)),F=a.n(S),N=a(60),E=a.n(N),U=a(90),P=a.n(U),V=function(){var e=Object(T.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat(A,"/api/clusters"),e.next=4,P.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(T.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat(A,"/api/counts"),e.next=4,P.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=a(287),Z=a(290),Y=a(292),Q=a(294),_=a(286),W=Object(d.a)({markerInfoDrawer:{"& .MuiBackdrop-root":{},"&>.MuiPaper-root":{width:"50%",padding:40,backgroundColor:"#f1f6fa"}},header:{display:"flex",flexDirection:"row",paddingBottom:10,marginBottom:20,borderBottom:"1px solid #e3ebf1"}});var G=function(e){var t,a=W(),r=e.markerInfo,o=e.setMarkerInfo,c=Object(n.useState)("properties"),i=Object(u.a)(c,2),s=i[0],l=i[1];return Object(n.useEffect)((function(){}),[r]),Object(w.jsxs)(J.a,{className:a.markerInfoDrawer,anchor:"left",open:!0,onClose:(t=!1,function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&o(Object(O.a)(Object(O.a)({},r),{},{open:t}))}),children:[Object(w.jsxs)(j.a,{container:!0,className:a.header,justifyContent:"space-between",alignItems:"center",children:[Object(w.jsx)(Y.a,{variant:"h6",children:"Device Information"}),Object(w.jsxs)(_.a,{value:s,exclusive:!0,onChange:function(e,t){return l(t)},"aria-label":"marker button group",children:[Object(w.jsx)(Q.a,{value:"properties","aria-label":"Properties",children:"Properties"}),Object(w.jsx)(Q.a,{value:"tracking","aria-label":"Tracking",children:"Tracking"})]})]}),Object(w.jsxs)(Z.a,{children:[Object(w.jsx)(Y.a,{variant:"caption",children:"Advertiser ID"}),Object(w.jsx)(Y.a,{variant:"h6",children:"Advertiser ID"})]})]})};F.a.workerClass=a(206).default;var H=Object(d.a)({mapDiv:{"& .mapboxgl-ctrl-logo":{display:"none"}}}),X=null;var $=function(e){var t=H(),a=e.searchLocation,r=e.selectedDate,o=e.timeRange,c=e.setCounts,i=Object(n.useRef)(null),s=Object(n.useState)(q),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(n.useState)({type:"FeatureCollection",features:[]}),p=Object(u.a)(b,2),f=p[0],g=p[1],m=Object(n.useState)(!0),C=Object(u.a)(m,2),h=C[0],x=C[1],L=Object(n.useState)(!1),v=Object(u.a)(L,2),K=v[0],A=v[1],y=function(){var e=Object(T.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.features&&t.features.length>0&&("cluster-layer"===(a=t.features[0]).layer.id?j(Object(O.a)(Object(O.a)({},d),{},{longitude:a.geometry.coordinates[0],latitude:a.geometry.coordinates[1],zoom:d.zoom+1,transitionDuration:500})):"unclustered-point-layer"===a.layer.id&&A(Object(O.a)(Object(O.a)({},K),{},{open:!0,id:a.properties.id})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=i.current.getMap();e.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAyCAMAAAAKuilWAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAj1QTFRFAAAAOLC4/4qK/4qK/4qK/oqK/oqK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4/4qK/4qK/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4OLC4OLC4/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4VkSAhwAAAL90Uk5TAAAJgbcodv/CBxrn/muw8hhClgXS/VYBiNEOIOxmBLv5LlerCNxRnOAUNPeJAMz7N2y+F+93r+k/+I0SyplgMRMDAg0lT4DL9VT81XMhCRIUDgIRTrPPBgr0hAsaYrfd5+njzYI0AUR49tc1Oa/6/9RnBRBIgwqF/cokk9NJEL/+60MIvO48A60dTZwGuvA+WaTx4DYNaIspkx/70iiW6jfvjablLS/2fHDFC4zWfcZQ2/WKYdn87ZQbbJGomkgzCm4xAAAB9ElEQVR4nGNgIBkw4pVlYmZhxaubjZ2dgxOPAi5udnYeXjwK+NiBgF8Ap7wgOxgICeOQFxCBKBAVwy4vLsEOBZJSWBVIy8AU8Mhik5eTZ4cDBUUsCpR4EArYlcUx5FVUkeTZRdUwXKjOjgI0NNEUaGmjKmDX0UV1oR6aPLu+AYoCQ3R5dnYjZHcam2AqYDdFyAubYZFnN5eGK7CwxKaA3QrmTmsbMJ/b1s7ewdHJ2cXVzV0UJODhCZFndPMCBr+3j68TA6Off0BgEINucEgoyNCwcLCCiEhg4EdFMzDExMbFJyQmJaekpjE4pWsAVWSAFQRnsmdlMzDk5Oblw0BBYRFDsboou4gjWEVJqSZDWXlFPjKorGJwrK6phfujrr4hHxU0NjHoOsHlm1vyMUBrGyKg2jsw5fPzEzvhCrrysCnI726Hyvf0YpXP7+uHKpiA3YD8/Fyogok45PMnNUMUTMalIH8KWH4qehAgwDSwgiqc8vnTwQpm4FYwE6xgFm4F5ZBgmI1TwQSIL+bgVDAXomAeLvn50LBesBCHgkWwyFyMXX7JUlhsLluOVcEKeHQzrsQWmKtWI1IMwxpM+bUBSPIMResq0OTXdzKggLQNG5GlN22eyoAOerZs3QaV3r5jJ4Y0ON5Td+2euGfvin0xaVjlsQMAFN44ROMgIzgAAAAASUVORK5CYII=",(function(t,a){if(t)throw t;e.addImage("marker-icon",a)}))}),[]),Object(n.useEffect)((function(){a&&j(Object(O.a)(Object(O.a)({},d),{},{latitude:a.lat,longitude:a.lng,zoom:15,transitionDuration:4e3,transitionInterpolator:new B.a}))}),[a]),Object(n.useEffect)((function(){i.current.getMap().on("moveend",I),I()}),[r,o]);var I=function(){var e=i.current.getMap();e.getZoom()<13?g({type:"FeatureCollection",features:[]}):(X&&clearTimeout(X),X=setTimeout(Object(T.a)(M.a.mark((function t(){var a,n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.next=3,V({dateString:r,timeRange:o,zoom:e.getZoom(),bounds:e.getBounds().toArray().flat()});case 3:return a=t.sent,x(!1),"success"===a.status?a.result&&a.result.features&&(a.result.features.forEach((function(e){var t=E()(e.properties.point_count).format("0.[0] a").toUpperCase();e.properties.point_count>=1e3&&(t+="+"),e.properties.point_count_abbreviated=t})),g(a.result)):g({type:"FeatureCollection",features:[]}),t.next=8,z({dateString:r,timeRange:o,bounds:e.getBounds().toArray().flat()});case 8:"success"===(a=t.sent).status?((n=[]).TOTAL=0,a.result.forEach((function(e){n[e.platform]=e.count,n.TOTAL+=parseInt(e.count)})),c(n)):c([]);case 10:case"end":return t.stop()}}),t)}))),500))};return Object(w.jsxs)(B.f,Object(O.a)(Object(O.a)({className:t.mapDiv},d),{},{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/light-v10",mapboxApiAccessToken:"pk.eyJ1IjoibGVld2FuZ2RldiIsImEiOiJja2tnbDU2c2gwMHNvMndsdDF1d2pxNTQ2In0.zKeo06DtCh6fLifrbCZCFA",ref:i,attributionControl:!1,maxZoom:24,minZoom:13,onViewportChange:j,interactiveLayerIds:["cluster-layer","unclustered-point-layer"],onClick:y,children:[Object(w.jsxs)(B.e,{id:"clusterSource",type:"geojson",data:f,children:[Object(w.jsx)(B.b,{id:"cluster-layer",type:"circle",source:"clusterSource",filter:[">","point_count",1],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),Object(w.jsx)(B.b,{id:"cluster-count-layer",type:"symbol",source:"clusterSource",filter:[">","point_count",1],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),Object(w.jsx)(B.b,{id:"unclustered-point-layer",type:"symbol",source:"clusterSource",filter:["==","point_count",1],layout:{"icon-image":"marker-icon","icon-size":.6,"icon-rotate":["get","heading"],"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-rotation-alignment":"map","icon-pitch-alignment":"viewport"}})]}),Object(w.jsx)(B.c,{style:{top:10,right:10}}),Object(w.jsx)(B.d,{style:{bottom:10,left:10}}),K.open&&Object(w.jsx)(G,{markerInfo:K,setMarkerInfo:A}),h&&Object(w.jsx)(R.a,{})]}))},ee=a(282),te=Object(d.a)({timeslider:{position:"absolute",bottom:10,left:0,right:0,"& .MuiPaper-root":{width:"50%",paddingTop:10,paddingBottom:5,paddingLeft:40,paddingRight:40,backgroundColor:"rgba(255,255,255,0.9)"},"&.MuiSlider-root":{width:"60%"}}}),ae=[{value:0,label:"0"},{value:3,label:"3"},{value:6,label:"6"},{value:9,label:"9"},{value:12,label:"12"},{value:15,label:"15"},{value:18,label:"18"},{value:21,label:"21"},{value:24,label:"24"}];var ne=function(e){var t=te(),a=e.selectedDate,n=e.timeRange,r=e.setTimeRange;return Object(w.jsx)(j.a,{container:!0,className:t.timeslider,justifyContent:"center",children:Object(w.jsxs)(Z.a,{children:[Object(w.jsx)(Y.a,{variant:"h6",align:"center",children:"UTC ".concat(n[0],":00 - ").concat(n[1],":00 ").concat(a)}),Object(w.jsx)(ee.a,{getAriaLabel:function(){return"Time range"},value:n,onChange:function(e,t){r(t)},defaultValue:24,min:0,max:24,valueLabelDisplay:"auto",marks:ae,color:"primary"})]})})},re=a(138),oe=a.n(re),ce=a(139),ie=a.n(ce),se=a(140),le=a.n(se);var ue=function(e){var t=e.counts;return Object(w.jsxs)(j.a,{container:!0,spacing:2,flexDirection:"row",style:{marginBottom:50},children:[Object(w.jsx)(j.a,{item:!0,sm:4,xs:12,children:Object(w.jsxs)(Z.a,{children:[Object(w.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(w.jsx)(oe.a,{color:"primary"}),Object(w.jsx)(Y.a,{variant:"caption",children:"Total Devices"})]}),Object(w.jsx)(Y.a,{variant:"h5",style:{marginLeft:20},children:t.TOTAL?E()(t.TOTAL).format("0,0"):0})]})}),Object(w.jsx)(j.a,{item:!0,sm:4,xs:12,children:Object(w.jsxs)(Z.a,{children:[Object(w.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(w.jsx)(ie.a,{color:"primary"}),Object(w.jsx)(Y.a,{variant:"caption",children:"Android"})]}),Object(w.jsx)(Y.a,{variant:"h5",style:{marginLeft:20},children:t.AAID?E()(t.AAID).format("0,0"):0})]})}),Object(w.jsx)(j.a,{item:!0,sm:4,xs:12,children:Object(w.jsxs)(Z.a,{children:[Object(w.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(w.jsx)(le.a,{color:"secondary"}),Object(w.jsx)(Y.a,{variant:"caption",children:"iPhone"})]}),Object(w.jsx)(Y.a,{variant:"h5",style:{marginLeft:20},children:t.IDFA?E()(t.IDFA).format("0,0"):0})]})})]})};var de=function(){var e=Object(n.useState)("platform"),t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(w.jsx)(j.a,{container:!0,justifyContent:"center",children:Object(w.jsxs)(_.a,{value:a,exclusive:!0,onChange:function(e,t){return r(t)},"aria-label":"chart button group",children:[Object(w.jsx)(Q.a,{value:"platform","aria-label":"Platform",children:"Platform"}),Object(w.jsx)(Q.a,{value:"device_model","aria-label":"Device Model",children:"Device Model"}),Object(w.jsx)(Q.a,{value:"category_1","aria-label":"Category 1",children:"Category 1"}),Object(w.jsx)(Q.a,{value:"category_2","aria-label":"Category 2",children:"Category 2"})]})})},Oe=Object(d.a)({root:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh"},content:{flex:1,display:"flex",flexDirection:"row",backgroundColor:"#f1f6fa"},chartContainer:{width:540,padding:20},mapContainer:{flex:1,position:"relative"}});var je=function(){var e=Oe(),t=Object(n.useState)(null),a=Object(u.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(null),i=Object(u.a)(c,2),s=i[0],l=i[1],d=Object(n.useState)("2021-08-01"),O=Object(u.a)(d,2),j=O[0],b=O[1],p=Object(n.useState)([0,24]),f=Object(u.a)(p,2),g=f[0],m=f[1],C=Object(n.useState)([]),h=Object(u.a)(C,2),x=h[0],L=h[1];return Object(w.jsxs)("div",{className:e.root,children:[Object(w.jsx)(D,{setSearchLocation:o,address:s,setAddress:l,selectedDate:j,setSelectedDate:b,setTimeRange:m}),Object(w.jsxs)("div",{className:e.content,children:[Object(w.jsxs)("div",{className:e.chartContainer,children:[Object(w.jsx)(ue,{counts:x}),Object(w.jsx)(de,{})]}),Object(w.jsxs)("div",{className:e.mapContainer,children:[Object(w.jsx)($,{searchLocation:r,address:s,selectedDate:j,timeRange:g,setCounts:L}),Object(w.jsx)(ne,{selectedDate:j,timeRange:g,setTimeRange:m})]})]})]})},be=Object(i.a)({components:{MuiPaper:{styleOverrides:{root:{padding:10,boxShadow:"0px 24px 48px -4px #06192114"}}},MuiTextField:{styleOverrides:{root:{paddingLeft:20,paddingRight:20,borderRadius:72,backgroundColor:"#f1f6fa"}}},MuiOutlinedInput:{styleOverrides:{notchedOutline:{border:0}}},MuiToggleButtonGroup:{styleOverrides:{root:{borderRadius:50,backgroundColor:"#e3ebf1"},grouped:{"&:first-of-type":{marginLeft:0},"&:last-of-type":{marginRight:0},"&:not(:first-of-type)":{borderTopLeftRadius:50,borderBottomLeftRadius:50},"&:not(:last-of-type)":{borderTopRightRadius:50,borderBottomRightRadius:50}}}},MuiToggleButton:{styleOverrides:{root:{border:0,borderRadius:50,textTransform:"none",padding:"10px 20px",marginLeft:10,marginRight:10,"&.Mui-selected":{color:"#fff",backgroundColor:"#ff844b"}}}},MuiInputAdornment:{styleOverrides:{root:{color:"#ff844b"}}},MuiIconButton:{styleOverrides:{root:{color:"#ff844b"}}}}});be=Object(s.a)(be);var pe=function(){return Object(w.jsx)(l.a,{theme:be,children:Object(w.jsx)(je,{})})},fe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,298)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};c.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(pe,{})}),document.getElementById("root")),fe()}},[[207,1,2]]]);
//# sourceMappingURL=main.13e6d5b8.chunk.js.map