{"version":3,"sources":["utils/settings.js","assets/images/logo.png","utils/util.js","services/days.js","components/locations-dashboard/Header.js","components/locations-dashboard/SideBar.js","services/cluster.js","services/marker.js","services/counts.js","assets/images/marker-icon.png","components/locations-dashboard/MarkerPanel/MarkerInfo.js","components/locations-dashboard/MarkerPanel/PopupInfo.js","components/locations-dashboard/MarkerPanel/TrackingMap.js","components/locations-dashboard/MarkerPanel/MarkerPanel.js","components/locations-dashboard/Map.js","assets/images/search-marker.png","components/locations-dashboard/RenderMode.js","components/locations-dashboard/TimeSlider.js","components/locations-dashboard/Main.js","components/App.js","reportWebVitals.js","index.js"],"names":["BASE_URL","MAPBOX_ACCESS_TOKEN","DEFAULT_VIEWPORT","longitude","latitude","zoom","google","window","DEFAULT_DATE","Date","categories","category_distances","dateFormat","date","d","getDate","m","getMonth","getFullYear","timeFormat","value","sec_num","parseInt","hours","Math","floor","minutes","seconds","secondsFromDate","arr","split","UTC","getDays","params","a","result","url","axios","post","then","response","data","catch","err","status","message","useStyles","makeStyles","header","width","padding","backgroundColor","logo","height","timeout","Header","props","classes","setSearchLocation","address","setAddress","filter","setFilter","useState","isLoading","setIsLoading","highlightedDays","setHighlightedDays","handleMonthChange","fetchHighlightedDays","clearTimeout","setTimeout","res","useEffect","input","document","getElementById","autocomplete","maps","places","Autocomplete","placeChangeHandle","event","addListener","place","getPlace","geometry","formatted_address","location","toJSON","removeListener","Grid","container","className","spacing","alignItems","item","lg","md","justifyContent","src","imgLogo","TextField","id","name","placeholder","fullWidth","InputProps","startAdornment","InputAdornment","position","endAdornment","IconButton","onClick","onMouseDown","e","preventDefault","edge","autoComplete","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","loading","renderLoading","CalendarPickerSkeleton","renderInput","renderDay","day","_value","DayComponentProps","isSelected","outsideCurrentMonth","indexOf","PickersDay","style","border","toString","onMonthChange","onYearChange","onChange","newValue","variant","InputLabelProps","shrink","select","SelectProps","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","category","target","map","index","MenuItem","category_distance","disabled","paper","display","flexDirection","marginBottom","boxShadow","paperHeader","paddingBottom","borderBottom","SideBar","counts","toggleValue","setToggleValue","chartData","setChartData","newData","role","sm","xs","Paper","color","Typography","marginLeft","numeral","format","ToggleButtonGroup","exclusive","ToggleButton","chartType","options","pieHole","legend","alignment","rootProps","flex","opacity","getClusters","getMarkers","getMarkerInfo","getTracking","getCounts","MarkerInfo","markerInfo","setMarkerInfo","fetchMarkerInfo","advertiser_id","final_country","platform","device_model","ipv_4","ipv_6","wifi_ssid","wifi_bssid","location_at","altitude","horizontal_accuracy","vertical_accuracy","heading","speed","user_agent","publisher_id","background","carrier","venue_name","venue_category","dwell_time","CircularProgress","PopupInfo","info","maxWidth","mapboxgl","workerClass","require","default","mapContainer","mapDiv","timeslider","bottom","left","right","paddingTop","paddingLeft","paddingRight","TrackingMap","mapRef","useRef","coordinates","viewport","setViewport","interactiveLayerIds","setInteractiveLayerIds","min","max","step","defaultValue","marks","sliderProps","setSliderProps","sliderValue","setSliderValue","sliderLabel","setSliderLabel","type","features","points","setPoints","trackPoints","setTrackPoints","trackPoint","setTrackPoint","trackLine","setTrackLine","hoverInfo","setHoverInfo","onHover","useCallback","length","feature","layer","lngLat","properties","fetchTrackingData","bbox","turf","current","getMap","WebMercatorViewport","getCanvas","fitBounds","t","forEach","newTrackPoints","i","t1","t2","dm","bearing","k","from_lat","parseFloat","from_lng","to_lat","to_lng","lat","lng","push","time","newTrackLine","point","loadImage","iconMarker","error","image","addImage","t0","label","mapStyle","mapboxApiAccessToken","attributionControl","maxZoom","ref","onViewportChange","paint","source","layout","closeButton","align","Slider","newPoint","newTrackPoint","drawer","minWidth","boxSizing","drawerHeader","MarkerPanel","open","markerPanelInfo","setMarkerPanelInfo","Drawer","anchor","onClose","key","addressLabel","fontSize","lineHeight","borderLeft","pointerEvents","Map","searchLocation","renderMode","setCounts","clusterSource","setClusterSource","heatmapSource","setHeatmapSource","showLoading","setShowLoading","handleClick","transitionDuration","hasImage","removeImage","on","mapDataCallback","off","getZoom","poiLocations","poiFeatures","queryRenderedFeatures","layers","newClusterSource","timeRange","bounds","getBounds","toArray","flat","poiRadius","abbr","toUpperCase","newHeatmapSource","newCounts","row","count","minZoom","maxzoom","minzoom","top","offsetLeft","offsetTop","alt","LinearProgress","togglePanel","RenderMode","setRenderMode","TimeSlider","timeRangeLabel","setTimeRangeLabel","getAriaLabel","root","content","sidebar","Main","theme","createTheme","components","MuiPaper","styleOverrides","MuiTextField","borderRadius","MuiOutlinedInput","notchedOutline","MuiToggleButtonGroup","grouped","marginRight","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","MuiToggleButton","textTransform","MuiInputAdornment","MuiIconButton","responsiveFontSizes","App","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.944135c3.chunk.js","sourcesContent":["\r\n//export const BASE_URL = 'http://localhost:8080';\r\n\r\nexport const BASE_URL = 'https://locations-dashboard.herokuapp.com';\r\n\r\nexport const MAPBOX_ACCESS_TOKEN = 'pk.eyJ1IjoibGVld2FuZ2RldiIsImEiOiJja2tnbDU2c2gwMHNvMndsdDF1d2pxNTQ2In0.zKeo06DtCh6fLifrbCZCFA';\r\n\r\nexport const DEFAULT_VIEWPORT = {\r\n    longitude: -79.3966596,\r\n    latitude: 43.6565291,\r\n    zoom: 14\r\n}\r\n\r\nexport const google = window.google;\r\n\r\nexport const DEFAULT_DATE = new Date('2021-08-01');\r\n\r\n// mapbox gl poi-label layer category_en\r\nexport const categories = [\r\n    'All Categories',\r\n    'Bank',\r\n    'Bar',\r\n    'Cafe',\r\n    'Gas Station',\r\n    'Hospital Grounds',\r\n    'Hotel',\r\n    'Mall',\r\n    'Marketplace',\r\n    'Restaurant',\r\n    'Shop',\r\n    'Supermarket',\r\n];\r\n\r\nexport const category_distances = [5, 10, 20, 50, 100, 200, 500];","export default __webpack_public_path__ + \"static/media/logo.3f900ba7.png\";","\r\nexport const dateFormat = (date) => {\r\n    var d = date.getDate();\r\n    var m = date.getMonth() + 1; //Month from 0 to 11\r\n    var y = date.getFullYear();\r\n    return '' + (m<=9 ? '0' + m : m) + '/' + (d <= 9 ? '0' + d : d) + '/' + y;\r\n}\r\n\r\nexport const timeFormat = (value) => {\r\n    var sec_num = parseInt(value, 10); // don't forget the second param\r\n    var hours   = Math.floor(sec_num / 3600);\r\n    var minutes = Math.floor((sec_num - (hours * 3600)) / 60);\r\n    var seconds = sec_num - (hours * 3600) - (minutes * 60);\r\n\r\n    if (hours   < 10) {hours   = \"0\"+hours;}\r\n    if (minutes < 10) {minutes = \"0\"+minutes;}\r\n    if (seconds < 10) {seconds = \"0\"+seconds;}\r\n    return hours + ':' + minutes + ':' + seconds;\r\n}\r\n\r\nexport const secondsFromDate = (date) => {\r\n    let arr = date.split(\"/\");\r\n    return Date.UTC(arr[2],parseInt(arr[0])-1,arr[1])/1000\r\n}","import axios from \"axios\";\r\nimport { BASE_URL } from \"../utils/settings.js\";\r\n\r\nexport const getDays = async (params) => {\r\n    var result = null;\r\n    \r\n    let url = `${BASE_URL}/api/days`;\r\n\r\n    await axios.post(url, params).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n      result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n      };\r\n    });\r\n    return result;\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport MenuItem from '@mui/material/MenuItem';\r\n\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport DatePicker from '@mui/lab/DatePicker';\r\nimport CalendarPickerSkeleton from '@mui/lab/CalendarPickerSkeleton';\r\nimport PickersDay from '@mui/lab/PickersDay';\r\n\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport CategoryIcon from '@mui/icons-material/Category';\r\nimport ShareLocationIcon from '@mui/icons-material/ShareLocation';\r\n\r\nimport imgLogo from \"../../assets/images/logo.png\";\r\n\r\nimport { google, categories, category_distances } from \"./../../utils/settings.js\";\r\nimport { dateFormat } from '../../utils/util.js';\r\nimport { getDays } from \"../../services/days.js\";\r\n\r\nconst useStyles = makeStyles({\r\n    header:{\r\n       width:'100%',\r\n       padding:'10px 20px',\r\n       backgroundColor:'white'\r\n    },\r\n    logo:{\r\n        height: 80\r\n    }\r\n });\r\n \r\n let timeout = null;\r\n\r\n function Header(props) {\r\n     const classes = useStyles();\r\n     const { \r\n         setSearchLocation,\r\n         address,\r\n         setAddress,\r\n         filter,\r\n         setFilter\r\n     } = props;\r\n     const [isLoading, setIsLoading] = useState(false);\r\n     const [highlightedDays, setHighlightedDays] = useState([]);\r\n     \r\n     const handleMonthChange = (date) => {\r\n        setIsLoading(true);\r\n        setHighlightedDays([]);\r\n        fetchHighlightedDays(date);\r\n     }\r\n\r\n     const fetchHighlightedDays = (date) => {\r\n        if(timeout){\r\n           clearTimeout(timeout);\r\n        }\r\n        timeout = setTimeout(async () => {\r\n            let res = await getDays({date:dateFormat(date)});\r\n            setIsLoading(false);\r\n            if(res.status === 'success'){\r\n              setHighlightedDays(res.result);\r\n            }\r\n        }, 500);\r\n     };\r\n\r\n     useEffect(() => {\r\n        var input = document.getElementById(\"input-address\");\r\n        const autocomplete = new google.maps.places.Autocomplete(input);\r\n        const placeChangeHandle = google.maps.event.addListener(autocomplete, \"place_changed\", function () {\r\n          var place = autocomplete.getPlace();\r\n          if(place && place.geometry && place.formatted_address){\r\n            setSearchLocation(place.geometry.location.toJSON());\r\n            setAddress(place.formatted_address);\r\n          }\r\n        });\r\n\r\n        fetchHighlightedDays(filter.date);\r\n\r\n        return () => {\r\n           //google.maps.event.clearListeners(autocomplete, 'place_changed');\r\n           google.maps.event.removeListener(placeChangeHandle);\r\n        }\r\n     }, []);\r\n\r\n     return (\r\n        <Grid container className={classes.header} spacing={2} alignItems=\"center\">\r\n            <Grid container item lg={3} md={12} justifyContent=\"center\">\r\n                <img src={imgLogo} className={classes.logo} />\r\n            </Grid>\r\n            <Grid container item spacing={2} lg={9} md={12}>\r\n                <Grid item md={4}>\r\n                    <TextField\r\n                      id=\"input-address\"\r\n                      name=\"address\"\r\n                      //variant=\"outlined\"\r\n                      //InputLabelProps={{ shrink: true }}\r\n                      placeholder=\"Enter your address.\"\r\n                      fullWidth\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">\r\n                            <SearchIcon />\r\n                          </InputAdornment>\r\n                        ),\r\n                        endAdornment: (\r\n                          <InputAdornment position=\"end\">\r\n                              <IconButton aria-label=\"toggle password visibility\"\r\n                                  onClick={()=>{\r\n                                      setAddress('');\r\n                                      document.getElementById(\"input-address\").value='';\r\n                                  }}\r\n                                  onMouseDown={(e)=>e.preventDefault()}\r\n                                  edge=\"end\"\r\n                              >{address && <CloseIcon />}\r\n                              </IconButton>\r\n                          </InputAdornment>\r\n                        )\r\n                      }}\r\n                      autoComplete=\"off\"\r\n                    />\r\n                </Grid>\r\n                <Grid item md={3}>\r\n                  <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n                        <DatePicker\r\n                            //label=\"Select Date\"\r\n                            value={filter.date}\r\n                            loading={isLoading}\r\n                            renderLoading={() => <CalendarPickerSkeleton />}\r\n                            renderInput={(params) => <TextField {...params} fullWidth />}\r\n                            renderDay={(day, _value, DayComponentProps) => {\r\n                                const isSelected =\r\n                                  !DayComponentProps.outsideCurrentMonth &&\r\n                                  highlightedDays.indexOf(day.getDate()) > -1;\r\n                                return (\r\n                                  <PickersDay \r\n                                      key={day.toString()} \r\n                                      {...DayComponentProps} \r\n                                      //disabled={!isSelected}\r\n                                      style={{border: isSelected?'1px solid #ff844b':0}}\r\n                                  />\r\n                                );\r\n                              }}\r\n                              onMonthChange={handleMonthChange}\r\n                              onYearChange={handleMonthChange}\r\n                              onChange={(newValue) => {\r\n                                if(newValue!==null){\r\n                                  setFilter({\r\n                                    ...filter,\r\n                                    date: newValue\r\n                                  });\r\n                                }\r\n                              }}\r\n                        />\r\n                    </LocalizationProvider>\r\n                </Grid>\r\n                <Grid item md={3}>\r\n                  <TextField\r\n                    variant=\"outlined\"\r\n                    //label=\"Select categories\"\r\n                    fullWidth\r\n                    InputLabelProps={{ shrink: true }}\r\n                    select={true}\r\n                    SelectProps={{\r\n                        MenuProps: {\r\n                          anchorOrigin: { vertical: \"bottom\", horizontal: \"center\" },\r\n                          transformOrigin: { vertical: \"top\", horizontal: \"center\" },\r\n                          getContentAnchorEl: null\r\n                      }\r\n                    }}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">\r\n                          <CategoryIcon />\r\n                        </InputAdornment>\r\n                      )\r\n                    }}\r\n                    value={filter.category}\r\n                    onChange={(e) => setFilter({...filter, category: e.target.value})}\r\n                  >\r\n                    {  \r\n                      categories.map((item,index)=>(\r\n                        <MenuItem key={`category-${index}`} value={item}>\r\n                            {item}\r\n                        </MenuItem>  \r\n                      ))\r\n                    }\r\n                  </TextField>\r\n                </Grid>\r\n                <Grid item md={2}>\r\n                  <TextField\r\n                      variant=\"outlined\"\r\n                      //label=\"Select categories\"\r\n                      //placeholder=\"Select Category\"\r\n                      fullWidth\r\n                      InputLabelProps={{ shrink: true }}\r\n                      select={true}\r\n                      SelectProps={{\r\n                          MenuProps: {\r\n                            anchorOrigin: { vertical: \"bottom\", horizontal: \"center\" },\r\n                            transformOrigin: { vertical: \"top\", horizontal: \"center\" },\r\n                            getContentAnchorEl: null\r\n                        }\r\n                      }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">\r\n                            <ShareLocationIcon />\r\n                          </InputAdornment>\r\n                        )\r\n                      }}\r\n                      value={filter.category_distance}\r\n                      onChange={(e) => setFilter({...filter, category_distance: e.target.value})}\r\n                      disabled={filter.category==='All Categories'?true:false}\r\n                    >\r\n                      {  \r\n                        category_distances.map((item,index)=>(\r\n                          <MenuItem key={`d-${index}`} value={item}>\r\n                              {`${item} m`}\r\n                          </MenuItem>  \r\n                        ))\r\n                      }\r\n                  </TextField>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n     );\r\n }\r\n\r\nexport default Header;","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\r\n\r\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\r\nimport PhoneAndroidIcon from '@mui/icons-material/PhoneAndroid';\r\nimport PhoneIphoneIcon from '@mui/icons-material/PhoneIphone';\r\n\r\nimport numeral from \"numeral\";\r\n\r\nimport Chart from \"react-google-charts\";\r\n\r\nconst useStyles = makeStyles({\r\n    paper:{\r\n        display:'flex',\r\n        flexDirection:'column',\r\n        width:'100%',\r\n        height:'100%',\r\n        marginBottom:20,\r\n        '&.MuiPaper-root':{\r\n            padding:'30px 30px 20px 30px',\r\n            backgroundColor:'transparent',\r\n            border:'4px solid #e3ebf1',\r\n            boxShadow:'none'\r\n        }\r\n    },\r\n    paperHeader:{\r\n        paddingBottom:10,\r\n        marginBottom:20,\r\n        borderBottom:'1px solid #e3ebf1'\r\n    },\r\n});\r\n\r\nfunction SideBar(props) {\r\n   const classes = useStyles();\r\n   const { counts } = props;\r\n   const [toggleValue, setToggleValue] = useState('platform');\r\n   const [chartData, setChartData] = useState([]);\r\n   \r\n   const handleToggle = (e, newValue) => {\r\n     if(newValue !== null){\r\n        setToggleValue(newValue);\r\n      }\r\n   }\r\n\r\n   useEffect(()=>{\r\n     var newData = [\r\n        ['Platform','Count',{ role: 'style' }],\r\n        ['AAID',parseInt(counts[\"AAID\"]),'#000'],\r\n        ['IDFA',parseInt(counts[\"IDFA\"]),'#000'],\r\n     ];\r\n     setChartData(newData);\r\n   },[counts]);\r\n\r\n   return (\r\n        <>\r\n        <Grid container spacing={2} flexDirection=\"row\" style={{marginBottom:50}}>\r\n            <Grid item sm={4} xs={12}>\r\n                <Paper>\r\n                    <Grid container alignItems=\"center\">\r\n                        <LocationOnIcon color=\"primary\" />\r\n                        <Typography variant=\"caption\">\r\n                            Total Devices\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Typography variant=\"h5\" style={{marginLeft:20}}>\r\n                        {counts[\"TOTAL\"]?numeral(counts[\"TOTAL\"]).format(\"0,0\"):0}\r\n                    </Typography>\r\n                </Paper>\r\n            </Grid>\r\n            <Grid item sm={4} xs={12}>\r\n                <Paper>\r\n                    <Grid container alignItems=\"center\">\r\n                        <PhoneAndroidIcon color=\"primary\" />\r\n                        <Typography variant=\"caption\">\r\n                            Android\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Typography variant=\"h5\" style={{marginLeft:20}}>\r\n                    {counts[\"AAID\"]?numeral(counts[\"AAID\"]).format(\"0,0\"):0}\r\n                    </Typography>\r\n                </Paper>\r\n            </Grid>\r\n            <Grid item sm={4} xs={12}>\r\n                <Paper>\r\n                    <Grid container alignItems=\"center\">\r\n                        <PhoneIphoneIcon color=\"secondary\" />\r\n                        <Typography variant=\"caption\">\r\n                            iPhone\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Typography variant=\"h5\" style={{marginLeft:20}}>\r\n                    {counts[\"IDFA\"]?numeral(counts[\"IDFA\"]).format(\"0,0\"):0}\r\n                    </Typography>\r\n                </Paper>\r\n            </Grid>\r\n        </Grid>\r\n        <Grid container justifyContent=\"center\" style={{marginBottom:40}}>\r\n           <ToggleButtonGroup \r\n                value={toggleValue} exclusive\r\n                onChange={handleToggle} aria-label=\"chart button group\"\r\n            >\r\n                <ToggleButton value=\"platform\" aria-label=\"Platform\">\r\n                   Platform\r\n                </ToggleButton>\r\n                <ToggleButton value=\"category_1\" aria-label=\"Category 1\">\r\n                   Category 1\r\n                </ToggleButton>\r\n                <ToggleButton value=\"category_2\" aria-label=\"Category 2\">\r\n                   Category 2\r\n                </ToggleButton>\r\n            </ToggleButtonGroup>\r\n       </Grid>\r\n       <Grid container justifyContent=\"center\" style={{width:'100%',height:500}}>\r\n          <Paper className={classes.paper}>\r\n            <Typography variant=\"h6\" className={classes.paperHeader}>\r\n               Device Platform\r\n            </Typography>   \r\n            <Chart\r\n               width=\"100%\"\r\n               height=\"100%\"\r\n               chartType=\"PieChart\"\r\n               //loader={<div>Loading</div>}\r\n               data={chartData}\r\n               options={{\r\n                  //title: 'Device Platform',\r\n                  //is3D: true,\r\n                  pieHole: 0.5,\r\n                  legend: { position: 'top', alignment: 'center' },\r\n                  backgroundColor: 'transparent'\r\n               }}\r\n               rootProps={{ 'data-testid': '1' }}\r\n               style={{flex:1,opacity:0.9}}\r\n            />\r\n          </Paper>\r\n       </Grid>\r\n       </>\r\n   );\r\n\r\n}\r\n\r\nexport default SideBar;","import axios from \"axios\";\r\nimport { BASE_URL } from \"../utils/settings.js\";\r\n\r\nexport const getClusters = async (params) => {\r\n    var result = null;\r\n    \r\n    let url = `${BASE_URL}/api/clusters`;\r\n  \r\n    await axios.post(url, params).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n      result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n      };\r\n    });\r\n    return result;\r\n  };","import axios from \"axios\";\r\nimport { BASE_URL } from \"../utils/settings.js\";\r\n\r\nexport const getMarkers = async (params) => {\r\n  var result = null;\r\n    \r\n  let url = `${BASE_URL}/api/markers`;\r\n\r\n  await axios.post(url, params).then((response) => {\r\n      result = response.data;\r\n  }).catch((err) => {\r\n    result = {\r\n      status: \"failed\",\r\n      message: \"No internet connection\",\r\n    };\r\n  });\r\n  return result;\r\n}\r\n\r\nexport const getMarkerInfo = async (params) => {\r\n    var result = null;\r\n    \r\n    let url = `${BASE_URL}/api/marker/info`;\r\n\r\n    await axios.post(url, params).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n      result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n      };\r\n    });\r\n    return result;\r\n};\r\n\r\nexport const getTracking = async (params) => {\r\n  var result = null;\r\n  \r\n  let url = `${BASE_URL}/api/marker/tracking`;\r\n\r\n  await axios.post(url, params).then((response) => {\r\n      result = response.data;\r\n  }).catch((err) => {\r\n    result = {\r\n      status: \"failed\",\r\n      message: \"No internet connection\",\r\n    };\r\n  });\r\n  return result;\r\n};","import axios from \"axios\";\r\nimport { BASE_URL } from \"../utils/settings.js\";\r\n\r\nexport const getCounts = async (params) => {\r\n    var result = null;\r\n\r\n    let url = `${BASE_URL}/api/counts`;\r\n\r\n    await axios.post(url, params).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n        result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n        };\r\n    });\r\n    return result;\r\n};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAyCAMAAAAKuilWAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAj1QTFRFAAAAUbvW/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWtXpTgAAAAL90Uk5TAAAJgbcodv/CBxrn/muw8hhClgXS/VYBiNEOIOxmBLv5LlerCNxRnOAUNPeJAMz7N2y+F+93r+k/+I0SyplgMRMDAg0lT4DL9VT81XMhCRIUDgIRTrPPBgr0hAsaYrfd5+njzYI0AUR49tc1Oa/6/9RnBRBIgwqF/cokk9NJEL/+60MIvO48A60dTZwGuvA+WaTx4DYNaIspkx/70iiW6jfvjablLS/2fHDFC4zWfcZQ2/WKYdn87ZQbbJGomkgzCm4xAAAB9ElEQVR4nGNgIBkw4pVlYmZhxaubjZ2dgxOPAi5udnYeXjwK+NiBgF8Ap7wgOxgICeOQFxCBKBAVwy4vLsEOBZJSWBVIy8AU8Mhik5eTZ4cDBUUsCpR4EArYlcUx5FVUkeTZRdUwXKjOjgI0NNEUaGmjKmDX0UV1oR6aPLu+AYoCQ3R5dnYjZHcam2AqYDdFyAubYZFnN5eGK7CwxKaA3QrmTmsbMJ/b1s7ewdHJ2cXVzV0UJODhCZFndPMCBr+3j68TA6Off0BgEINucEgoyNCwcLCCiEhg4EdFMzDExMbFJyQmJaekpjE4pWsAVWSAFQRnsmdlMzDk5Oblw0BBYRFDsboou4gjWEVJqSZDWXlFPjKorGJwrK6phfujrr4hHxU0NjHoOsHlm1vyMUBrGyKg2jsw5fPzEzvhCrrysCnI726Hyvf0YpXP7+uHKpiA3YD8/Fyogok45PMnNUMUTMalIH8KWH4qehAgwDSwgiqc8vnTwQpm4FYwE6xgFm4F5ZBgmI1TwQSIL+bgVDAXomAeLvn50LBesBCHgkWwyFyMXX7JUlhsLluOVcEKeHQzrsQWmKtWI1IMwxpM+bUBSPIMResq0OTXdzKggLQNG5GlN22eyoAOerZs3QaV3r5jJ4Y0ON5Td+2euGfvin0xaVjlsQMAFN44ROMgIzgAAAAASUVORK5CYII=\"","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport { timeFormat, secondsFromDate } from \"../../../utils/util.js\";\r\nimport { getMarkerInfo } from \"../../../services/marker.js\";\r\n\r\nconst useStyles = makeStyles({\r\n    paper:{\r\n        marginBottom:20,\r\n        '&.MuiPaper-root':{\r\n            padding:'30px 30px 20px 30px'\r\n        }\r\n    },\r\n    paperHeader:{\r\n        paddingBottom:10,\r\n        marginBottom:20,\r\n        borderBottom:'1px solid #e3ebf1'\r\n    },\r\n});\r\n\r\nfunction MarkerInfo(props){\r\n    const { params } = props;\r\n    const classes = useStyles();\r\n    const [markerInfo, setMarkerInfo] = useState(null);\r\n\r\n    useEffect(()=>{\r\n     \r\n        fetchMarkerInfo();\r\n          \r\n     }, []);\r\n\r\n    const fetchMarkerInfo = async () => {\r\n        let res = await getMarkerInfo({\r\n            date: params.date,\r\n            id: params.id\r\n        });\r\n        if(res.status === 'success'){\r\n            setMarkerInfo(res.result);\r\n        }else{\r\n            setMarkerInfo(null);\r\n        }\r\n    }\r\n\r\n    return (\r\n        markerInfo?\r\n            <>\r\n            <Paper className={classes.paper}>\r\n                    <Grid container className={classes.paperHeader}>\r\n                        <Typography variant=\"h6\">\r\n                            Device Identification\r\n                        </Typography>\r\n                    </Grid>  \r\n                    <Grid container spacing={1} alignItems=\"center\">\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Advertiser ID</Typography>\r\n                        </Grid>\r\n                        <Grid item md={9} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.advertiser_id}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Country</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.final_country}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Platform</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.platform}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Device Model</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.device_model}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">IPV 4</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.ipv_4}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">IPV 6</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.ipv_6}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Wifi SSID</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.wifi_ssid}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Wifi BSSID</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.wifi_bssid}</Typography>\r\n                        </Grid>\r\n                    </Grid>  \r\n                </Paper>\r\n                <Paper className={classes.paper}>\r\n                    <Grid container className={classes.paperHeader}>\r\n                        <Typography variant=\"h6\">\r\n                            Device Location\r\n                        </Typography>\r\n                    </Grid> \r\n                    <Grid container spacing={1} alignItems=\"center\">\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Location time</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">\r\n                                {`UTC ${timeFormat(markerInfo.location_at-secondsFromDate(params.date))} ${params.date}`}\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Location</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">\r\n                                {`[ ${markerInfo.longitude}, ${markerInfo.latitude} ]`}\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Altitude</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{`${markerInfo.altitude} m`}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Horizontal Accuracy</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{`${markerInfo.horizontal_accuracy} m`}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Vertical Accuracy</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{`${markerInfo.vertical_accuracy} m`}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Heading</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.heading}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Speed</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{`${markerInfo.speed} m/s`}</Typography>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n                <Paper className={classes.paper}>\r\n                    <Grid container className={classes.paperHeader}>\r\n                        <Typography variant=\"h6\">\r\n                            Other Information\r\n                        </Typography>\r\n                    </Grid> \r\n                    <Grid container spacing={1} alignItems=\"center\">\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">User Agent</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.user_agent}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Publisher ID</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.publisher_id}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Technical Signals</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\"></Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Background</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.background}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Carrier</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.carrier}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Venue Name</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.venue_name}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Venue Category</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.venue_category}</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"subtitle2\">Dwell Time</Typography>\r\n                        </Grid>\r\n                        <Grid item md={3} xs={6}>\r\n                            <Typography variant=\"caption\">{markerInfo.dwell_time}</Typography>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </>\r\n            :\r\n            <Grid container justifyContent=\"center\">\r\n                <CircularProgress />\r\n            </Grid>\r\n    );\r\n}\r\n\r\nexport default MarkerInfo;","import React from 'react';\r\nimport Grid from '@mui/material/Grid';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nimport { timeFormat, secondsFromDate } from \"../../../utils/util.js\";\r\n\r\nfunction PopupInfo(props){\r\n  const { params, info } = props;\r\n  return (\r\n    <Grid container style={{maxWidth:350,padding:10}}>\r\n        <Grid item xs={12}>\r\n           <Typography variant=\"h6\" style={{marginBottom:10,borderBottom:'1px solid #e3ebf1'}}>\r\n               Location Information\r\n            </Typography>  \r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Time</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n            {`UTC ${timeFormat(info['location_at']-secondsFromDate(params.date))} ${params.date}`}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Location</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n                {`[ ${info['longitude']}, ${info['latitude']} ]`}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Altitude</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n                {`${info['altitude']} m`}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Heading</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n                {info['heading']}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Speed</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n                {`${info['speed']} m/s`}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Horizontal Accuracy</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n              {`${info['horizontal_accuracy']} m`}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Vertical Accuracy</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n                {`${info['vertical_accuracy']} m`}\r\n            </Typography>\r\n        </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default PopupInfo;","import React, { useEffect, useState, useRef, useCallback} from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport Slider from '@mui/material/Slider';\r\n\r\nimport ReactMapGL, { \r\n    Source,\r\n    Layer,\r\n    Popup,\r\n    WebMercatorViewport\r\n} from 'react-map-gl';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport { MAPBOX_ACCESS_TOKEN } from \"../../../utils/settings.js\";\r\n\r\nimport * as turf from '@turf/turf'\r\n\r\nimport iconMarker from \"../../../assets/images/marker-icon.png\";\r\n\r\nimport { timeFormat, secondsFromDate } from \"../../../utils/util.js\";\r\nimport { getTracking } from \"../../../services/marker.js\";\r\n\r\nimport PopupInfo from \"./PopupInfo.js\";\r\n\r\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\r\n\r\nconst useStyles = makeStyles({\r\n    mapContainer:{\r\n        flex:1,\r\n        position:'relative'\r\n     },\r\n     mapDiv:{\r\n         border:'1px solid #e3ebf1',\r\n        '& .mapboxgl-ctrl-logo': {\r\n            display: 'none'\r\n         }\r\n     },\r\n     timeslider:{\r\n         position:'absolute',\r\n         bottom:10,\r\n         left:0,\r\n         right:0,\r\n         '& .MuiPaper-root':{\r\n            width:'70%',\r\n            paddingTop:10,\r\n            paddingBottom:5,\r\n            paddingLeft:40,\r\n            paddingRight:40,\r\n            backgroundColor:'rgba(255,255,255,0.7)',\r\n         },\r\n         '&.MuiSlider-root':{\r\n           //position:'absolute'\r\n           width:'60%'\r\n        }\r\n     }\r\n});\r\n\r\nfunction TrackingMap(props){\r\n    const classes = useStyles();\r\n    const { params } = props;\r\n    const mapRef = useRef(null);\r\n    const [viewport, setViewport] = useState({\r\n        longitude: params.geometry.coordinates[0],\r\n        latitude: params.geometry.coordinates[1],\r\n        zoom:15\r\n    });\r\n    const [interactiveLayerIds, setInteractiveLayerIds] = useState(null);\r\n    const [sliderProps, setSliderProps] = useState({\r\n        min:0,\r\n        max:100,\r\n        step: 1,\r\n        defaultValue:0,\r\n        marks:[]\r\n    });\r\n    \r\n    const [sliderValue, setSliderValue] = useState(0);\r\n    const [sliderLabel, setSliderLabel] = useState('');\r\n    //const [isLoading, setIsLoading] = useState(true);\r\n    const [points, setPoints] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    const [trackPoints, setTrackPoints] = useState([]);\r\n    const [trackPoint, setTrackPoint] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    const [trackLine, setTrackLine] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    \r\n    const [hoverInfo, setHoverInfo] = useState(null);\r\n\r\n    const onHover = useCallback(e => {\r\n        if(e.features && e.features.length>0){\r\n            const feature = e.features[0];\r\n            if(feature.layer.id==='points-layer'){\r\n                setHoverInfo({\r\n                    longitude: e.lngLat[0],\r\n                    latitude: e.lngLat[1],\r\n                    data: feature.properties\r\n                });\r\n            }else{\r\n               setHoverInfo(null);\r\n            }\r\n        }else{\r\n            setHoverInfo(null);\r\n        }\r\n    }, []);\r\n\r\n    const handleSliderChange = (event, newValue) => {\r\n        setSliderValue(newValue);\r\n        setSliderLabel(`UTC ${timeFormat(newValue-secondsFromDate(params.date))} ${params.date}`);\r\n\r\n        // current track line\r\n        let newTrackLine={\r\n            type: 'FeatureCollection',\r\n            features:[{\r\n                type:'Feature',\r\n                geometry:{\r\n                    type:'LineString',\r\n                    coordinates:[]\r\n                },\r\n                properties:{}\r\n            }]\r\n        }\r\n        let newPoint = null;\r\n        trackPoints.forEach(point=>{\r\n            if(point.time<=newValue){\r\n                newTrackLine.features[0].geometry.coordinates.push([\r\n                    point.longitude,\r\n                    point.latitude,\r\n                ]);\r\n                newPoint = point;\r\n            }else{\r\n                return;\r\n            }\r\n        });\r\n        setTrackLine(newTrackLine);\r\n\r\n        // current track point\r\n        if(newPoint){\r\n            let newTrackPoint={\r\n                type: 'FeatureCollection',\r\n                features:[{\r\n                    type:'Feature',\r\n                    geometry:{\r\n                        type:'Point',\r\n                        coordinates:[newPoint.longitude, newPoint.latitude]\r\n                    },\r\n                    properties:{heading: newPoint.heading}\r\n                }]\r\n            }\r\n            setTrackPoint(newTrackPoint);\r\n        }\r\n    };\r\n\r\n    const fetchTrackingData = async () => {\r\n        let res = await getTracking({\r\n            date: params.date,\r\n            id: params.id\r\n        });\r\n\r\n        if(res.status === 'success'){\r\n            let result = res.result;\r\n            // full extent map\r\n            var bbox = turf.bbox(result);\r\n            const map = mapRef.current.getMap();\r\n            const { longitude, latitude, zoom } = new WebMercatorViewport({\r\n                ...viewport,\r\n                width: map.getCanvas().width,\r\n                height: map.getCanvas().height,\r\n                }).fitBounds(\r\n                [\r\n                    [bbox[0], bbox[1]],\r\n                    [bbox[2], bbox[3]],\r\n                ],\r\n                { padding: 40 }\r\n            );\r\n            setViewport({\r\n                ...viewport,\r\n                longitude: longitude,\r\n                latitude: latitude,\r\n                zoom: zoom-1,\r\n            });\r\n\r\n            // measured points\r\n            setPoints(result);\r\n            setInteractiveLayerIds(['points-layer']);\r\n\r\n            let features = result.features;\r\n\r\n            // current track point\r\n            let t = 0;\r\n            features.forEach(feature=>{\r\n                if(feature.properties.id == params.id){\r\n                    setTrackPoint({\r\n                        type:'FeatureCollection',\r\n                        features:[feature]\r\n                    });\r\n                    t = parseInt(feature.properties[\"location_at\"]);\r\n                    setSliderValue(t);\r\n                    setSliderLabel(`UTC ${timeFormat(t-secondsFromDate(params.date))} ${params.date}`);\r\n                    return;\r\n                }\r\n            });\r\n\r\n            // calculate track points\r\n            let newTrackPoints = [];\r\n            for(let i=0;i<features.length-1;i++){\r\n                var t1 = parseInt(features[i].properties['location_at']);\r\n                var t2 = parseInt(features[i+1].properties['location_at']);\r\n                var dm=(t2-t1)/30;\r\n                var bearing = turf.bearing(features[i], features[i+1]);\r\n                if(dm>1){\r\n                    var k=0;\r\n                    while(t1<t2){\r\n                        var from_lat=parseFloat(features[i].properties['latitude']);\r\n                        var from_lng=parseFloat(features[i].properties['longitude']);\r\n                        var to_lat=parseFloat(features[i+1].properties['latitude']);\r\n                        var to_lng=parseFloat(features[i+1].properties['longitude']);\r\n                        var lat=from_lat+(to_lat-from_lat)*k/dm;\r\n                        var lng=from_lng+(to_lng-from_lng)*k/dm;\r\n                        newTrackPoints.push({\r\n                           latitude: lat,\r\n                           longitude: lng,\r\n                           time: t1,\r\n                           heading: turf.bearingToAzimuth(bearing),\r\n                        });\r\n                        t1+=30;\r\n                        k++;\r\n                    }\r\n                }else{\r\n                    newTrackPoints.push({\r\n                        latitude: parseFloat(features[i].properties['latitude']),\r\n                        longitude: parseFloat(features[i].properties['longitude']),\r\n                        time: t1,\r\n                        heading: turf.bearingToAzimuth(bearing),\r\n                    });\r\n                }\r\n            }\r\n\r\n            setTrackPoints(newTrackPoints);\r\n\r\n            // current track line\r\n            let newTrackLine={\r\n                type: 'FeatureCollection',\r\n                features:[{\r\n                    type:'Feature',\r\n                    geometry:{\r\n                        type:'LineString',\r\n                        coordinates:[]\r\n                    },\r\n                    properties:{}\r\n                }]\r\n            }\r\n            newTrackPoints.forEach(point=>{\r\n                if(point.time<=t){\r\n                    newTrackLine.features[0].geometry.coordinates.push([\r\n                        point.longitude,\r\n                        point.latitude,\r\n                    ]);\r\n                }else{\r\n                    return;\r\n                }\r\n            });\r\n            setTrackLine(newTrackLine);\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const map = mapRef.current.getMap();\r\n        \r\n        map.loadImage(iconMarker, (error, image) => {\r\n            if (error) throw error;\r\n            // Add the image to the map style.\r\n            map.addImage('marker-icon', image);\r\n        });\r\n\r\n        const t0 = secondsFromDate(params.date);\r\n        setSliderProps({\r\n        min: t0,\r\n        max: t0+86399,\r\n        defaultValue:t0+86399,\r\n        step: 30,\r\n        marks:[\r\n            { value: t0, label: '0'},\r\n            { value: t0+3*3600, label: '3'},\r\n            { value: t0+6*3600, label: '6'},\r\n            { value: t0+9*3600, label: '9'},\r\n            { value: t0+12*3600, label: '12'},\r\n            { value: t0+15*3600, label: '15'},\r\n            { value: t0+18*3600, label: '18'},\r\n            { value: t0+21*3600, label: '21'},\r\n            { value: t0+24*3600, label: '24'}\r\n        ]\r\n        });\r\n        setSliderValue(t0);\r\n        setSliderLabel(`UTC ${timeFormat(0)} ${params.date}`);\r\n        \r\n        fetchTrackingData();\r\n        \r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.mapContainer}>\r\n            <ReactMapGL className={classes.mapDiv}\r\n                {...viewport}    \r\n                width=\"100%\"\r\n                height=\"100%\"\r\n                mapStyle=\"mapbox://styles/mapbox/light-v10\"\r\n                mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN}\r\n                attributionControl={false}\r\n                maxZoom={22}\r\n                //minZoom={14}\r\n                ref={mapRef}\r\n                interactiveLayerIds={interactiveLayerIds}\r\n                onViewportChange={setViewport}\r\n                onHover={onHover}\r\n            >\r\n                <Source id=\"trackLine\" type=\"geojson\" data={trackLine}>\r\n                    <Layer id=\"trackLine\" type=\"line\"\r\n                        filter={['==', '$type', 'LineString']}\r\n                        paint={{\r\n                            'line-color': 'cyan',\r\n                            'line-opacity': 0.75,\r\n                            'line-width': 4\r\n                        }}\r\n                    />\r\n                </Source>   \r\n                <Source id=\"points\" type=\"geojson\" data={points}>\r\n                    <Layer\r\n                        id='points-layer'\r\n                        type='circle'\r\n                        source='points'\r\n                        paint={{\r\n                          'circle-color': '#1976d2',\r\n                          'circle-radius': 6\r\n                        }}\r\n                    />\r\n                </Source>\r\n                <Source id=\"trackPoint\" type=\"geojson\" data={trackPoint}>\r\n                    <Layer\r\n                        id='track-point-layer'\r\n                        type='symbol'\r\n                        source='trackPoint'\r\n                        layout={{\r\n                            'icon-image': 'marker-icon',\r\n                            'icon-size': 0.6,\r\n                            'icon-rotate': [\"get\",\"heading\"],\r\n                            'icon-allow-overlap':true,\r\n                            'icon-ignore-placement': true,\r\n                            'icon-rotation-alignment':'map', // viewport\r\n                            'icon-pitch-alignment':'viewport'\r\n                        }}\r\n                    />\r\n                </Source>\r\n                {hoverInfo && (\r\n                    <Popup\r\n                        longitude={hoverInfo.longitude}\r\n                        latitude={hoverInfo.latitude}\r\n                        closeButton={false}\r\n                    >\r\n                       <PopupInfo info={hoverInfo.data} params={params} />\r\n                    </Popup>\r\n                )}\r\n            </ReactMapGL>\r\n            <Grid container className={classes.timeslider} justifyContent=\"center\">\r\n                <Paper>\r\n                    <Typography variant=\"h6\" align=\"center\">\r\n                        {sliderLabel}\r\n                    </Typography>\r\n                    <Slider\r\n                        aria-label=\"track time\"\r\n                        value={sliderValue}\r\n                        onChange={handleSliderChange}\r\n                        //valueLabelDisplay=\"auto\"\r\n                        style={{color:'#ff844b'}}\r\n                        {...sliderProps}\r\n                    />\r\n                </Paper>\r\n            </Grid>\r\n        </div>  \r\n    );\r\n}\r\n\r\nexport default TrackingMap;","import React, { useState } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Drawer from '@mui/material/Drawer';\r\nimport Typography from '@mui/material/Typography';\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\r\n\r\nimport MarkerInfo from \"./MarkerInfo.js\";\r\nimport TrackingMap from './TrackingMap.js';\r\n\r\nconst useStyles = makeStyles({\r\n    drawer:{\r\n       '& .MuiBackdrop-root':{\r\n           //position:'absolute'\r\n           //backgroundColor:'transparent' //'rgba(0,0,0,0.2)'\r\n       },\r\n       '&>.MuiPaper-root':{\r\n           //position: 'absolute',\r\n           display:'flex',\r\n           flexDirection:'column',\r\n           width: '50%',\r\n           minWidth:400,\r\n           padding:'20px 40px',\r\n           backgroundColor:'#f1f6fa',\r\n           boxSizing:'border-box'\r\n       }\r\n    },\r\n    drawerHeader:{\r\n      display:'flex',\r\n      flexDirection:'row',\r\n      paddingTop:20,\r\n      paddingBottom:16,\r\n      marginBottom:20,\r\n      borderBottom:'1px solid #e3ebf1'\r\n    },\r\n });\r\n\r\nfunction MarkerPanel(props) {\r\n    const classes = useStyles();\r\n    const {\r\n        markerPanelInfo,\r\n        setMarkerPanelInfo\r\n    } = props;\r\n\r\n    const [toggleValue, setToggleValue] = useState('properties');\r\n    \r\n    const toggleDrawer = (open) => (event) => {\r\n        if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n            return;\r\n        }\r\n        setMarkerPanelInfo({\r\n            ...markerPanelInfo,\r\n            open: open\r\n        });\r\n    };\r\n\r\n    const handleToggleButton = (event, newValue) => {\r\n        if(newValue !== null){\r\n          setToggleValue(newValue);\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <Drawer\r\n            className={classes.drawer}\r\n            anchor=\"left\"\r\n            open={true}\r\n            onClose={toggleDrawer(false)}\r\n        >\r\n          <Grid container className={classes.drawerHeader} justifyContent=\"space-between\" alignItems=\"center\">\r\n                <Typography variant=\"h6\">\r\n                    Device Information\r\n                </Typography>\r\n                <ToggleButtonGroup \r\n                    value={toggleValue} exclusive\r\n                    onChange={handleToggleButton} aria-label=\"marker button group\"\r\n                >\r\n                    <ToggleButton value=\"properties\" aria-label=\"Properties\">\r\n                       Properties\r\n                    </ToggleButton>\r\n                    <ToggleButton value=\"tracking\" aria-label=\"Tracking\">\r\n                       Tracking\r\n                    </ToggleButton>\r\n                </ToggleButtonGroup>\r\n          </Grid>\r\n          {toggleValue === 'properties' && (\r\n             <MarkerInfo params={markerPanelInfo} />\r\n          )}\r\n          {toggleValue === 'tracking' && (\r\n             <TrackingMap params={markerPanelInfo} />\r\n          )}\r\n        </Drawer>\r\n   );\r\n}\r\n\r\nexport default MarkerPanel;","\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\nimport LinearProgress from '@mui/material/LinearProgress';\r\n\r\nimport ReactMapGL, { \r\n           Source,\r\n           Layer,\r\n           Marker,\r\n           ScaleControl,\r\n           NavigationControl,\r\n           FlyToInterpolator\r\n       } from 'react-map-gl';\r\n\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport mapboxgl from \"mapbox-gl\";\r\n\r\nimport numeral from \"numeral\";\r\n\r\nimport { MAPBOX_ACCESS_TOKEN, DEFAULT_VIEWPORT } from \"../../utils/settings.js\";\r\nimport { dateFormat } from \"../../utils/util.js\";\r\nimport { getClusters } from \"../../services/cluster.js\";\r\nimport { getMarkers } from \"../../services/marker.js\";\r\nimport { getCounts } from \"../../services/counts.js\";\r\n\r\nimport iconMarker from \"../../assets/images/marker-icon.png\";\r\nimport iconSearch from \"../../assets/images/search-marker.png\";\r\n\r\nimport MarkerPanel from \"./MarkerPanel/MarkerPanel.js\";\r\n\r\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\r\n\r\nconst useStyles = makeStyles({\r\n   mapDiv:{\r\n      '& .mapboxgl-ctrl-logo': {\r\n         display: 'none'\r\n       }\r\n   },\r\n   addressLabel:{\r\n      display:'flex',\r\n      alignItems:'center',\r\n      padding:'0 10px',\r\n      width:240,\r\n      height:60,\r\n      color:'#000',\r\n      fontSize:14,\r\n      lineHeight:'14px',\r\n      //borderRadius:4,\r\n      borderLeft:'2px solid #ff0000',\r\n      backgroundColor:'rgba(255,255,255,0.8)',\r\n      pointerEvents:'none'\r\n   }\r\n});\r\n\r\nlet timeout = null;\r\n\r\nfunction Map(props) {\r\n    const classes = useStyles();\r\n    const { \r\n       searchLocation,\r\n       address,\r\n       filter,\r\n       renderMode,\r\n       setCounts\r\n    } = props;\r\n\r\n    const mapRef = useRef(null);\r\n    const [viewport, setViewport] = useState(DEFAULT_VIEWPORT);\r\n    const [interactiveLayerIds, setInteractiveLayerIds] = useState([]);\r\n    const [clusterSource, setClusterSource] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    const [heatmapSource, setHeatmapSource] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    const [showLoading, setShowLoading] = useState(true);\r\n    \r\n    const [markerPanelInfo, setMarkerPanelInfo] = useState(false);\r\n\r\n    const handleClick = async (e) => {\r\n        if(e.features && e.features.length>0){\r\n            const feature = e.features[0];\r\n            if(feature.layer.id === 'cluster-layer'){\r\n                setViewport({\r\n                    ...viewport,\r\n                    longitude: feature.geometry.coordinates[0],\r\n                    latitude: feature.geometry.coordinates[1],\r\n                    zoom: viewport.zoom + 1,\r\n                    transitionDuration: 500\r\n                });\r\n            }else if(feature.layer.id === 'unclustered-point-layer'){\r\n                setMarkerPanelInfo({\r\n                    ...markerPanelInfo,\r\n                    open: true,\r\n                    date: dateFormat(filter.date),\r\n                    id: feature.properties[\"id\"],\r\n                    geometry: feature.geometry\r\n                });\r\n               \r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n\r\n        const map = mapRef.current.getMap();\r\n        \r\n        map.loadImage(iconMarker, (error, image) => {\r\n            if (error) throw error;\r\n            // Add the image to the map style.\r\n            map.addImage('marker-icon', image);\r\n        });\r\n        \r\n        return () => {\r\n            if(map.hasImage('marker-icon')){\r\n                map.removeImage('marker-icon');\r\n            }\r\n        }\r\n\r\n    }, []);\r\n\r\n    useEffect(()=>{\r\n        if(searchLocation){\r\n            setViewport({\r\n               ...viewport,\r\n               latitude: searchLocation.lat,\r\n               longitude: searchLocation.lng,\r\n               zoom: 14,\r\n               //transitionDuration: 4000,\r\n               //transitionInterpolator: new FlyToInterpolator(),\r\n               ////transitionEasing: d3.easeCubic\r\n            });\r\n        }\r\n    }, [searchLocation]);\r\n\r\n    useEffect(()=>{\r\n\r\n       const map = mapRef.current.getMap();\r\n\r\n       map.on('moveend', mapDataCallback);\r\n\r\n       mapDataCallback();\r\n\r\n       return () => map.off('moveend', mapDataCallback);\r\n\r\n    }, [filter, renderMode]);\r\n\r\n    const mapDataCallback = () => {\r\n        const map = mapRef.current.getMap();\r\n        setInteractiveLayerIds([]);\r\n        if(map.getZoom()<12){\r\n            setClusterSource({\r\n                type: 'FeatureCollection',\r\n                features:[]\r\n            });\r\n            setHeatmapSource({\r\n                type: 'FeatureCollection',\r\n                features:[]\r\n            });\r\n            setCounts([]);\r\n            return;\r\n        } \r\n        if(timeout){\r\n            clearTimeout(timeout);\r\n        }\r\n        timeout = setTimeout(async () => {\r\n           setShowLoading(true);\r\n           let poiLocations = [];\r\n           if(filter.category !== 'All Categories'){\r\n                const poiFeatures = map.queryRenderedFeatures({ layers: ['poi-label'] });\r\n                let categoryFeatures = poiFeatures.filter(feature=>feature.properties[\"category_en\"]===filter.category);\r\n                categoryFeatures.forEach(feature=>{\r\n                   poiLocations.push(feature.geometry.coordinates);\r\n                });\r\n                if(poiLocations.length === 0){\r\n                    setClusterSource({\r\n                        type: 'FeatureCollection',\r\n                        features:[]\r\n                    });\r\n                    setCounts([]);\r\n                    setShowLoading(false);\r\n                    return;\r\n                }\r\n           }\r\n           if(renderMode === 'cluster'){\r\n                let newClusterSource = {\r\n                    type: 'FeatureCollection',\r\n                    features:[]\r\n                };\r\n                let res = await getClusters({\r\n                    date: dateFormat(filter.date),\r\n                    timeRange: filter.timeRange,\r\n                    zoom: map.getZoom(),\r\n                    bounds: map.getBounds().toArray().flat(),\r\n                    poiLocations: poiLocations,\r\n                    poiRadius: filter.category_distance\r\n                });\r\n                if(res.status === 'success'){\r\n                    if(res.result && res.result.features){\r\n                        res.result.features.forEach(feature => {\r\n                            var abbr = numeral(feature.properties[\"point_count\"]).format(\"0.[0] a\").toUpperCase();\r\n                            if(feature.properties[\"point_count\"]>=1000){\r\n                            abbr += '+';\r\n                            }\r\n                            feature.properties[\"point_count_abbreviated\"] = abbr;\r\n                        });\r\n                        newClusterSource = res.result;\r\n                    }\r\n                }\r\n                setClusterSource(newClusterSource);\r\n                setInteractiveLayerIds(['cluster-layer','unclustered-point-layer']);\r\n           }else if(renderMode === 'heatmap'){\r\n                let newHeatmapSource = {\r\n                    type: 'FeatureCollection',\r\n                    features:[]\r\n                };\r\n                let res = await getMarkers({\r\n                    date: dateFormat(filter.date),\r\n                    timeRange: filter.timeRange,\r\n                    zoom: map.getZoom(),\r\n                    bounds: map.getBounds().toArray().flat(),\r\n                    poiLocations: poiLocations,\r\n                    poiRadius: filter.category_distance\r\n                });\r\n                if(res.status === 'success'){\r\n                    if(res.result && res.result.features){\r\n                        newHeatmapSource = res.result;\r\n                    }\r\n                }\r\n                setHeatmapSource(newHeatmapSource);\r\n                setInteractiveLayerIds(['unclustered-point-layer']);\r\n           }\r\n           \r\n           setShowLoading(false);\r\n\r\n           let res = await getCounts({\r\n                date: dateFormat(filter.date),\r\n                timeRange: filter.timeRange,\r\n                bounds: map.getBounds().toArray().flat(),\r\n                poiLocations: poiLocations,\r\n                poiRadius: filter.category_distance\r\n           });\r\n           if(res.status === 'success'){\r\n              var newCounts = [];\r\n              newCounts['TOTAL'] = 0;\r\n              res.result.forEach(row=>{\r\n                  newCounts[row.platform] = row.count;\r\n                  newCounts['TOTAL'] += parseInt(row.count);\r\n              });\r\n              setCounts(newCounts);\r\n           }else{\r\n              setCounts([]);\r\n           }\r\n        }, 500);\r\n    }\r\n\r\n    return (\r\n        <ReactMapGL className={classes.mapDiv}\r\n            {...viewport}    \r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            mapStyle=\"mapbox://styles/mapbox/streets-v11\"\r\n            //mapStyle=\"mapbox://styles/mapbox/satellite-streets-v11\"\r\n            mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN}\r\n            ref={mapRef}\r\n            attributionControl={false}\r\n            maxZoom={24}\r\n            minZoom={12}\r\n            onViewportChange={setViewport}\r\n            interactiveLayerIds={interactiveLayerIds}\r\n            onClick={handleClick}\r\n        >\r\n            {renderMode==='cluster' && (\r\n                <Source\r\n                    id=\"clusterSource\"\r\n                    type=\"geojson\"\r\n                    data={clusterSource}\r\n                    //cluster={true}\r\n                    //clusterMaxZoom={14}\r\n                    //clusterRadius={50}\r\n                >\r\n                    <Layer\r\n                        id='cluster-layer'\r\n                        type='circle'\r\n                        source='clusterSource'\r\n                        filter={['>', 'point_count', 1]}\r\n                        paint={{\r\n                          'circle-color': ['step', ['get', 'point_count'], '#51bbd6', 100, '#f1f075', 750, '#f28cb1'],\r\n                          'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40]\r\n                        }}\r\n                    />\r\n                    <Layer \r\n                        id='cluster-count-layer'\r\n                        type='symbol'\r\n                        source='clusterSource'\r\n                        filter={['>', 'point_count', 1]}\r\n                        layout={{\r\n                          'text-field': '{point_count_abbreviated}',\r\n                          'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n                          'text-size': 12\r\n                        }}\r\n                    />\r\n                    <Layer\r\n                        id='unclustered-point-layer'\r\n                        type='symbol'\r\n                        source='clusterSource'\r\n                        filter={['==', 'point_count', 1]}\r\n                        layout={{\r\n                           'icon-image': 'marker-icon',\r\n                           'icon-size': 0.6,\r\n                           'icon-rotate': [\"get\",\"heading\"],\r\n                           'icon-allow-overlap':true,\r\n                           'icon-ignore-placement': true,\r\n                           'icon-rotation-alignment':'map', // viewport\r\n                           'icon-pitch-alignment':'viewport'\r\n                        }}\r\n                    />\r\n                    {markerPanelInfo.open && (\r\n                        <Layer\r\n                            id='select-point-layer'\r\n                            type='circle'\r\n                            source='clusterSource'\r\n                            filter={['==', 'id', markerPanelInfo.id]}\r\n                            paint={{\r\n                              'circle-radius':20,\r\n                              'circle-color': 'transparent',\r\n                              'circle-stroke-color':'#ff844b',\r\n                              'circle-stroke-width':2\r\n                            }}\r\n                        />\r\n                    )}\r\n                </Source>\r\n            )}\r\n            {renderMode==='heatmap' && (\r\n                <Source\r\n                    id=\"heatmapSource\"\r\n                    type=\"geojson\"\r\n                    data={heatmapSource}\r\n                >\r\n                    <Layer \r\n                       id='heatmap-layer'\r\n                       type='heatmap'\r\n                       source='heatmapSource'\r\n                       maxzoom={19}\r\n                       paint={{\r\n                         'heatmap-weight':[\r\n                            'interpolate',['linear'], ['zoom'],\r\n                            12,\r\n                            0.2,\r\n                            19,\r\n                            1\r\n                          ],\r\n                         'heatmap-intensity': [\r\n                            'interpolate',['linear'], ['zoom'],\r\n                            12,\r\n                            5,\r\n                            19,\r\n                            1\r\n                          ],\r\n                          'heatmap-color': [\r\n                            'interpolate',['linear'],['heatmap-density'],\r\n                            0,\r\n                            'rgba(33,102,172,0)',\r\n                            0.2,\r\n                            'rgb(103,169,207)',\r\n                            0.4,\r\n                            'rgb(209,229,240)',\r\n                            0.6,\r\n                            'rgb(166,189,219)',\r\n                            0.8,\r\n                            'rgb(103,169,207)',\r\n                            1,\r\n                            'rgb(28,144,153)'\r\n                          ],\r\n                         'heatmap-radius': [\r\n                            'interpolate',['linear'],['zoom'],\r\n                            12,\r\n                            16,\r\n                            19,\r\n                            40\r\n                         ],\r\n                         'heatmap-opacity': [\r\n                            'interpolate',['linear'],['zoom'],\r\n                            12,\r\n                            0.9,\r\n                            19,\r\n                            0.5\r\n                         ]\r\n                       }}\r\n                    />\r\n                    <Layer\r\n                        id='unclustered-point-layer'\r\n                        type='symbol'\r\n                        source='heatmapSource'\r\n                        minzoom={18}\r\n                        layout={{\r\n                            'icon-image': 'marker-icon',\r\n                            'icon-size': 0.6,\r\n                            'icon-rotate': [\"get\",\"heading\"],\r\n                            'icon-allow-overlap':true,\r\n                            'icon-ignore-placement': true,\r\n                            'icon-rotation-alignment':'map', // viewport\r\n                            'icon-pitch-alignment':'viewport'\r\n                        }}\r\n                    />\r\n                    {markerPanelInfo.open && (\r\n                        <Layer\r\n                            id='select-point-layer'\r\n                            type='circle'\r\n                            source='heatmapSource'\r\n                            filter={['==', 'id', markerPanelInfo.id]}\r\n                            paint={{\r\n                                'circle-radius':20,\r\n                                'circle-color': 'transparent',\r\n                                'circle-stroke-color':'#ff844b',\r\n                                'circle-stroke-width':2\r\n                            }}\r\n                        />\r\n                    )}\r\n                </Source>\r\n            )}\r\n            <NavigationControl style={{ top:10,right:10}}/>\r\n            <ScaleControl style={{bottom:10,left:10}} />\r\n            {(searchLocation && address) && (\r\n                <>\r\n                <Marker longitude={searchLocation.lng} latitude={searchLocation.lat} offsetLeft={-16} offsetTop={-32}>\r\n                    <img src={iconSearch} alt=\"marker\" />\r\n                </Marker>\r\n                <Marker longitude={searchLocation.lng} latitude={searchLocation.lat} offsetLeft={16} offsetTop={-46}>\r\n                    <div className={classes.addressLabel}>{address}</div>\r\n                </Marker>\r\n                </>\r\n            )}\r\n            {markerPanelInfo.open && (\r\n                <MarkerPanel\r\n                    markerPanelInfo={markerPanelInfo}    \r\n                    setMarkerPanelInfo={setMarkerPanelInfo}\r\n                />\r\n            )}\r\n            {showLoading && <LinearProgress />}\r\n        </ReactMapGL>\r\n    );\r\n}\r\n\r\nexport default Map;","export default \"data:image/png;base64,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\"","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\r\n\r\nconst useStyles = makeStyles({\r\n    togglePanel:{\r\n        position:'absolute',\r\n        top:10,\r\n        left:10\r\n    }\r\n });\r\n\r\nfunction RenderMode(props){\r\n   const classes = useStyles();\r\n   const {\r\n      renderMode,\r\n      setRenderMode\r\n   } = props;\r\n\r\n   const handleToggle = (e, newValue) => {\r\n        if(newValue !== null){\r\n           setRenderMode(newValue);\r\n        }\r\n    }\r\n\r\n   return (\r\n    <div className={classes.togglePanel}>\r\n        <ToggleButtonGroup \r\n            value={renderMode} exclusive\r\n            onChange={handleToggle} aria-label=\"chart button group\"\r\n        >\r\n            <ToggleButton value=\"cluster\" aria-label=\"Cluster\">\r\n                Cluster\r\n            </ToggleButton>\r\n            <ToggleButton value=\"heatmap\" aria-label=\"Heatmap\">\r\n                Heatmap\r\n            </ToggleButton>\r\n        </ToggleButtonGroup>\r\n    </div>\r\n   );\r\n}\r\n\r\nexport default RenderMode;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Paper from '@mui/material/Paper';\r\nimport Slider from '@mui/material/Slider';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nimport { dateFormat, secondsFromDate, timeFormat } from \"../../utils/util.js\";\r\n\r\nconst useStyles = makeStyles({\r\n    timeslider:{\r\n        position:'absolute',\r\n        bottom:10,\r\n        left:0,\r\n        right:0,\r\n        '& .MuiPaper-root':{\r\n           width:'50%',\r\n           paddingTop:10,\r\n           paddingBottom:5,\r\n           paddingLeft:40,\r\n           paddingRight:40,\r\n           backgroundColor:'rgba(255,255,255,0.7)',\r\n        },\r\n        '&.MuiSlider-root':{\r\n          //position:'absolute'\r\n          width:'60%'\r\n       }\r\n    }\r\n });\r\n\r\n \r\nfunction TimeSlider(props){\r\n    const classes = useStyles();\r\n    const { \r\n        filter,\r\n        setFilter\r\n    } = props;\r\n    \r\n    const [sliderProps, setSliderProps] = useState({\r\n        min:0,\r\n        max:100,\r\n        step: 1,\r\n        defaultValue:0,\r\n        marks:[]\r\n    });\r\n    const [timeRangeLabel, setTimeRangeLabel] = useState('');\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setFilter({\r\n           ...filter,\r\n           timeRange: newValue\r\n        });\r\n        const t0 = secondsFromDate(dateFormat(filter.date));\r\n        setTimeRangeLabel(`UTC ${timeFormat(newValue[0]-t0)} - ${timeFormat(newValue[1]-t0)} ${dateFormat(filter.date)}`);\r\n    };\r\n\r\n    useEffect(()=>{\r\n        const t0 = secondsFromDate(dateFormat(filter.date));\r\n        setSliderProps({\r\n            min:t0,\r\n            max:t0+86399,\r\n            step:30,\r\n            defaultValue: [t0,t0+86399],\r\n            marks:[\r\n                { value: t0, label: '0'},\r\n                { value: t0+3*3600, label: '3'},\r\n                { value: t0+6*3600, label: '6'},\r\n                { value: t0+9*3600, label: '9'},\r\n                { value: t0+12*3600, label: '12'},\r\n                { value: t0+15*3600, label: '15'},\r\n                { value: t0+18*3600, label: '18'},\r\n                { value: t0+21*3600, label: '21'},\r\n                { value: t0+24*3600, label: '24'}\r\n            ]\r\n        });    \r\n\r\n        setFilter({\r\n            ...filter,\r\n            timeRange: [t0, t0+86399]\r\n        });\r\n        setTimeRangeLabel(`UTC ${timeFormat(0)} - ${timeFormat(86399)} ${dateFormat(filter.date)}`);\r\n\r\n     }, [filter.date]);\r\n\r\n    return (\r\n        <Grid container className={classes.timeslider} justifyContent=\"center\">\r\n            <Paper>\r\n               <Typography variant=\"h6\" align=\"center\">\r\n                  {timeRangeLabel}\r\n               </Typography>\r\n               <Slider\r\n                    getAriaLabel={() => 'Time range'}\r\n                    value={filter.timeRange}\r\n                    onChange={handleChange}\r\n                    //valueLabelDisplay=\"auto\"\r\n                    //color=\"primary\"\r\n                    style={{color:'#ff844b'}}\r\n                    {...sliderProps}\r\n               />\r\n            </Paper>\r\n        </Grid>\r\n    );\r\n}\r\nexport default TimeSlider;","import React, { useState } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\n\r\nimport { DEFAULT_DATE } from \"./../../utils/settings.js\";\r\n\r\nimport Header from \"./Header.js\";\r\nimport SideBar from \"./SideBar.js\";\r\nimport Map from \"./Map.js\";\r\nimport RenderMode from \"./RenderMode.js\";\r\nimport TimeSlider from \"./TimeSlider.js\";\r\nimport { dateFormat, secondsFromDate } from '../../utils/util.js';\r\n\r\nconst useStyles = makeStyles({\r\n   root:{\r\n      display:'flex',\r\n      flexDirection:'column',\r\n      width:'100vw',\r\n      height:'100vh'\r\n   },\r\n   content:{\r\n      flex:1,\r\n      display:'flex',\r\n      flexDirection:'row',\r\n      backgroundColor:'#f1f6fa'\r\n   },\r\n   sidebar:{\r\n     width:500,\r\n     padding:20\r\n   },\r\n   mapContainer:{\r\n      flex:1,\r\n      position:'relative'\r\n   }\r\n});\r\n\r\nfunction Main() {\r\n    const classes = useStyles();\r\n    const [searchLocation, setSearchLocation] = useState(null);\r\n    const [address, setAddress] = useState(null);\r\n    const [filter, setFilter] = useState({\r\n       date: DEFAULT_DATE,\r\n       timeRange: [\r\n         secondsFromDate(dateFormat(DEFAULT_DATE)),\r\n         secondsFromDate(dateFormat(DEFAULT_DATE))+86399\r\n      ],\r\n      category: \"All Categories\",\r\n      category_distance: 20\r\n    });\r\n    const [counts, setCounts] = useState([]);\r\n    const [renderMode, setRenderMode] = useState('cluster');\r\n\r\n    return (\r\n       <div className={classes.root}>\r\n           <Header \r\n              setSearchLocation={setSearchLocation}\r\n              address={address}\r\n              setAddress={setAddress}\r\n              filter={filter}\r\n              setFilter={setFilter}\r\n           />\r\n           <div className={classes.content}>\r\n              <div className={classes.sidebar}>\r\n                 <SideBar counts={counts} />\r\n              </div>\r\n              <div className={classes.mapContainer}>\r\n                 <Map \r\n                    searchLocation={searchLocation}\r\n                    address={address}\r\n                    filter={filter}\r\n                    renderMode={renderMode}\r\n                    setCounts={setCounts}\r\n                 />\r\n                 <RenderMode \r\n                    renderMode={renderMode}\r\n                    setRenderMode={setRenderMode}\r\n                 />\r\n                 <TimeSlider \r\n                    filter={filter}\r\n                    setFilter={setFilter}\r\n                 />\r\n               </div>\r\n           </div>\r\n       </div>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from 'react';\nimport { createTheme, ThemeProvider, responsiveFontSizes } from '@mui/material/styles';\n\nimport Locations_Dashboard from \"./locations-dashboard/Main.js\";\n\nlet theme = createTheme({\n  components:{\n    MuiPaper:{\n      styleOverrides: {\n        root: {\n          padding:10,\n          boxShadow:'0px 24px 48px -4px #06192114'\n        },\n      },\n    },\n    MuiTextField:{\n      styleOverrides: {\n        root: {\n          paddingLeft:10,\n          paddingRight:10,\n          borderRadius:72,\n          backgroundColor:'#f1f6fa',\n          boxSizing:'border-box'\n        },\n      },\n    },\n    MuiOutlinedInput:{\n      styleOverrides: {\n        notchedOutline: {\n          border:0\n        },\n      },\n    },\n    MuiToggleButtonGroup:{\n      styleOverrides: {\n        root: {\n          borderRadius:50,\n          backgroundColor:'#e3ebf1'\n        },\n        grouped:{\n          '&:first-of-type':{\n            marginLeft:0,\n          },\n          '&:last-of-type':{\n            marginRight:0,\n          },\n          '&:not(:first-of-type)':{\n            borderTopLeftRadius:50,\n            borderBottomLeftRadius:50\n          },\n          '&:not(:last-of-type)':{\n            borderTopRightRadius:50,\n            borderBottomRightRadius:50\n          }\n        }\n      },\n    },\n    MuiToggleButton:{\n      styleOverrides: {\n        root: {\n          border:0,\n          borderRadius:50,\n          textTransform: 'none',\n          padding:'10px 20px',\n          marginLeft:10,\n          marginRight:10,\n          '&.Mui-selected':{\n            color:'#fff',\n            backgroundColor:'#ff844b'\n          }\n        }\n      }\n    },\n    MuiInputAdornment:{\n      styleOverrides: {\n        root:{\n          color:'#ff844b'\n        }\n      }\n    },\n    MuiIconButton:{\n      styleOverrides: {\n        root:{\n          color:'#ff844b'\n        }\n      }\n    },  \n  }\n});\n\ntheme = responsiveFontSizes(theme);\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n       <Locations_Dashboard />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}