(this["webpackJsonprocations-dashboard-app"]=this["webpackJsonprocations-dashboard-app"]||[]).push([[0],{214:function(e,t,a){},267:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(63),c=a.n(i),o=(a(214),a(179)),s=a(346),l=a(370),u=a(8),d=a(349),b="https://jp-locations-dashboard.herokuapp.com",j="pk.eyJ1IjoibGVld2FuZ2RldiIsImEiOiJja2tnbDU2c2gwMHNvMndsdDF1d2pxNTQ2In0.zKeo06DtCh6fLifrbCZCFA",p={longitude:135.5259181,latitude:34.6867637,zoom:16},O=window.google,g=new Date("2021-08-26"),x=["All Categories","Bank","Bar","Cafe","Golf","Grocery","Hospital","Park","Restaurant","School","Shop","Stadium","Station","Theatre"],h=[5,10,20,50,100,200,500],m=a(16),f=a(18),v=a.n(f),y=a(22),A=a(354),L=a(156),z=a(361),R=a(360),w=a(350),T=a(348),U=a(274),E=a(347),C=a(355),k=a(162),W=a(160),S=a.n(W),I=a(88),M=a.n(I),B=a(163),P=a.n(B),F=a(164),D=a.n(F),N=a.p+"static/media/logo.3f900ba7.png",J=function(e){var t=e.getDate(),a=e.getMonth()+1;return(a<=9?"0"+a:a)+"/"+(t<=9?"0"+t:t)+"/"+e.getFullYear()},X=function(e){var t=parseInt(e,10),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),r=t-3600*a-60*n;return a<10&&(a="0"+a),n<10&&(n="0"+n),r<10&&(r="0"+r),a+":"+n+":"+r},H=function(e){var t=e.split("/");return Date.UTC(t[2],parseInt(t[0])-1,t[1])/1e3},Q=a(53),V=a.n(Q),Z=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat(b,"/api/days"),e.next=4,V.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=a(1),K=Object(d.a)({header:{width:"100%",padding:10,backgroundColor:"white"},logo:{height:75}}),q=null;var G=function(e){var t=K(),a=e.searchPlace,r=e.setSearchPlace,i=e.filter,c=e.setFilter,o=Object(n.useState)(!1),s=Object(u.a)(o,2),l=s[0],d=s[1],b=Object(n.useState)([]),j=Object(u.a)(b,2),p=j[0],g=j[1],f=function(e){d(!0),g([]),W(e)},W=function(e){q&&clearTimeout(q),q=setTimeout(Object(y.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z({date:J(e)});case 2:a=t.sent,d(!1),"success"===a.status&&g(a.result);case 5:case"end":return t.stop()}}),t)}))),500)};return Object(n.useEffect)((function(){var e=document.getElementById("input-address"),t=new O.maps.places.Autocomplete(e,{componentRestrictions:{country:"jp"}}),a=O.maps.event.addListener(t,"place_changed",(function(){var e=t.getPlace();if(e&&e.geometry&&e.formatted_address){var a,n,i=e.url;e.photos&&(i=e.photos[0].getUrl({maxWidth:128})),r({place_id:e.place_id,location:[e.geometry.location.lng(),e.geometry.location.lat()],viewport:[e.geometry.viewport.getSouthWest().lng(),e.geometry.viewport.getSouthWest().lat(),e.geometry.viewport.getNorthEast().lng(),e.geometry.viewport.getNorthEast().lat()],name:e.name,address:e.formatted_address,type:e.types?e.types[0]:"",rating:null!==(a=e.rating)&&void 0!==a?a:0,user_ratings_total:null!==(n=e.user_ratings_total)&&void 0!==n?n:0,url:e.url,imageLink:i,image:""})}}));return W(i.date),function(){O.maps.event.removeListener(a)}}),[]),Object(n.useEffect)((function(){document.getElementById("input-address").value=a?a.address:""}),[a]),Object(Y.jsxs)(A.a,{container:!0,className:t.header,spacing:1,alignItems:"center",children:[Object(Y.jsx)(A.a,{container:!0,item:!0,lg:3,md:12,justifyContent:"center",children:Object(Y.jsx)("img",{src:N,className:t.logo,alt:"logo"})}),Object(Y.jsxs)(A.a,{container:!0,item:!0,spacing:2,lg:9,md:12,children:[Object(Y.jsx)(A.a,{item:!0,md:4,children:Object(Y.jsx)(L.a,{id:"input-address",name:"address",placeholder:"Enter your address.",fullWidth:!0,InputProps:{startAdornment:Object(Y.jsx)(R.a,{position:"start",children:Object(Y.jsx)(S.a,{})}),endAdornment:Object(Y.jsx)(R.a,{position:"end",children:Object(Y.jsx)(z.a,{"aria-label":"toggle password visibility",onClick:function(){return r(null)},onMouseDown:function(e){return e.preventDefault()},edge:"end",children:a&&a.address&&Object(Y.jsx)(M.a,{})})})},autoComplete:"off"})}),Object(Y.jsx)(A.a,{item:!0,md:3,children:Object(Y.jsx)(U.b,{dateAdapter:T.a,children:Object(Y.jsx)(E.a,{value:i.date,loading:l,renderLoading:function(){return Object(Y.jsx)(C.a,{})},renderInput:function(e){return Object(Y.jsx)(L.a,Object(m.a)(Object(m.a)({},e),{},{fullWidth:!0}))},renderDay:function(e,t,a){var n=!a.outsideCurrentMonth&&p.indexOf(e.getDate())>-1;return Object(Y.jsx)(k.a,Object(m.a)(Object(m.a)({},a),{},{style:{border:n?"1px solid #ff844b":0}}),e.toString())},onMonthChange:f,onYearChange:f,onChange:function(e){null!==e&&c(Object(m.a)(Object(m.a)({},i),{},{date:e}))}})})}),Object(Y.jsx)(A.a,{item:!0,md:3,children:Object(Y.jsx)(L.a,{variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},select:!0,SelectProps:{MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},getContentAnchorEl:null}},InputProps:{startAdornment:Object(Y.jsx)(R.a,{position:"start",children:Object(Y.jsx)(P.a,{})})},value:i.category,onChange:function(e){return c(Object(m.a)(Object(m.a)({},i),{},{category:e.target.value}))},children:x.map((function(e,t){return Object(Y.jsx)(w.a,{value:e,children:e},"category-".concat(t))}))})}),Object(Y.jsx)(A.a,{item:!0,md:2,children:Object(Y.jsx)(L.a,{variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},select:!0,SelectProps:{MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},getContentAnchorEl:null}},InputProps:{startAdornment:Object(Y.jsx)(R.a,{position:"start",children:Object(Y.jsx)(D.a,{})})},value:i.category_distance,onChange:function(e){return c(Object(m.a)(Object(m.a)({},i),{},{category_distance:e.target.value}))},disabled:"All Categories"===i.category,children:h.map((function(e,t){return Object(Y.jsx)(w.a,{value:e,children:"".concat(e," m")},"d-".concat(t))}))})})]})]})},_=a(19),$=a(364),ee=a(114),te=a(366),ae=a(359),ne=a(351),re=a(365),ie=a(343),ce=a(344),oe=a(356),se=a(352),le=a(342),ue=a(367),de=a(362),be=a(363),je=a(168),pe=a.n(je),Oe=a(167),ge=a.n(Oe),xe=a(169),he=a.n(xe),me=a(166),fe=a.n(me),ve=a(66),ye=a.n(ve),Ae=a(128),Le=function(){var e=Object(y.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,a="".concat(b,"/api/places"),e.next=4,V.a.get(a).then((function(e){t=e.data})).catch((function(e){t={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat(b,"/api/place/add"),e.next=4,V.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat(b,"/api/place/delete"),e.next=4,V.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=Object(d.a)({sideBarHeader:{padding:16,backgroundColor:"#f1f6fa"},sideBarContent:{flex:1,height:0,overflowY:"auto"},label:{display:"block",paddingTop:16,paddingLeft:24,paddingBottom:4},listItem:{"&.MuiListItem-root":{borderBottom:"1px solid #eee"},"& .MuiListItemButton-root":{borderRadius:0},"& .MuiAvatar-root":{width:90,height:90,borderRadius:4}}});var Te=function(e){var t=we(),a=e.searchPlace,r=e.setSearchPlace,i=Object(n.useState)(!1),c=Object(u.a)(i,2),o=c[0],s=c[1],l=Object(n.useState)([]),d=Object(u.a)(l,2),b=d[0],j=d[1],p=Object(n.useState)(!1),O=Object(u.a)(p,2),g=O[0],x=O[1],h=Object(n.useState)(!1),f=Object(u.a)(h,2),L=f[0],R=f[1],w=Object(n.useState)(!0),T=Object(u.a)(w,2),U=T[0],E=T[1],C=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),e.next=3,ze(a);case 3:"success"===(t=e.sent).status?(j([].concat(Object(_.a)(b),[a])),E(!0)):console.log(t.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){return function(t){R(!0),r(e)}},W=function(){var e=Object(y.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!1),!a){e.next=6;break}return e.next=4,Re({place_id:a.place_id});case 4:"success"===(t=e.sent).status?(n=b.filter((function(e){return e.place_id!==a.place_id})),j(n),r(null)):console.log(t.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){a?b.filter((function(e){return e.place_id===a.place_id})).length>0?E(!0):E(!1):E(!0)}),[a]),Object(n.useEffect)((function(){S()}),[]);var S=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:t=e.sent,s(!0),"success"===t.status?j(t.result):console.log(t.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:t.sideBarHeader,children:Object(Y.jsxs)(A.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(Y.jsx)(fe.a,{color:"warning",style:{marginRight:10}}),Object(Y.jsx)(ee.a,{variant:"h6",style:{marginRight:10},children:"Favorite Places"}),b.length>0&&Object(Y.jsx)(ee.a,{variant:"caption",style:{marginRight:10},children:"[ ".concat(b.length," ]")}),Object(Y.jsx)($.a,{color:"warning",startIcon:Object(Y.jsx)(ge.a,{}),disabled:U,onClick:function(){return x(!0)},children:"Add Place"})]})}),Object(Y.jsx)("div",{className:t.sideBarContent,children:o?b.length>0?Object(Y.jsx)(ae.a,{dense:!0,children:b.map((function(e,n){return Object(Y.jsx)(ne.a,{className:t.listItem,disablePadding:!0,secondaryAction:Object(Y.jsx)(z.a,{edge:"end","aria-label":"delete",onClick:k(e),children:Object(Y.jsx)(pe.a,{})}),children:Object(Y.jsxs)(ie.a,{selected:!!a&&a.place_id===e.place_id,onClick:function(){return r(e)},children:[Object(Y.jsx)(ce.a,{primary:Object(Y.jsx)(ee.a,{variant:"subtitle2",style:{marginBottom:4},children:e.name}),secondary:Object(Y.jsxs)(Y.Fragment,{children:[e.user_ratings_total>0&&Object(Y.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(Y.jsx)(ee.a,{variant:"caption",children:e.rating}),Object(Y.jsx)(se.a,{name:"rating",size:"small",defaultValue:0,precision:.1,readOnly:!0,value:e.rating,style:{marginLeft:5,marginRight:5}}),Object(Y.jsx)(ee.a,{variant:"caption",children:"(".concat(ye()(e.user_ratings_total).format("0,0"),")")})]}),Object(Y.jsx)(ee.a,{variant:"caption",style:{display:"block"},children:e.type}),Object(Y.jsx)(ee.a,{variant:"caption",children:e.address})]})}),Object(Y.jsx)(re.a,{children:Object(Y.jsx)(oe.a,{alt:"image",src:e.image})})]})},e.place_id)}))}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(ee.a,{variant:"body1",component:"div",align:"center",style:{marginTop:30,padding:10},children:"Places is empty."}),Object(Y.jsx)(ee.a,{variant:"body1",component:"div",align:"center",style:{padding:10},children:"Please add your favorite places."})]}):Object(Y.jsx)(A.a,{container:!0,justifyContent:"center",style:{marginTop:20},children:Object(Y.jsx)(te.a,{})})}),Object(Y.jsxs)(le.a,{open:g,onClose:function(){return x(!1)},"aria-labelledby":"dialog-add-place","aria-describedby":"dialog-add-place",children:[Object(Y.jsxs)(ue.a,{children:["Add Place",Object(Y.jsx)(z.a,{"aria-label":"close",onClick:function(){return x(!1)},sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(Y.jsx)(M.a,{})})]}),Object(Y.jsxs)(Ae.ValidatorForm,{onSubmit:C,style:{width:"100%"},children:[Object(Y.jsxs)(de.a,{children:[Object(Y.jsxs)(ne.a,{className:t.listItem,disablePadding:!0,style:{paddingBottom:10},children:[Object(Y.jsx)(ce.a,{primary:Object(Y.jsx)(ee.a,{variant:"subtitle2",style:{marginBottom:4},children:a?a.name:""}),secondary:Object(Y.jsxs)(Y.Fragment,{children:[a&&a.user_ratings_total>0&&Object(Y.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(Y.jsx)(ee.a,{variant:"caption",children:a?a.rating:""}),Object(Y.jsx)(se.a,{name:"rating",size:"small",defaultValue:0,precision:.1,readOnly:!0,value:a?a.rating:0,style:{marginLeft:5,marginRight:5}}),Object(Y.jsx)(ee.a,{variant:"caption",children:a?"(".concat(ye()(a.user_ratings_total).format("0,0"),")"):""})]}),Object(Y.jsx)(ee.a,{variant:"caption",style:{display:"block"},children:a?a.type:""}),Object(Y.jsx)(ee.a,{variant:"caption",children:a?a.address:""})]})}),Object(Y.jsx)(re.a,{children:Object(Y.jsx)(oe.a,{alt:"image",src:a?a.imageLink:""})})]}),Object(Y.jsx)($.a,{color:"warning",startIcon:Object(Y.jsx)(he.a,{}),style:{padding:"5px 10px",marginTop:10,marginBottom:10},onClick:function(){return window.open(a.imageLink,"_blank")},children:"Open Image Link"}),Object(Y.jsx)(Ae.TextValidator,{name:"postcode",placeholder:"google place image url",fullWidth:!0,value:a?a.image:"",onChange:function(e){r(Object(m.a)(Object(m.a)({},a),{},{image:e.target.value}))},validators:["required"],errorMessages:["Image URL is required."]})]}),Object(Y.jsx)(be.a,{children:Object(Y.jsxs)(A.a,{container:!0,spacing:3,children:[Object(Y.jsx)(A.a,{item:!0,xs:12,sm:6,children:Object(Y.jsx)($.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return x(!1)},children:"Cancel"})}),Object(Y.jsx)(A.a,{item:!0,xs:12,sm:6,children:Object(Y.jsx)($.a,{type:"submit",variant:"contained",color:"warning",autoFocus:!0,fullWidth:!0,children:"Add"})})]})})]})]}),Object(Y.jsxs)(le.a,{open:L,onClose:function(){return R(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(Y.jsxs)(ue.a,{children:["Delete Place",Object(Y.jsx)(z.a,{"aria-label":"close",onClick:function(){return R(!1)},sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(Y.jsx)(M.a,{})})]}),Object(Y.jsx)(de.a,{children:Object(Y.jsx)(ee.a,{variant:"subtitle1",align:"center",style:{marginTop:20},children:"Are you sure you want to delete selected place?"})}),Object(Y.jsx)(be.a,{children:Object(Y.jsxs)(A.a,{container:!0,spacing:3,children:[Object(Y.jsx)(A.a,{item:!0,xs:12,sm:6,children:Object(Y.jsx)($.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return R(!1)},children:"Cancel"})}),Object(Y.jsx)(A.a,{item:!0,xs:12,sm:6,children:Object(Y.jsx)($.a,{variant:"contained",color:"warning",autoFocus:!0,fullWidth:!0,onClick:W,children:"Yes"})})]})})]})]})},Ue=a(369),Ee=a(20),Ce=(a(154),a(74)),ke=a.n(Ce),We=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat(b,"/api/markers"),e.next=4,V.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat(b,"/api/marker/info"),e.next=4,V.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat(b,"/api/marker/tracking"),e.next=4,V.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=a(358),Be=a(368),Pe=a(357),Fe=a(174),De=a.n(Fe),Ne=a(185),Je=a(76),Xe=a.n(Je),He=a(172),Qe=a.n(He),Ve=a(173),Ze=a.n(Ve),Ye=Object(d.a)({paper:{marginBottom:20,"&.MuiPaper-root":{padding:"30px 30px 20px 30px"}},paperHeader:{paddingBottom:10,marginBottom:20,borderBottom:"1px solid #e3ebf1"}});var Ke=function(e){var t=e.params,a=Ye(),r=Object(n.useState)(null),i=Object(u.a)(r,2),c=i[0],o=i[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var e=Object(y.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se({date:t.date,id:t.id});case 2:"success"===(a=e.sent).status?o(a.result):o(null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Y.jsx)(Y.Fragment,{children:c?Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsxs)(Ne.a,{className:a.paper,children:[Object(Y.jsxs)(A.a,{container:!0,className:a.paperHeader,alignItems:"center",children:[Object(Y.jsx)(Qe.a,{color:"warning",style:{marginRight:10}}),Object(Y.jsx)(ee.a,{variant:"h6",children:"Device Identification"})]}),Object(Y.jsxs)(A.a,{container:!0,spacing:1,alignItems:"center",children:[Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Device ID"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:c.device_id})}),Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Country"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:"Japan"})}),Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Device Type"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:c.id_type.toUpperCase()})}),Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Device OS"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:"aaid"===c.id_type?"Android":"iOS"})})]})]}),Object(Y.jsxs)(Ne.a,{className:a.paper,children:[Object(Y.jsxs)(A.a,{container:!0,className:a.paperHeader,alignItems:"center",children:[Object(Y.jsx)(Xe.a,{color:"warning",style:{marginRight:10}}),Object(Y.jsx)(ee.a,{variant:"h6",children:"Device Location"})]}),Object(Y.jsxs)(A.a,{container:!0,spacing:1,alignItems:"center",children:[Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Timestamp"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:"UTC ".concat(X(c.timestamp/1e3-H(t.date))," ").concat(t.date)})}),Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Longitude"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:c.longitude})}),Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Latitude"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:c.latitude})}),Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Horizontal Accuracy"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:"".concat(c.horizontal_accuracy," m")})})]})]}),Object(Y.jsxs)(Ne.a,{className:a.paper,children:[Object(Y.jsxs)(A.a,{container:!0,className:a.paperHeader,alignItems:"center",children:[Object(Y.jsx)(Ze.a,{color:"warning",style:{marginRight:10}}),Object(Y.jsx)(ee.a,{variant:"h6",children:"Others"})]}),Object(Y.jsx)(A.a,{container:!0,justifyContent:"center",children:Object(Y.jsx)(ee.a,{variant:"caption",children:"There is no any other information."})})]})]}):Object(Y.jsx)(A.a,{container:!0,justifyContent:"center",children:Object(Y.jsx)(te.a,{})})})},qe=a(353),Ge=a(93);var _e=function(e){var t=e.params,a=e.info;return Object(Y.jsxs)(A.a,{container:!0,alignItems:"center",style:{maxWidth:350,padding:10},children:[Object(Y.jsxs)(A.a,{item:!0,xs:12,container:!0,style:{paddingBottom:10,marginBottom:10,borderBottom:"1px solid #e3ebf1"},children:[Object(Y.jsx)(Xe.a,{color:"warning",style:{marginRight:10}}),Object(Y.jsx)(ee.a,{variant:"h6",children:"Device Location/Time"})]}),Object(Y.jsx)(A.a,{item:!0,xs:4,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Time"})}),Object(Y.jsx)(A.a,{item:!0,xs:8,children:Object(Y.jsx)(ee.a,{variant:"caption",children:"UTC ".concat(X(parseInt(a.timestamp/1e3)-H(t.date))," ").concat(t.date)})}),Object(Y.jsx)(A.a,{item:!0,xs:6,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Longitude"})}),Object(Y.jsx)(A.a,{item:!0,xs:6,children:Object(Y.jsx)(ee.a,{variant:"caption",children:a.longitude})}),Object(Y.jsx)(A.a,{item:!0,xs:6,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Latitude"})}),Object(Y.jsx)(A.a,{item:!0,xs:6,children:Object(Y.jsx)(ee.a,{variant:"caption",children:a.latitude})}),Object(Y.jsx)(A.a,{item:!0,xs:6,children:Object(Y.jsx)(ee.a,{variant:"subtitle2",children:"Horizontal Accuracy"})}),Object(Y.jsx)(A.a,{item:!0,xs:6,children:Object(Y.jsx)(ee.a,{variant:"caption",children:"".concat(a.horizontal_accuracy," m")})})]})};ke.a.workerClass=a(155).default;var $e=Object(d.a)({mapContainer:{flex:1,position:"relative"},mapDiv:{border:"1px solid #e3ebf1","& .mapboxgl-ctrl-logo":{display:"none"}},timeslider:{position:"absolute",bottom:10,left:0,right:0,"& .MuiPaper-root":{width:"70%",paddingTop:10,paddingBottom:5,paddingLeft:40,paddingRight:40,backgroundColor:"rgba(255,255,255,0.7)"},"&.MuiSlider-root":{width:"60%"}}});var et=function(e){var t=$e(),a=e.params,r=Object(n.useRef)(null),i=Object(n.useState)({longitude:a.geometry.coordinates[0],latitude:a.geometry.coordinates[1],zoom:15}),c=Object(u.a)(i,2),o=c[0],s=c[1],l=Object(n.useState)(null),d=Object(u.a)(l,2),b=d[0],p=d[1],O=Object(n.useState)({min:0,max:100,step:1,defaultValue:0,marks:[]}),g=Object(u.a)(O,2),x=g[0],h=g[1],f=Object(n.useState)(0),L=Object(u.a)(f,2),z=L[0],R=L[1],w=Object(n.useState)(""),T=Object(u.a)(w,2),U=T[0],E=T[1],C=Object(n.useState)({type:"FeatureCollection",features:[]}),k=Object(u.a)(C,2),W=k[0],S=k[1],I=Object(n.useState)([]),M=Object(u.a)(I,2),B=M[0],P=M[1],F=Object(n.useState)({type:"FeatureCollection",features:[]}),D=Object(u.a)(F,2),N=D[0],J=D[1],Q=Object(n.useState)({type:"FeatureCollection",features:[]}),V=Object(u.a)(Q,2),Z=V[0],K=V[1],q=Object(n.useState)(null),G=Object(u.a)(q,2),_=G[0],$=G[1],te=Object(n.useCallback)((function(e){var t=null;if(e.features&&e.features.length>0){var a=e.features[0];"points-layer"===a.layer.id&&(t={longitude:e.lngLat[0],latitude:e.lngLat[1],data:a.properties})}$(t)}),[]),ae=function(){var e=Object(y.a)(v.a.mark((function e(){var t,n,i,c,l,u,d,b,j,O,g,x,h,f,y,A,L,z,w,T,U,C,k,W;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie({date:a.date,id:a.id});case 2:if("success"===(t=e.sent).status){for(n=t.result,i=Ge.bbox(n),c=r.current.getMap(),l=new Ee.h(Object(m.a)(Object(m.a)({},o),{},{width:c.getCanvas().width,height:c.getCanvas().height})).fitBounds([[i[0],i[1]],[i[2],i[3]]],{padding:40}),u=l.longitude,d=l.latitude,b=l.zoom,s(Object(m.a)(Object(m.a)({},o),{},{longitude:u,latitude:d,zoom:b>20?20:b-1})),S(n),p(["points-layer"]),j=n.features,O=0,j.forEach((function(e){if(e.properties.id===a.id)return J({type:"FeatureCollection",features:[e]}),O=parseInt(e.properties.timestamp/1e3),R(O),void E("UTC ".concat(X(O-H(a.date))," ").concat(a.date))})),g=[],x=0;x<j.length-1;x++)if(h=parseInt(j[x].properties.timestamp/1e3),f=parseInt(j[x+1].properties.timestamp/1e3),y=(f-h)/30,A=Ge.bearing(j[x],j[x+1]),y>1)for(L=0;h<f;)z=j[x].geometry.coordinates[0],w=j[x].geometry.coordinates[1],T=j[x+1].geometry.coordinates[0],U=j[x+1].geometry.coordinates[1],C=z+(T-z)*L/y,k=w+(U-w)*L/y,g.push({latitude:k,longitude:C,time:h,heading:Ge.bearingToAzimuth(A)}),h+=30,L++;else g.push({longitude:parseFloat(j[x].geometry.coordinates[0]),latitude:parseFloat(j[x].geometry.coordinates[1]),time:h,heading:Ge.bearingToAzimuth(A)});P(g),W={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{}}]},g.forEach((function(e){e.time<=O&&W.features[0].geometry.coordinates.push([e.longitude,e.latitude])})),K(W)}case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=r.current.getMap();e.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAyCAMAAAAKuilWAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAj1QTFRFAAAAUbvW/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWtXpTgAAAAL90Uk5TAAAJgbcodv/CBxrn/muw8hhClgXS/VYBiNEOIOxmBLv5LlerCNxRnOAUNPeJAMz7N2y+F+93r+k/+I0SyplgMRMDAg0lT4DL9VT81XMhCRIUDgIRTrPPBgr0hAsaYrfd5+njzYI0AUR49tc1Oa/6/9RnBRBIgwqF/cokk9NJEL/+60MIvO48A60dTZwGuvA+WaTx4DYNaIspkx/70iiW6jfvjablLS/2fHDFC4zWfcZQ2/WKYdn87ZQbbJGomkgzCm4xAAAB9ElEQVR4nGNgIBkw4pVlYmZhxaubjZ2dgxOPAi5udnYeXjwK+NiBgF8Ap7wgOxgICeOQFxCBKBAVwy4vLsEOBZJSWBVIy8AU8Mhik5eTZ4cDBUUsCpR4EArYlcUx5FVUkeTZRdUwXKjOjgI0NNEUaGmjKmDX0UV1oR6aPLu+AYoCQ3R5dnYjZHcam2AqYDdFyAubYZFnN5eGK7CwxKaA3QrmTmsbMJ/b1s7ewdHJ2cXVzV0UJODhCZFndPMCBr+3j68TA6Off0BgEINucEgoyNCwcLCCiEhg4EdFMzDExMbFJyQmJaekpjE4pWsAVWSAFQRnsmdlMzDk5Oblw0BBYRFDsboou4gjWEVJqSZDWXlFPjKorGJwrK6phfujrr4hHxU0NjHoOsHlm1vyMUBrGyKg2jsw5fPzEzvhCrrysCnI726Hyvf0YpXP7+uHKpiA3YD8/Fyogok45PMnNUMUTMalIH8KWH4qehAgwDSwgiqc8vnTwQpm4FYwE6xgFm4F5ZBgmI1TwQSIL+bgVDAXomAeLvn50LBesBCHgkWwyFyMXX7JUlhsLluOVcEKeHQzrsQWmKtWI1IMwxpM+bUBSPIMResq0OTXdzKggLQNG5GlN22eyoAOerZs3QaV3r5jJ4Y0ON5Td+2euGfvin0xaVjlsQMAFN44ROMgIzgAAAAASUVORK5CYII=",(function(t,a){if(t)throw t;e.addImage("marker-icon",a)}));var t=H(a.date);h({min:t,max:t+86399,defaultValue:t+86399,step:30,marks:[{value:t,label:"0"},{value:t+10800,label:"3"},{value:t+21600,label:"6"},{value:t+32400,label:"9"},{value:t+43200,label:"12"},{value:t+54e3,label:"15"},{value:t+64800,label:"18"},{value:t+75600,label:"21"},{value:t+86400,label:"24"}]}),R(t),E("UTC ".concat(X(0)," ").concat(a.date)),ae()}),[]),Object(Y.jsxs)("div",{className:t.mapContainer,children:[Object(Y.jsxs)(Ee.i,Object(m.a)(Object(m.a)({className:t.mapDiv},o),{},{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/light-v10",mapboxApiAccessToken:j,attributionControl:!1,maxZoom:20,ref:r,interactiveLayerIds:b,onViewportChange:s,onHover:te,children:[Object(Y.jsx)(Ee.g,{id:"trackLine",type:"geojson",data:Z,children:Object(Y.jsx)(Ee.b,{id:"trackLine",type:"line",filter:["==","$type","LineString"],paint:{"line-color":"cyan","line-opacity":.75,"line-width":4}})}),Object(Y.jsx)(Ee.g,{id:"points",type:"geojson",data:W,children:Object(Y.jsx)(Ee.b,{id:"points-layer",type:"circle",source:"points",paint:{"circle-color":"#1976d2","circle-radius":6}})}),Object(Y.jsx)(Ee.g,{id:"trackPoint",type:"geojson",data:N,children:Object(Y.jsx)(Ee.b,{id:"track-point-layer",type:"symbol",source:"trackPoint",layout:{"icon-image":"marker-icon","icon-size":.6,"icon-rotate":["get","heading"],"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-rotation-alignment":"map","icon-pitch-alignment":"viewport"}})}),_&&Object(Y.jsx)(Ee.e,{longitude:_.longitude,latitude:_.latitude,closeButton:!1,children:Object(Y.jsx)(_e,{info:_.data,params:a})})]})),Object(Y.jsx)(A.a,{container:!0,className:t.timeslider,justifyContent:"center",children:Object(Y.jsxs)(Ne.a,{children:[Object(Y.jsx)(ee.a,{variant:"h6",align:"center",children:U}),Object(Y.jsx)(qe.a,Object(m.a)({"aria-label":"track time",value:z,onChange:function(e,t){R(t),E("UTC ".concat(X(t-H(a.date))," ").concat(a.date));var n={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{}}]},r=null;if(B.forEach((function(e){e.time<=t&&(n.features[0].geometry.coordinates.push([e.longitude,e.latitude]),r=e)})),K(n),r){var i={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[r.longitude,r.latitude]},properties:{heading:r.heading}}]};J(i)}},style:{color:"#ff844b"}},x))]})})]})},tt=Object(d.a)({drawer:{"& .MuiBackdrop-root":{},"&>.MuiPaper-root":{display:"flex",flexDirection:"column",width:"50%",minWidth:400,padding:"20px 40px",backgroundColor:"#f1f6fa",boxSizing:"border-box",overflowX:"hidden",overflowY:"auto"}},drawerHeader:{display:"flex",flexDirection:"row",paddingTop:20,paddingBottom:16,marginBottom:20,borderBottom:"1px solid #e3ebf1"}});var at=function(e){var t,a=tt(),r=e.markerPanelInfo,i=e.setMarkerPanelInfo,c=Object(n.useState)("properties"),o=Object(u.a)(c,2),s=o[0],l=o[1];return Object(Y.jsxs)(Me.a,{className:a.drawer,anchor:"left",open:!0,onClose:(t=!1,function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&i(Object(m.a)(Object(m.a)({},r),{},{open:t}))}),children:[Object(Y.jsxs)(A.a,{container:!0,spacing:1,className:a.drawerHeader,alignItems:"center",children:[Object(Y.jsxs)(A.a,{item:!0,md:6,xs:12,container:!0,children:[Object(Y.jsx)(De.a,{color:"warning",style:{marginRight:10}}),Object(Y.jsx)(ee.a,{variant:"h6",style:{flex:1},children:"Device Information"})]}),Object(Y.jsx)(A.a,{item:!0,md:6,xs:12,container:!0,justifyContent:"flex-end",children:Object(Y.jsxs)(Pe.a,{value:s,exclusive:!0,onChange:function(e,t){null!==t&&l(t)},"aria-label":"marker button group",children:[Object(Y.jsx)(Be.a,{value:"properties","aria-label":"Properties",children:"Properties"}),Object(Y.jsx)(Be.a,{value:"tracking","aria-label":"Tracking",children:"Tracking"})]})})]}),"properties"===s&&Object(Y.jsx)(Ke,{params:r}),"tracking"===s&&Object(Y.jsx)(et,{params:r})]})};ke.a.workerClass=a(155).default;var nt=Object(d.a)({mapDiv:{"& .mapboxgl-ctrl-logo":{display:"none"}},addressLabel:{display:"flex",alignItems:"center",padding:"0 10px",width:240,height:60,color:"#000",fontSize:14,lineHeight:"14px",borderLeft:"2px solid #ff0000",backgroundColor:"rgba(255,255,255,0.8)",pointerEvents:"none"}}),rt=null;var it=function(e){var t=nt(),a=e.searchPlace,r=e.filter,i=e.renderMode,c=e.setCounts,o=Object(n.useRef)(null),s=Object(n.useState)(p),l=Object(u.a)(s,2),d=l[0],b=l[1],O=Object(n.useState)([]),g=Object(u.a)(O,2),x=g[0],h=g[1],f=Object(n.useState)({type:"FeatureCollection",features:[]}),A=Object(u.a)(f,2),L=A[0],z=A[1],R=Object(n.useState)(!0),w=Object(u.a)(R,2),T=w[0],U=w[1],E=Object(n.useState)(!1),C=Object(u.a)(E,2),k=C[0],W=C[1],S=function(){var e=Object(y.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.features&&t.features.length>0&&("cluster-layer"===(a=t.features[0]).layer.id?b(Object(m.a)(Object(m.a)({},d),{},{longitude:a.geometry.coordinates[0],latitude:a.geometry.coordinates[1],zoom:d.zoom+1,transitionDuration:500})):"unclustered-point-layer"===a.layer.id&&W(Object(m.a)(Object(m.a)({},k),{},{open:!0,date:J(r.date),id:a.properties.id,geometry:a.geometry})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=o.current.getMap();return e.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAArJQTFRFO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzRaC3ptLd4/H0/P7++fz93+/znc3ZQZ62O5uzO5uzO5uzXKzA6PT2/v///////f//4O/zUaa7O5uzO5uzRKC33u7yQZ61O5uzpdHch8HQO5uzO5uz4vD0rtXgR6G3S6O5wuDn0+juO5uzO5uz+/3+TaS69vv8O5uzO5uz+Pz8U6e99fr7O5uzO5uz3e7ywuDo0+nuyuTrO5uzO5uzmszYfLzNO5uzO5uzzOXrP520O5uzO5uzSqO5rdXf8/n78fj6otDcO5uzO5uzrdbg8Pj6o9DcO5uzO5uzi8TS7/j5d7nKO5uz8/n67PX3hsHQj8bU8vj66vX3O5uz7/f56/X3h8LQQp+2kMfU5vP2d7rK7fb47PX4Z7LEO5uzO5uzaLLFWqu/O5uzRqG35/P2Q5+2O5uzxeLpstjhO5uzO5uzl8rXgL7OO5uzO5uzabLF+vz9z+ft9fv8O5uzO5uzR6G46fT3Uaa8W6zAO5uzx+Ppc7jJiMLRs9jhmMvXo9Dbu9zlf77OO5uzO5uz8vn60ejtQJ616/X47vb55fL2O5uzd7rLaLLE5vL2O5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uz3dPDsgAAAOZ0Uk5TAAIBAwQ6gbLQ5/b99eXOrn0zRazs/6Q8a9nRXFDcPxD+nw3kKVvxRGf7+U5DO/IqEdgMsZNU//////////85Bd7/////////zHD///9M///JSv///////zKv////h+/////mPv////8rhv//WrX//47T//////++6////+H6////+P///////wb/////////////6tL//7v///+K//9WN///J+n/////3af/////fP//////////vF7///////9A////oH7HCh7XxguQuknEuS4oZUizOPwlqYQXD3/LB1H3G5hz3y+uZs2QAAADlElEQVR4nJ2X+UOMQRzG3313S22SMJJIkqJSCbkr2k0UQrkKXch9lXJfIVSOEDly37lvObvc5L5v/4d5q9XOfL/ztswPs+++z/P5vjPPvu87s5KkkSUt0umsrBvY2Ort7BraN3Jo7KgT+QTnmzRtRphm29wJ5bUSckrXwpkgraWLDjFL8FSr1hheXcIVDgLwbRzcRDwhbm3d6wvBqp0YV5qzhzrfXq/OE+LppRZih4718YR4+4hDdLGApxV8RSF2qnf8Nc3PHw8hwN4ynpDOgWiIXSzlCemKhdgN/v5B3Xv07NW7T18guAXDEENCga1f/zCD0WAMCx8ApAgNCHEgMA2q5Q3GyCggDuZD0MAHYIiJNxiHAjFay4U4DFjIcIqOiIkdSYuMgupoLsQx0DKWXjqGkDg6iHiojmNDDBkPLRPopWMJSaCTSIRqkoYJMRk6SAq99MS4hEl0JpMROZUJYQrimFoX4jREns6EOANxREWa+JmzEHk2E+IcaJg7L62WD0ufHwT1DCbETIAviDddX+kWLgIlFjMhLuHUpYkGc552y5ZzlhXmIer48iurqVVZCrp6TXWRtbxHaxZiNi+uo/z6DTlEQUlQbjr9msd7QsxD9ObEjZvysnLop3Jp+hGUuzlvC2fRMyHm8+VrmzITgRTKhLgVN21TktiOawXMnYi/znbsVEKMLETFXcydaI16dtf8iHtQcS9zJxZhln2mm2A/ph5gQtQdhI5Dhyl/JJx2R5EYjsnsO/E4cJw4SdH0U8XxdBApMIbT3DsRvhDOKOM/S8g5ZRLngezP8rLM/5AXFP6icnRJObrMyVfAwnKVc1yj1PUbylFhOJ1ECSe7goVFxw3hpsGYVrugFNNH8xarFshwdb7NLm13SvLu1h3fY58Et1RsdS0FQQlbGbo6u6ObO6yVV+BbHA9Py/j8StEWx4t/LaBN7yjeJ/pYUEHvpLbP8613FpmOarxW8rivzj+o5Al+6/rwkcpW166sgueRzXZRtIh/7G/BZpt2midPMfxZsoyYBf84nifxuHMV5hP+Y5Fe8AVe4j70H4vSyREs/wqdLB5iTffazpx/81bkE52XpXfmBd6LfaLz2g9+dXzmx3/nJc2nugIuQl4YIu2y/25eP38R88IQaffVVCBYZZwqvKTJqOFLVSyqIchV1Vunb9//l5e0P5QCP1UtKiHSLoCuub8CVS1qIdLO1ab8tyqv+QOv/VmKonZqnAAAAABJRU5ErkJggg==",(function(t,a){if(t)throw t;e.addImage("marker-icon",a)})),function(){e.hasImage("marker-icon")&&e.removeImage("marker-icon")}}),[]),Object(n.useEffect)((function(){if(a){var e=new Ee.h(d).fitBounds([[a.viewport[0],a.viewport[1]],[a.viewport[2],a.viewport[3]]],{padding:40}).zoom;b(Object(m.a)(Object(m.a)({},d),{},{longitude:a.location[0],latitude:a.location[1],zoom:e,transitionInterpolator:new Ee.a,transitionDuration:1e3}))}}),[a]),Object(n.useEffect)((function(){var e=o.current.getMap();return e.on("moveend",I),I(),function(){return e.off("moveend",I)}}),[r]),Object(n.useEffect)((function(){var e=[];e.TOTAL=L.features.length,L.features.forEach((function(t){e[t.properties.id_type]?e[t.properties.id_type]+=1:e[t.properties.id_type]=1})),c(e)}),[L]),Object(n.useEffect)((function(){L.features.length>0&&h("cluster"===i?["cluster-layer","unclustered-point-layer"]:["unclustered-point-layer"])}),[i,L]);var I=function(){var e=o.current.getMap();rt&&clearTimeout(rt),rt=setTimeout(Object(y.a)(v.a.mark((function t(){var a,n,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(U(!0),a=[],"All Categories"===r.category){t.next=11;break}if(n=e.queryRenderedFeatures({layers:["poi-label"]}),n.filter((function(e){return e.properties.maki===r.category.toLowerCase()})).forEach((function(e){a.push(e.geometry.coordinates)})),0!==a.length){t.next=11;break}return z({type:"FeatureCollection",features:[]}),c([]),U(!1),t.abrupt("return");case 11:return i={type:"FeatureCollection",features:[]},t.next=14,We({date:J(r.date),timeRange:r.timeRange,zoom:e.getZoom(),bounds:e.getBounds().toArray().flat(),poiLocations:a,poiRadius:r.category_distance});case 14:"success"===(o=t.sent).status&&o.result&&o.result.features&&(i=o.result),z(i),U(!1);case 18:case"end":return t.stop()}}),t)}))),500)};return Object(Y.jsxs)(Ee.i,Object(m.a)(Object(m.a)({className:t.mapDiv},d),{},{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/streets-v11",mapboxApiAccessToken:j,ref:o,attributionControl:!1,maxZoom:24,minZoom:16,onViewportChange:b,interactiveLayerIds:x,onClick:S,children:["cluster"===i&&Object(Y.jsxs)(Ee.g,{id:"clusterSource",type:"geojson",data:L,cluster:!0,clusterMaxZoom:18,clusterRadius:50,children:[Object(Y.jsx)(Ee.b,{id:"cluster-layer",type:"circle",source:"clusterSource",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),Object(Y.jsx)(Ee.b,{id:"cluster-count-layer",type:"symbol",source:"clusterSource",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),Object(Y.jsx)(Ee.b,{id:"unclustered-point-layer",type:"symbol",source:"clusterSource",filter:["!",["has","point_count"]],layout:{"icon-image":"marker-icon","icon-size":.5,"icon-offset":[0,-32],"icon-allow-overlap":!0,"icon-ignore-placement":!0}}),k.open&&Object(Y.jsx)(Ee.b,{id:"select-point-layer",type:"symbol",source:"clusterSource",filter:["==","id",k.id],layout:{"icon-image":"marker-icon","icon-size":.7,"icon-offset":[0,-32],"icon-allow-overlap":!0,"icon-ignore-placement":!0}})]}),"heatmap"===i&&Object(Y.jsxs)(Ee.g,{id:"heatmapSource",type:"geojson",data:L,children:[Object(Y.jsx)(Ee.b,{id:"heatmap-layer",type:"heatmap",source:"heatmapSource",maxzoom:19,paint:{"heatmap-weight":["interpolate",["linear"],["zoom"],12,.2,19,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],12,5,19,1],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(166,189,219)",.8,"rgb(103,169,207)",1,"rgb(28,144,153)"],"heatmap-radius":["interpolate",["linear"],["zoom"],12,16,19,40],"heatmap-opacity":["interpolate",["linear"],["zoom"],12,.9,19,.5]}}),Object(Y.jsx)(Ee.b,{id:"unclustered-point-layer",type:"symbol",source:"heatmapSource",minzoom:18,layout:{"icon-image":"marker-icon","icon-size":.5,"icon-offset":[0,-32],"icon-allow-overlap":!0,"icon-ignore-placement":!0}}),k.open&&Object(Y.jsx)(Ee.b,{id:"select-point-layer",type:"symbol",source:"heatmapSource",filter:["==","id",k.id],layout:{"icon-image":"marker-icon","icon-size":.7,"icon-offset":[0,-32],"icon-allow-overlap":!0,"icon-ignore-placement":!0}})]}),Object(Y.jsx)(Ee.d,{style:{top:70,right:10}}),Object(Y.jsx)(Ee.f,{style:{bottom:10,left:10}}),a&&Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(Ee.c,{longitude:a.location[0],latitude:a.location[1],offsetLeft:-16,offsetTop:-44,children:Object(Y.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAblQTFRF6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx60ZG60FB6j099JmZ/vHx/evr84qK6jg46TIy7mJi+tPT//v7//39//z8+cnJ7VlZ60dH9Z6e/vX160RE721t+9vb//7++9nZ72lp60JC+L29//r6+Lm56TQ08Xh4/vDw/e7u8X5+6TU17FBQ+cjI+s7O7VZW7E5O+MHB/OHh/ODg/Ofn/N7e+tDQ6jc360BA97a2+cTE97W1+cbG97e3/OLi72xs72ho72pq72tr/N/f+s/P+cXF+tHR+szM+cPD+cvL+tLS+svL97S0+srK8Xx8+9TU+s3N84+P9aWl9qam9Jqa6TEx6TMz6jY26TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TExwreklAAAAJN0Uk5Tffn//JL1/f7/////////////////////////////////////////////////////////////////////////////////////////////////////+///2ep0jAd+1vjaiQ4DEEBpn6ZuRBICBAU49kpthLXIBgEZ4ewhQvFQgA+7yxbiLE1bh5YJFMXSGyXtMlJnAcUQTAAAAkBJREFUeJyVUwdb1EAQ3QtVQe80G0ROI6iInp5iIXpYUBFp6mEvWNfu7ootUbFhr2D5xc7Obi7JeeT73C9fJtn35s2byYaQjJWy6upJQxpuWY2kKZ1g/TeheUEqYWFL66LF2XkJuSVLberYbctytQntyzsc6sDV2pKvRVixktqU2i6I0FWd/xC6Vq8BgDoKBxG6titB6F7XY7sOLBcUHFCy3fUbChFh46YIgHxbyxQ3h4R8D+4pnGqawm3ascUQunu3bosDOmzf0eeFJXa274rhyguEUnM+1kV/BQcvOuzOxdvcEwEwS/RSShD60fjefZ0D+wcOHES1UpWC0h/Us2mjauSHkgpYf0gTDuPIh5MELGwURnDkVSbVR7BHNWEMR55UGHfVkEcrJeAt6WEcdig1hCPYZm+CcBTPwjFNKGNLE4nzUJgYK5eLx/XeiaHBvuJJczTJKXMwCp7nndaPZ7LZrGeFB+aslbrOkfPpf84FMnnx0uX50MyVq9cIY9dv3LxV4xfO3L5z9x5jhAvBJLs/VY3XPYBtJjkQ4C7Zw2rCI8gUggvCEBfycRJ/IqRS9gMSSIhQ5umzOP58WppMwjjiPn/xMsKnXkldWYAHKdCmEK8bQ7ypflJtYSbhUF+RBXszExLevjP5goUm0dH0e2PgQwWX2iS2AbePOK/MpwjXbaqJoA3/s/owX77qN7TBSeDriflq59t3y/oxG/pTMgwU8NHXGXM/G36ZkhpnJBCcMS4gcBaI4PcfFTjjHMaskL9P/LzwDEuNkwAAAABJRU5ErkJggg==",alt:"marker"})}),Object(Y.jsx)(Ee.c,{longitude:a.location[0],latitude:a.location[1],offsetLeft:20,offsetTop:-56,children:Object(Y.jsx)("div",{className:t.addressLabel,children:a.address})})]}),k.open&&Object(Y.jsx)(at,{markerPanelInfo:k,setMarkerPanelInfo:W}),T&&Object(Y.jsx)(Ue.a,{})]}))},ct=Object(d.a)({togglePanel:{position:"absolute",top:10,right:10}});var ot=function(e){var t=ct(),a=e.renderMode,n=e.setRenderMode;return Object(Y.jsx)("div",{className:t.togglePanel,children:Object(Y.jsxs)(Pe.a,{value:a,exclusive:!0,onChange:function(e,t){null!==t&&n(t)},"aria-label":"chart button group",children:[Object(Y.jsx)(Be.a,{value:"cluster","aria-label":"Cluster",children:"Cluster"}),Object(Y.jsx)(Be.a,{value:"heatmap","aria-label":"Heatmap",children:"Heatmap"})]})})},st=a(175),lt=a.n(st),ut=a(176),dt=a.n(ut),bt=Object(d.a)({countsPanel:{position:"absolute",top:10,left:10,width:400,"& .MuiPaper-root":{backgroundColor:"rgba(255,255,255,0.8)"}}});var jt=function(e){var t=bt(),a=e.counts;return Object(Y.jsx)("div",{className:t.countsPanel,children:Object(Y.jsxs)(A.a,{container:!0,spacing:2,flexDirection:"row",children:[Object(Y.jsx)(A.a,{item:!0,sm:4,xs:12,children:Object(Y.jsxs)(Ne.a,{children:[Object(Y.jsxs)(A.a,{container:!0,alignItems:"center",children:[Object(Y.jsx)(Xe.a,{color:"primary"}),Object(Y.jsx)(ee.a,{variant:"caption",children:"Total Devices"})]}),Object(Y.jsx)(ee.a,{variant:"h5",style:{marginLeft:20},children:a.TOTAL?ye()(a.TOTAL).format("0,0"):0})]})}),Object(Y.jsx)(A.a,{item:!0,sm:4,xs:12,children:Object(Y.jsxs)(Ne.a,{children:[Object(Y.jsxs)(A.a,{container:!0,alignItems:"center",children:[Object(Y.jsx)(lt.a,{color:"primary"}),Object(Y.jsx)(ee.a,{variant:"caption",children:"Android"})]}),Object(Y.jsx)(ee.a,{variant:"h5",style:{marginLeft:20},children:a.aaid?ye()(a.aaid).format("0,0"):0})]})}),Object(Y.jsx)(A.a,{item:!0,sm:4,xs:12,children:Object(Y.jsxs)(Ne.a,{children:[Object(Y.jsxs)(A.a,{container:!0,alignItems:"center",children:[Object(Y.jsx)(dt.a,{color:"secondary"}),Object(Y.jsx)(ee.a,{variant:"caption",children:"iOS"})]}),Object(Y.jsx)(ee.a,{variant:"h5",style:{marginLeft:20},children:a.idfa?ye()(a.idfa).format("0,0"):0})]})})]})})},pt=a(177),Ot=Object(d.a)({pieChart:{position:"absolute",top:100,left:10,width:160,height:160,"&.MuiPaper-root":{borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.7)"}}});var gt=function(e){var t=Ot(),a=e.counts,r=Object(n.useState)([]),i=Object(u.a)(r,2),c=i[0],o=i[1];return Object(n.useEffect)((function(){var e=[["Platform","Count",{role:"style"}],["Android",parseInt(a.aaid),"#000"],["iOS",parseInt(a.idfa),"#000"]];o(e)}),[a]),Object(Y.jsx)(Ne.a,{className:t.pieChart,children:Object(Y.jsx)(pt.a,{width:"100%",height:"100%",chartType:"PieChart",data:c,options:{pieHole:.2,legend:{position:"top",alignment:"center"},backgroundColor:"transparent"},rootProps:{"data-testid":"1"},style:{flex:1,opacity:.9}})})},xt=Object(d.a)({timeslider:{position:"absolute",bottom:10,left:0,right:0,"& .MuiPaper-root":{width:"50%",maxWidth:600,paddingTop:10,paddingBottom:5,paddingLeft:40,paddingRight:40,backgroundColor:"rgba(255,255,255,0.7)"},"&.MuiSlider-root":{}}});var ht=function(e){var t=xt(),a=e.filter,r=e.setFilter,i=Object(n.useState)({min:0,max:100,step:1,defaultValue:0,marks:[]}),c=Object(u.a)(i,2),o=c[0],s=c[1],l=Object(n.useState)(""),d=Object(u.a)(l,2),b=d[0],j=d[1];return Object(n.useEffect)((function(){var e=H(J(a.date));s({min:e,max:e+86399,step:30,defaultValue:[e,e+86399],marks:[{value:e,label:"0"},{value:e+10800,label:"3"},{value:e+21600,label:"6"},{value:e+32400,label:"9"},{value:e+43200,label:"12"},{value:e+54e3,label:"15"},{value:e+64800,label:"18"},{value:e+75600,label:"21"},{value:e+86400,label:"24"}]}),r(Object(m.a)(Object(m.a)({},a),{},{timeRange:[e,e+86399]})),j("UTC ".concat(X(0)," - ").concat(X(86399)," ").concat(J(a.date)))}),[a.date]),Object(Y.jsx)(A.a,{container:!0,className:t.timeslider,justifyContent:"center",children:Object(Y.jsxs)(Ne.a,{children:[Object(Y.jsx)(ee.a,{variant:"h6",align:"center",children:b}),Object(Y.jsx)(qe.a,Object(m.a)({getAriaLabel:function(){return"Time range"},value:a.timeRange,onChange:function(e,t){r(Object(m.a)(Object(m.a)({},a),{},{timeRange:t}));var n=H(J(a.date));j("UTC ".concat(X(t[0]-n)," - ").concat(X(t[1]-n)," ").concat(J(a.date)))},style:{color:"#ff844b"}},o))]})})},mt=Object(d.a)({root:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh"},content:{position:"relative",flex:1,display:"flex",flexDirection:"row",height:0},sidebar:{position:"relative",display:"flex",flexDirection:"column",width:400,padding:0},mapContainer:{position:"relative",flex:1}});var ft=function(){var e=mt(),t=Object(n.useState)(null),a=Object(u.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)({date:g,timeRange:[H(J(g)),H(J(g))+86399],category:"All Categories",category_distance:20}),o=Object(u.a)(c,2),s=o[0],l=o[1],d=Object(n.useState)([]),b=Object(u.a)(d,2),j=b[0],p=b[1],O=Object(n.useState)("cluster"),x=Object(u.a)(O,2),h=x[0],m=x[1];return Object(Y.jsxs)("div",{className:e.root,children:[Object(Y.jsx)(G,{searchPlace:r,setSearchPlace:i,filter:s,setFilter:l}),Object(Y.jsxs)("div",{className:e.content,children:[Object(Y.jsx)("div",{className:e.sidebar,children:Object(Y.jsx)(Te,{searchPlace:r,setSearchPlace:i})}),Object(Y.jsxs)("div",{className:e.mapContainer,children:[Object(Y.jsx)(it,{searchPlace:r,filter:s,renderMode:h,setCounts:p}),Object(Y.jsx)(ot,{renderMode:h,setRenderMode:m}),Object(Y.jsx)(jt,{counts:j}),j.TOTAL&&Object(Y.jsx)(gt,{counts:j}),Object(Y.jsx)(ht,{filter:s,setFilter:l})]})]})]})},vt=Object(o.a)({components:{MuiPaper:{styleOverrides:{root:{padding:10,boxShadow:"0px 24px 48px -4px #06192114"}}},MuiTypography:{styleOverrides:{root:{lineHeight:"normal",wordBreak:"break-all"}}},MuiButton:{styleOverrides:{root:{padding:"16px 20px",borderRadius:50,lineHeight:"normal",textTransform:"none"}}},MuiTextField:{styleOverrides:{root:{boxSizing:"border-box"}}},MuiOutlinedInput:{styleOverrides:{root:{padding:"0 16px",borderRadius:72,backgroundColor:"#f1f6fa"},input:{padding:"14px 8px",color:"#162c36"},notchedOutline:{border:0}}},MuiToggleButtonGroup:{styleOverrides:{root:{borderRadius:50,backgroundColor:"#e3ebf1"},grouped:{"&:first-of-type":{marginLeft:0},"&:last-of-type":{marginRight:0},"&:not(:first-of-type)":{borderTopLeftRadius:50,borderBottomLeftRadius:50},"&:not(:last-of-type)":{borderTopRightRadius:50,borderBottomRightRadius:50}}}},MuiToggleButton:{styleOverrides:{root:{border:0,borderRadius:50,textTransform:"none",padding:"10px 20px",marginLeft:10,marginRight:10,"&.Mui-selected":{color:"#fff",backgroundColor:"#ff844b"}}}},MuiInputAdornment:{styleOverrides:{root:{color:"#ff844b"}}},MuiIconButton:{styleOverrides:{root:{color:"#ff844b"}}},MuiBackdrop:{styleOverrides:{root:{}}},MuiDialog:{styleOverrides:{root:{"& .MuiDialog-paper":{width:480,paddingTop:20,paddingBottom:20,paddingLeft:30,paddingRight:30}}}},MuiDialogTitle:{styleOverrides:{root:{borderBottom:"1px solid #e3ebf1"}}},MuiDialogContent:{styleOverrides:{root:{padding:10}}},MuiDialogActions:{styleOverrides:{root:{padding:20}}},MuiListItemButton:{styleOverrides:{root:{borderRadius:8,"&:hover":{backgroundColor:"#f1f6fa"}}}}}});vt=Object(s.a)(vt);var yt=function(){return Object(Y.jsx)(l.a,{theme:vt,children:Object(Y.jsx)(ft,{})})},At=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,372)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};c.a.render(Object(Y.jsx)(r.a.StrictMode,{children:Object(Y.jsx)(yt,{})}),document.getElementById("root")),At()}},[[267,1,2]]]);
//# sourceMappingURL=main.a1dcc5f6.chunk.js.map