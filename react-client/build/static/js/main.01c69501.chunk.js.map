{"version":3,"sources":["utils/settings.js","assets/images/logo.png","utils/util.js","services/days.js","components/locations-dashboard/Header.js","services/place.js","components/locations-dashboard/SideBar.js","services/marker.js","components/locations-dashboard/MarkerPanel/MarkerInfo.js","components/locations-dashboard/MarkerPanel/PopupInfo.js","components/locations-dashboard/MarkerPanel/TrackingMap.js","assets/images/marker-icon.png","components/locations-dashboard/MarkerPanel/MarkerPanel.js","components/locations-dashboard/Map.js","assets/images/user-icon.png","assets/images/home-icon.png","components/locations-dashboard/RenderMode.js","components/locations-dashboard/Counts.js","components/locations-dashboard/PieChart.js","components/locations-dashboard/TimeSlider.js","components/locations-dashboard/Main.js","components/App.js","reportWebVitals.js","index.js"],"names":["BASE_URL","MAPBOX_ACCESS_TOKEN","DEFAULT_VIEWPORT","longitude","latitude","zoom","google","window","DEFAULT_DATE","Date","categories","category_distances","dateFormat","date","d","getDate","m","getMonth","getFullYear","timeFormat","value","sec_num","parseInt","hours","Math","floor","minutes","seconds","secondsFromDate","arr","split","UTC","getDays","params","a","result","url","axios","post","then","response","data","catch","err","status","message","useStyles","makeStyles","header","width","padding","backgroundColor","logo","height","timeout","Header","props","classes","searchPlace","setSearchPlace","filter","setFilter","useState","isLoading","setIsLoading","highlightedDays","setHighlightedDays","handleMonthChange","fetchHighlightedDays","clearTimeout","setTimeout","res","useEffect","input","document","getElementById","autocomplete","maps","places","Autocomplete","componentRestrictions","country","placeChangeHandle","event","addListener","place","getPlace","geometry","formatted_address","placePhotoUrl","photos","getUrl","maxWidth","place_id","location","lng","lat","viewport","getSouthWest","getNorthEast","name","address","type","types","rating","user_ratings_total","imageLink","image","removeListener","Grid","container","className","spacing","alignItems","item","lg","md","justifyContent","src","imgLogo","TextField","id","placeholder","fullWidth","InputProps","startAdornment","InputAdornment","position","endAdornment","IconButton","onClick","onMouseDown","e","preventDefault","edge","autoComplete","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","loading","renderLoading","CalendarPickerSkeleton","renderInput","renderDay","day","_value","DayComponentProps","isSelected","outsideCurrentMonth","indexOf","PickersDay","style","border","toString","onMonthChange","onYearChange","onChange","newValue","variant","InputLabelProps","shrink","select","SelectProps","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","category","target","map","index","MenuItem","category_distance","disabled","getPlaces","get","addPlace","deletePlace","sideBarHeader","sideBarContent","flex","overflowY","label","display","paddingTop","paddingLeft","paddingBottom","listItem","borderBottom","borderRadius","SideBar","setPlaces","addPlaceDialogOpen","setAddPlaceDialogOpen","deletePlaceDialogOpen","setDeletePlaceDialogOpen","addPlaceDisabled","setAddPlaceDisabled","handleAddPlace","console","log","handleDeletePlace","handleDeletePlaceDialogOk","newPlaces","length","fetchPlaces","color","marginRight","Typography","Button","startIcon","List","dense","ListItem","disablePadding","secondaryAction","ListItemButton","selected","ListItemText","primary","marginBottom","secondary","Rating","size","defaultValue","precision","readOnly","marginLeft","numeral","format","ListItemAvatar","Avatar","alt","component","align","marginTop","Dialog","open","onClose","DialogTitle","sx","right","top","theme","palette","grey","onSubmit","DialogContent","validators","errorMessages","DialogActions","xs","sm","autoFocus","getMarkers","getMarkerInfo","getTracking","paper","paperHeader","MarkerInfo","markerInfo","setMarkerInfo","fetchMarkerInfo","Paper","device_id","id_type","timestamp","horizontal_accuracy","CircularProgress","PopupInfo","info","mapboxgl","workerClass","require","default","mapContainer","mapDiv","timeslider","bottom","left","paddingRight","TrackingMap","mapRef","useRef","coordinates","setViewport","interactiveLayerIds","setInteractiveLayerIds","min","max","step","marks","sliderProps","setSliderProps","sliderValue","setSliderValue","sliderLabel","setSliderLabel","features","points","setPoints","trackPoints","setTrackPoints","trackPoint","setTrackPoint","trackLine","setTrackLine","hoverInfo","setHoverInfo","onHover","useCallback","newHoverInfo","feature","layer","lngLat","properties","fetchTrackingData","bbox","turf","current","getMap","WebMercatorViewport","getCanvas","fitBounds","t","forEach","newTrackPoints","i","t1","t2","dm","bearing","k","from_lat","parseFloat","from_lng","to_lat","to_lng","push","time","heading","newTrackLine","point","loadImage","error","addImage","t0","mapStyle","mapboxApiAccessToken","attributionControl","maxZoom","ref","onViewportChange","paint","source","layout","closeButton","Slider","newPoint","newTrackPoint","drawer","flexDirection","minWidth","boxSizing","overflowX","drawerHeader","MarkerPanel","markerPanelInfo","setMarkerPanelInfo","toggleValue","setToggleValue","Drawer","anchor","key","ToggleButtonGroup","exclusive","ToggleButton","addressLabel","fontSize","lineHeight","borderLeft","pointerEvents","Map","renderMode","setCounts","dataSource","setDataSource","showLoading","setShowLoading","handleClick","transitionDuration","hasImage","removeImage","transitionInterpolator","FlyToInterpolator","on","mapDataCallback","off","newCounts","poiLocations","poiFeatures","queryRenderedFeatures","layers","toLowerCase","newDataSource","timeRange","getZoom","bounds","getBounds","toArray","flat","poiRadius","minZoom","cluster","clusterMaxZoom","clusterRadius","maxzoom","minzoom","offsetLeft","offsetTop","LinearProgress","togglePanel","RenderMode","setRenderMode","countsPanel","Counts","counts","pieChart","PieChart","chartData","setChartData","newData","role","chartType","options","pieHole","legend","alignment","rootProps","opacity","TimeSlider","timeRangeLabel","setTimeRangeLabel","getAriaLabel","root","content","sidebar","Main","createTheme","components","MuiPaper","styleOverrides","boxShadow","MuiTypography","wordBreak","MuiButton","textTransform","MuiTextField","MuiOutlinedInput","notchedOutline","MuiToggleButtonGroup","grouped","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","MuiToggleButton","MuiInputAdornment","MuiIconButton","MuiBackdrop","MuiDialog","MuiDialogTitle","MuiDialogContent","MuiDialogActions","MuiListItemButton","responsiveFontSizes","App","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.01c69501.chunk.js","sourcesContent":["\r\n//export const BASE_URL = 'http://localhost:8080';\r\n\r\nexport const BASE_URL = 'https://jp-locations-dashboard.herokuapp.com';\r\n\r\nexport const MAPBOX_ACCESS_TOKEN = 'pk.eyJ1IjoibGVld2FuZ2RldiIsImEiOiJja2tnbDU2c2gwMHNvMndsdDF1d2pxNTQ2In0.zKeo06DtCh6fLifrbCZCFA';\r\n\r\nexport const DEFAULT_VIEWPORT = {\r\n    longitude: 135.4159975,\r\n    latitude: 34.6777192,\r\n    zoom: 16\r\n}\r\n\r\nexport const google = window.google;\r\n\r\nexport const DEFAULT_DATE = new Date('2021-08-26');\r\n\r\n// mapbox gl poi-label layer maki field\r\nexport const categories = [\r\n   'All Categories',\r\n   'Bank',   \r\n   'Bar',\r\n   'Cafe',\r\n   'Golf',\r\n   'Grocery',\r\n   'Hospital',\r\n   'Park',\r\n   'Restaurant',\r\n   'School',\r\n   'Shop',\r\n   'Stadium',\r\n   'Station',\r\n   'Theatre'\r\n];\r\n\r\nexport const category_distances = [5, 10, 20, 50, 100, 200, 500];","export default __webpack_public_path__ + \"static/media/logo.3f900ba7.png\";","\r\nexport const dateFormat = (date) => {\r\n    var d = date.getDate();\r\n    var m = date.getMonth() + 1; //Month from 0 to 11\r\n    var y = date.getFullYear();\r\n    return '' + (m<=9 ? '0' + m : m) + '/' + (d <= 9 ? '0' + d : d) + '/' + y;\r\n}\r\n\r\nexport const timeFormat = (value) => {\r\n    var sec_num = parseInt(value, 10); // seconds\r\n    var hours   = Math.floor(sec_num / 3600);\r\n    var minutes = Math.floor((sec_num - (hours * 3600)) / 60);\r\n    var seconds = sec_num - (hours * 3600) - (minutes * 60);\r\n\r\n    if (hours   < 10) {hours   = \"0\"+hours;}\r\n    if (minutes < 10) {minutes = \"0\"+minutes;}\r\n    if (seconds < 10) {seconds = \"0\"+seconds;}\r\n    return hours + ':' + minutes + ':' + seconds;\r\n}\r\n\r\nexport const secondsFromDate = (date) => {\r\n    let arr = date.split(\"/\");\r\n    return Date.UTC(arr[2],parseInt(arr[0])-1,arr[1])/1000\r\n}","import axios from \"axios\";\r\nimport { BASE_URL } from \"../utils/settings.js\";\r\n\r\nexport const getDays = async (params) => {\r\n    var result = null;\r\n    \r\n    let url = `${BASE_URL}/api/days`;\r\n\r\n    await axios.post(url, params).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n      result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n      };\r\n    });\r\n    return result;\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport MenuItem from '@mui/material/MenuItem';\r\n\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport DatePicker from '@mui/lab/DatePicker';\r\nimport CalendarPickerSkeleton from '@mui/lab/CalendarPickerSkeleton';\r\nimport PickersDay from '@mui/lab/PickersDay';\r\n\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport CategoryIcon from '@mui/icons-material/Category';\r\nimport ShareLocationIcon from '@mui/icons-material/ShareLocation';\r\n\r\nimport imgLogo from \"../../assets/images/logo.png\";\r\n\r\nimport { google, categories, category_distances } from \"./../../utils/settings.js\";\r\nimport { dateFormat } from '../../utils/util.js';\r\nimport { getDays } from \"../../services/days.js\";\r\n\r\nconst useStyles = makeStyles({\r\n    header:{\r\n       width:'100%',\r\n       padding:10,\r\n       backgroundColor:'white'\r\n    },\r\n    logo:{\r\n        height: 75\r\n    }\r\n });\r\n \r\n let timeout = null;\r\n\r\n function Header(props) {\r\n     const classes = useStyles();\r\n     const { \r\n         searchPlace,\r\n         setSearchPlace,\r\n         filter,\r\n         setFilter\r\n     } = props;\r\n     const [isLoading, setIsLoading] = useState(false);\r\n     const [highlightedDays, setHighlightedDays] = useState([]);\r\n     \r\n     const handleMonthChange = (date) => {\r\n        setIsLoading(true);\r\n        setHighlightedDays([]);\r\n        fetchHighlightedDays(date);\r\n     }\r\n\r\n     const fetchHighlightedDays = (date) => {\r\n        if(timeout){\r\n           clearTimeout(timeout);\r\n        }\r\n        timeout = setTimeout(async () => {\r\n            let res = await getDays({date:dateFormat(date)});\r\n            setIsLoading(false);\r\n            if(res.status === 'success'){\r\n              setHighlightedDays(res.result);\r\n            }\r\n        }, 500);\r\n     };\r\n\r\n     useEffect(() => {\r\n        var input = document.getElementById(\"input-address\");\r\n        const options = {\r\n            componentRestrictions: { country: \"jp\" },\r\n        };\r\n        const autocomplete = new google.maps.places.Autocomplete(input, options);\r\n        const placeChangeHandle = google.maps.event.addListener(autocomplete, \"place_changed\", function () {\r\n          var place = autocomplete.getPlace();\r\n          if(place && place.geometry && place.formatted_address){\r\n            var placePhotoUrl=place.url;\r\n            if(place.photos){\r\n               placePhotoUrl = place.photos[0].getUrl({maxWidth:128}); \r\n            }\r\n            setSearchPlace({\r\n              place_id:place.place_id,\r\n              location:[\r\n                place.geometry.location.lng(),\r\n                place.geometry.location.lat()\r\n              ],\r\n              viewport:[\r\n                place.geometry.viewport.getSouthWest().lng(),\r\n                place.geometry.viewport.getSouthWest().lat(),\r\n                place.geometry.viewport.getNorthEast().lng(),\r\n                place.geometry.viewport.getNorthEast().lat()\r\n              ],\r\n              name:place.name,\r\n              address:place.formatted_address,\r\n              type:place.types?place.types[0]:'',\r\n              rating:place.rating??0,\r\n              user_ratings_total:place.user_ratings_total??0,\r\n              url:place.url,\r\n              imageLink: placePhotoUrl,\r\n              image:''\r\n            });\r\n          }\r\n        });\r\n\r\n        fetchHighlightedDays(filter.date);\r\n\r\n        return () => {\r\n           //google.maps.event.clearListeners(autocomplete, 'place_changed');\r\n           google.maps.event.removeListener(placeChangeHandle);\r\n        }\r\n     }, []);\r\n\r\n     useEffect(() => {\r\n        if(searchPlace){\r\n          document.getElementById(\"input-address\").value=searchPlace.address;\r\n        }else{\r\n          document.getElementById(\"input-address\").value='';\r\n        }\r\n     },[searchPlace]);\r\n\r\n     return (\r\n        <Grid container className={classes.header} spacing={1} alignItems=\"center\">\r\n            <Grid container item lg={3} md={12} justifyContent=\"center\">\r\n                <img src={imgLogo} className={classes.logo} />\r\n            </Grid>\r\n            <Grid container item spacing={2} lg={9} md={12}>\r\n                <Grid item md={4}>\r\n                    <TextField\r\n                      id=\"input-address\"\r\n                      name=\"address\"\r\n                      //variant=\"outlined\"\r\n                      //InputLabelProps={{ shrink: true }}\r\n                      placeholder=\"Enter your address.\"\r\n                      fullWidth\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">\r\n                            <SearchIcon />\r\n                          </InputAdornment>\r\n                        ),\r\n                        endAdornment: (\r\n                          <InputAdornment position=\"end\">\r\n                              <IconButton aria-label=\"toggle password visibility\"\r\n                                  onClick={()=>setSearchPlace(null)}\r\n                                  onMouseDown={(e)=>e.preventDefault()}\r\n                                  edge=\"end\"\r\n                              >{(searchPlace && searchPlace.address) && <CloseIcon />}\r\n                              </IconButton>\r\n                          </InputAdornment>\r\n                        )\r\n                      }}\r\n                      autoComplete=\"off\"\r\n                    />\r\n                </Grid>\r\n                <Grid item md={3}>\r\n                  <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n                        <DatePicker\r\n                            //label=\"Select Date\"\r\n                            value={filter.date}\r\n                            loading={isLoading}\r\n                            renderLoading={() => <CalendarPickerSkeleton />}\r\n                            renderInput={(params) => <TextField {...params} fullWidth />}\r\n                            renderDay={(day, _value, DayComponentProps) => {\r\n                                const isSelected =\r\n                                  !DayComponentProps.outsideCurrentMonth &&\r\n                                  highlightedDays.indexOf(day.getDate()) > -1;\r\n                                return (\r\n                                  <PickersDay \r\n                                      key={day.toString()} \r\n                                      {...DayComponentProps} \r\n                                      //disabled={!isSelected}\r\n                                      style={{border: isSelected?'1px solid #ff844b':0}}\r\n                                  />\r\n                                );\r\n                              }}\r\n                              onMonthChange={handleMonthChange}\r\n                              onYearChange={handleMonthChange}\r\n                              onChange={(newValue) => {\r\n                                if(newValue!==null){\r\n                                  setFilter({\r\n                                    ...filter,\r\n                                    date: newValue\r\n                                  });\r\n                                }\r\n                              }}\r\n                        />\r\n                    </LocalizationProvider>\r\n                </Grid>\r\n                <Grid item md={3}>\r\n                  <TextField\r\n                    variant=\"outlined\"\r\n                    //label=\"Select categories\"\r\n                    fullWidth\r\n                    InputLabelProps={{ shrink: true }}\r\n                    select={true}\r\n                    SelectProps={{\r\n                        MenuProps: {\r\n                          anchorOrigin: { vertical: \"bottom\", horizontal: \"center\" },\r\n                          transformOrigin: { vertical: \"top\", horizontal: \"center\" },\r\n                          getContentAnchorEl: null\r\n                      }\r\n                    }}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">\r\n                          <CategoryIcon />\r\n                        </InputAdornment>\r\n                      )\r\n                    }}\r\n                    value={filter.category}\r\n                    onChange={(e) => setFilter({...filter, category: e.target.value})}\r\n                  >\r\n                    {  \r\n                      categories.map((item,index)=>(\r\n                        <MenuItem key={`category-${index}`} value={item}>\r\n                            {item}\r\n                        </MenuItem>  \r\n                      ))\r\n                    }\r\n                  </TextField>\r\n                </Grid>\r\n                <Grid item md={2}>\r\n                  <TextField\r\n                      variant=\"outlined\"\r\n                      //label=\"Select categories\"\r\n                      //placeholder=\"Select Category\"\r\n                      fullWidth\r\n                      InputLabelProps={{ shrink: true }}\r\n                      select={true}\r\n                      SelectProps={{\r\n                          MenuProps: {\r\n                            anchorOrigin: { vertical: \"bottom\", horizontal: \"center\" },\r\n                            transformOrigin: { vertical: \"top\", horizontal: \"center\" },\r\n                            getContentAnchorEl: null\r\n                        }\r\n                      }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">\r\n                            <ShareLocationIcon />\r\n                          </InputAdornment>\r\n                        )\r\n                      }}\r\n                      value={filter.category_distance}\r\n                      onChange={(e) => setFilter({...filter, category_distance: e.target.value})}\r\n                      disabled={filter.category==='All Categories'?true:false}\r\n                    >\r\n                      {  \r\n                        category_distances.map((item,index)=>(\r\n                          <MenuItem key={`d-${index}`} value={item}>\r\n                              {`${item} m`}\r\n                          </MenuItem>  \r\n                        ))\r\n                      }\r\n                  </TextField>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n     );\r\n }\r\n\r\nexport default Header;","import axios from \"axios\";\r\nimport { BASE_URL } from \"../utils/settings.js\";\r\n\r\nexport const getPlaces = async () => {\r\n    var result = null;\r\n      \r\n    let url = `${BASE_URL}/api/places`;\r\n  \r\n    await axios.get(url).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n      result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n      };\r\n    });\r\n    return result;\r\n}\r\n\r\nexport const addPlace = async (params) => {\r\n    var result = null;\r\n      \r\n    let url = `${BASE_URL}/api/place/add`;\r\n  \r\n    await axios.post(url, params).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n      result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n      };\r\n    });\r\n    return result;\r\n}\r\n\r\nexport const deletePlace = async (params) => {\r\n    var result = null;\r\n      \r\n    let url = `${BASE_URL}/api/place/delete`;\r\n  \r\n    await axios.post(url, params).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n      result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n      };\r\n    });\r\n    return result;\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Button from '@mui/material/Button';\r\nimport Typography from '@mui/material/Typography';\r\nimport IconButton from '@mui/material/IconButton';\r\n\r\nimport List from '@mui/material/List';\r\nimport ListItem from '@mui/material/ListItem';\r\nimport ListItemAvatar from '@mui/material/ListItemAvatar';\r\nimport ListItemButton from '@mui/material/ListItemButton';\r\n//import ListItemIcon from '@mui/material/ListItemIcon';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Rating from '@mui/material/Rating';\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\n\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport DeleteOutlineIcon from '@mui/icons-material/DeleteOutline';\r\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\r\nimport MapIcon from '@mui/icons-material/Map';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\n\r\nimport numeral from \"numeral\";\r\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\r\nimport { addPlace, getPlaces, deletePlace } from '../../services/place.js';\r\n\r\nconst useStyles = makeStyles({\r\n    sideBarHeader:{\r\n        padding:16,\r\n        //borderBottom:'1px solid #e3ebf1',\r\n        backgroundColor:'#f1f6fa'\r\n    },\r\n    sideBarContent:{\r\n        flex:1,\r\n        height:0,\r\n        overflowY:'auto'\r\n    },\r\n    label:{\r\n        display:'block',\r\n        paddingTop:16,\r\n        paddingLeft:24,\r\n        paddingBottom:4\r\n    },\r\n    listItem:{\r\n        '&.MuiListItem-root':{\r\n            borderBottom:'1px solid #eee'\r\n        },\r\n        '& .MuiListItemButton-root':{\r\n           borderRadius:0,\r\n          \r\n        },\r\n        '& .MuiAvatar-root':{\r\n            width:90,\r\n            height:90,\r\n            borderRadius:4\r\n        }\r\n    }\r\n});\r\n\r\nfunction SideBar(props) {\r\n   const classes = useStyles();\r\n   const {\r\n      searchPlace,\r\n      setSearchPlace\r\n   } = props;\r\n   const [places, setPlaces] = useState([]);\r\n   const [addPlaceDialogOpen, setAddPlaceDialogOpen] = useState(false);\r\n   const [deletePlaceDialogOpen, setDeletePlaceDialogOpen] = useState(false);\r\n   const [addPlaceDisabled, setAddPlaceDisabled] = useState(true);\r\n\r\n   const handleURLChange = (e) => {\r\n      setSearchPlace({\r\n          ...searchPlace,\r\n          image:e.target.value\r\n      }); \r\n   }\r\n   \r\n   const handleAddPlace = async () => {\r\n      setAddPlaceDialogOpen(false);\r\n      let res = await addPlace(searchPlace);\r\n      if(res.status === 'success'){\r\n          setPlaces([\r\n            ...places,\r\n            searchPlace\r\n          ]);\r\n          setAddPlaceDisabled(true);\r\n      }else{\r\n          console.log(res.message);\r\n      }\r\n   }\r\n\r\n   const handleDeletePlace = (place) => (e) => {\r\n        setDeletePlaceDialogOpen(true);\r\n        setSearchPlace(place);\r\n   }\r\n\r\n   const handleDeletePlaceDialogOk = async () => {\r\n       setDeletePlaceDialogOpen(false);\r\n       if(searchPlace){\r\n            let res = await deletePlace({place_id:searchPlace.place_id});\r\n            if(res.status === 'success'){\r\n                let newPlaces = places.filter(place=>place.place_id !== searchPlace.place_id);\r\n                setPlaces(newPlaces);\r\n                setSearchPlace(null);\r\n            }else{\r\n                console.log(res.message);\r\n            }\r\n       }\r\n   }\r\n\r\n   useEffect(() => {\r\n      if(searchPlace){\r\n        let filters = places.filter(place=>place.place_id===searchPlace.place_id);\r\n        if(filters.length>0){\r\n            setAddPlaceDisabled(true);\r\n        }else{\r\n            setAddPlaceDisabled(false);   \r\n        }\r\n      }else{\r\n         setAddPlaceDisabled(true);\r\n      }\r\n   }, [searchPlace]);\r\n\r\n   useEffect(() => {\r\n\r\n      fetchPlaces();\r\n\r\n   }, []);\r\n\r\n   const fetchPlaces = async () => {\r\n      let res = await getPlaces();\r\n      if(res.status === 'success'){\r\n          setPlaces(res.result);\r\n      }else{\r\n          console.log(res.message);\r\n      }\r\n   }\r\n\r\n   return (\r\n        <>\r\n        <div className={classes.sideBarHeader}>\r\n            <Grid container justifyContent=\"center\" alignItems=\"center\">\r\n                <FavoriteIcon color=\"warning\" style={{marginRight:10}} />\r\n                <Typography variant=\"h6\" style={{marginRight:10}}>\r\n                    Favorite Places\r\n                </Typography>\r\n                {places.length>0 && (\r\n                    <Typography variant=\"caption\" style={{marginRight:10}}>\r\n                        {`[ ${places.length} ]`}\r\n                    </Typography>\r\n                )}\r\n                <Button \r\n                    color=\"warning\" \r\n                    startIcon={<AddCircleOutlineIcon />}\r\n                    disabled={addPlaceDisabled}\r\n                    onClick={()=>setAddPlaceDialogOpen(true)}\r\n                >\r\n                    Add Place\r\n                </Button>\r\n            </Grid>  \r\n        </div>\r\n        <div className={classes.sideBarContent}>\r\n        {\r\n            places.length>0?\r\n                <List dense={true} >\r\n                    {\r\n                        places.map((place,index)=>(\r\n                            <ListItem \r\n                                key={place.place_id} \r\n                                className={classes.listItem}\r\n                                disablePadding={true}\r\n                                secondaryAction={\r\n                                    <IconButton \r\n                                        edge=\"end\" aria-label=\"delete\"\r\n                                        onClick={handleDeletePlace(place)}\r\n                                    >\r\n                                        <DeleteOutlineIcon />\r\n                                    </IconButton>\r\n                                }\r\n                            >\r\n                                <ListItemButton \r\n                                  selected={searchPlace?searchPlace.place_id===place.place_id:false}\r\n                                  onClick={()=>setSearchPlace(place)}\r\n                                >\r\n                                    <ListItemText \r\n                                        primary={\r\n                                            <Typography variant=\"subtitle2\" style={{marginBottom:4}}>\r\n                                                {place.name}\r\n                                            </Typography>\r\n                                        }\r\n                                        secondary={\r\n                                            <>\r\n                                            {place.user_ratings_total>0 && (\r\n                                                <Grid container alignItems=\"center\">\r\n                                                    <Typography variant=\"caption\">\r\n                                                       {place.rating} \r\n                                                    </Typography>\r\n                                                    <Rating \r\n                                                        name=\"rating\" \r\n                                                        size=\"small\"\r\n                                                        defaultValue={0} \r\n                                                        precision={0.1} \r\n                                                        readOnly\r\n                                                        value={place.rating} \r\n                                                        style={{marginLeft:5,marginRight:5}}\r\n                                                    />\r\n                                                    <Typography variant=\"caption\">\r\n                                                       {`(${numeral(place.user_ratings_total).format(\"0,0\")})`}\r\n                                                    </Typography>\r\n                                                </Grid>\r\n                                            )}\r\n                                            <Typography variant=\"caption\" style={{display:'block'}}>\r\n                                                {place.type}\r\n                                            </Typography>\r\n                                            <Typography variant=\"caption\">\r\n                                                {place.address}\r\n                                            </Typography>\r\n                                            </>\r\n                                        }\r\n                                    />\r\n                                    <ListItemAvatar>\r\n                                        <Avatar\r\n                                            alt=\"image\"\r\n                                            src={place.image}\r\n                                        />\r\n                                    </ListItemAvatar>\r\n                                </ListItemButton>\r\n                            </ListItem>\r\n                        ))\r\n                    }\r\n                </List>\r\n            :\r\n                <>\r\n                <Typography variant=\"body1\" component=\"div\" align=\"center\" style={{marginTop:30,padding:10}}>\r\n                    Places is empty.\r\n                </Typography> \r\n                <Typography variant=\"body1\" component=\"div\" align=\"center\" style={{padding:10}}>\r\n                    Please add your favorite places.\r\n                </Typography>     \r\n                </>\r\n        }\r\n        </div>\r\n        <Dialog\r\n            open={addPlaceDialogOpen}\r\n            onClose={()=>setAddPlaceDialogOpen(false)}\r\n            aria-labelledby=\"dialog-add-place\"\r\n            aria-describedby=\"dialog-add-place\"\r\n        >\r\n            <DialogTitle>\r\n                Add Place\r\n                <IconButton\r\n                    aria-label=\"close\"\r\n                    onClick={()=>setAddPlaceDialogOpen(false)}\r\n                    sx={{\r\n                        position: 'absolute',\r\n                        right: 8,\r\n                        top: 8,\r\n                        color: (theme) => theme.palette.grey[500],\r\n                    }}\r\n                >\r\n                  <CloseIcon />\r\n                </IconButton>\r\n            </DialogTitle>\r\n            <ValidatorForm\r\n                onSubmit={handleAddPlace}\r\n                style={{ width: \"100%\" }}\r\n            >\r\n                <DialogContent>\r\n                    <ListItem \r\n                       className={classes.listItem}\r\n                       disablePadding\r\n                       style={{paddingBottom:10}}\r\n                    >\r\n                        <ListItemText \r\n                            primary={\r\n                                <Typography variant=\"subtitle2\" style={{marginBottom:4}}>\r\n                                    {searchPlace?searchPlace.name:''}\r\n                                </Typography>\r\n                            }\r\n                            secondary={\r\n                                <>\r\n                                {(searchPlace && searchPlace.user_ratings_total>0) && (\r\n                                    <Grid container alignItems=\"center\">\r\n                                        <Typography variant=\"caption\">\r\n                                            {searchPlace?searchPlace.rating:''} \r\n                                        </Typography>\r\n                                        <Rating \r\n                                            name=\"rating\" \r\n                                            size=\"small\"\r\n                                            defaultValue={0} \r\n                                            precision={0.1} \r\n                                            readOnly\r\n                                            value={searchPlace?searchPlace.rating:0} \r\n                                            style={{marginLeft:5,marginRight:5}}\r\n                                        />\r\n                                        <Typography variant=\"caption\">\r\n                                           {searchPlace?`(${numeral(searchPlace.user_ratings_total).format(\"0,0\")})`:''}\r\n                                        </Typography>\r\n                                    </Grid>\r\n                                )}\r\n                                <Typography variant=\"caption\" style={{display:'block'}}>\r\n                                    {searchPlace?searchPlace.type:''}\r\n                                </Typography>\r\n                                <Typography variant=\"caption\">\r\n                                    {searchPlace?searchPlace.address:''}\r\n                                </Typography>\r\n                                </>\r\n                            }\r\n                        />\r\n                        <ListItemAvatar>\r\n                            <Avatar\r\n                                alt=\"image\"\r\n                                src={searchPlace?searchPlace.imageLink:''}\r\n                            />\r\n                        </ListItemAvatar>\r\n                    </ListItem>\r\n                    <Button\r\n                       color=\"warning\"\r\n                       startIcon={<MapIcon />}\r\n                       style={{padding:'5px 10px',marginTop:10,marginBottom:10}}\r\n                       onClick={()=>window.open(searchPlace.imageLink,'_blank')}\r\n                    >\r\n                       Open Image Link\r\n                    </Button>\r\n                    <TextValidator \r\n                        name=\"postcode\"\r\n                        placeholder=\"google place image url\"\r\n                        fullWidth\r\n                        value={searchPlace?searchPlace.image:''}\r\n                        onChange={handleURLChange}\r\n                        validators={['required']}\r\n                        errorMessages={['Image URL is required.']}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Grid container spacing={3}>\r\n                    <Grid item xs={12} sm={6}>\r\n                        <Button \r\n                            variant=\"contained\" \r\n                            color=\"primary\" \r\n                            fullWidth\r\n                            onClick={()=>setAddPlaceDialogOpen(false)}\r\n                        >Cancel</Button>\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                        <Button \r\n                            type=\"submit\"\r\n                            variant=\"contained\"\r\n                            color=\"warning\"\r\n                            autoFocus\r\n                            fullWidth\r\n                        >Add</Button>\r\n                    </Grid>\r\n                    </Grid>\r\n               </DialogActions>\r\n            </ValidatorForm>  \r\n        </Dialog>\r\n        <Dialog\r\n            open={deletePlaceDialogOpen}\r\n            onClose={()=>setDeletePlaceDialogOpen(false)}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle>\r\n                Delete Place\r\n                <IconButton\r\n                    aria-label=\"close\"\r\n                    onClick={()=>setDeletePlaceDialogOpen(false)}\r\n                    sx={{\r\n                        position: 'absolute',\r\n                        right: 8,\r\n                        top: 8,\r\n                        color: (theme) => theme.palette.grey[500],\r\n                    }}\r\n                >\r\n                  <CloseIcon />\r\n                </IconButton>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Typography variant=\"subtitle1\" align=\"center\" style={{marginTop:20}}>\r\n                   Are you sure you want to delete selected place?\r\n                </Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Grid container spacing={3}>\r\n                   <Grid item xs={12} sm={6}>\r\n                      <Button \r\n                         variant=\"contained\" \r\n                         color=\"primary\" \r\n                         fullWidth\r\n                         onClick={()=>setDeletePlaceDialogOpen(false)}\r\n                      >Cancel</Button>\r\n                   </Grid>\r\n                   <Grid item xs={12} sm={6}>\r\n                      <Button \r\n                         variant=\"contained\"\r\n                         color=\"warning\"\r\n                         autoFocus\r\n                         fullWidth\r\n                         onClick={handleDeletePlaceDialogOk}\r\n                      >Yes</Button>\r\n                   </Grid>\r\n                </Grid>\r\n            </DialogActions>\r\n        </Dialog>\r\n        </>\r\n   );\r\n\r\n}\r\n\r\nexport default SideBar;","import axios from \"axios\";\r\nimport { BASE_URL } from \"../utils/settings.js\";\r\n\r\nexport const getMarkers = async (params) => {\r\n  var result = null;\r\n    \r\n  let url = `${BASE_URL}/api/markers`;\r\n\r\n  await axios.post(url, params).then((response) => {\r\n      result = response.data;\r\n  }).catch((err) => {\r\n    result = {\r\n      status: \"failed\",\r\n      message: \"No internet connection\",\r\n    };\r\n  });\r\n  return result;\r\n}\r\n\r\nexport const getMarkerInfo = async (params) => {\r\n    var result = null;\r\n    \r\n    let url = `${BASE_URL}/api/marker/info`;\r\n\r\n    await axios.post(url, params).then((response) => {\r\n        result = response.data;\r\n    }).catch((err) => {\r\n      result = {\r\n        status: \"failed\",\r\n        message: \"No internet connection\",\r\n      };\r\n    });\r\n    return result;\r\n};\r\n\r\nexport const getTracking = async (params) => {\r\n  var result = null;\r\n  \r\n  let url = `${BASE_URL}/api/marker/tracking`;\r\n\r\n  await axios.post(url, params).then((response) => {\r\n      result = response.data;\r\n  }).catch((err) => {\r\n    result = {\r\n      status: \"failed\",\r\n      message: \"No internet connection\",\r\n    };\r\n  });\r\n  return result;\r\n};","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\r\nimport SystemSecurityUpdateGoodIcon from '@mui/icons-material/SystemSecurityUpdateGood';\r\nimport MoreHorizIcon from '@mui/icons-material/MoreHoriz';\r\n\r\nimport { timeFormat, secondsFromDate } from \"../../../utils/util.js\";\r\nimport { getMarkerInfo } from \"../../../services/marker.js\";\r\n\r\nconst useStyles = makeStyles({\r\n    paper:{\r\n        marginBottom:20,\r\n        '&.MuiPaper-root':{\r\n            padding:'30px 30px 20px 30px'\r\n        }\r\n    },\r\n    paperHeader:{\r\n        paddingBottom:10,\r\n        marginBottom:20,\r\n        borderBottom:'1px solid #e3ebf1'\r\n    },\r\n});\r\n\r\nfunction MarkerInfo(props){\r\n    const { params } = props;\r\n    const classes = useStyles();\r\n    const [markerInfo, setMarkerInfo] = useState(null);\r\n\r\n    useEffect(()=>{\r\n     \r\n        fetchMarkerInfo();\r\n          \r\n     }, []);\r\n\r\n    const fetchMarkerInfo = async () => {\r\n        let res = await getMarkerInfo({\r\n            date: params.date,\r\n            id: params.id\r\n        });\r\n        if(res.status === 'success'){\r\n            setMarkerInfo(res.result);\r\n        }else{\r\n            setMarkerInfo(null);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {markerInfo?\r\n            <>\r\n            <Paper className={classes.paper}>\r\n                <Grid container className={classes.paperHeader} alignItems=\"center\">\r\n                    <SystemSecurityUpdateGoodIcon color=\"warning\" style={{marginRight:10}} />\r\n                    <Typography variant=\"h6\">\r\n                        Device Identification\r\n                    </Typography>\r\n                </Grid>  \r\n                <Grid container spacing={1} alignItems=\"center\">\r\n                    <Grid item xs={4}>\r\n                        <Typography variant=\"subtitle2\">Device ID</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                        <Typography variant=\"caption\">{markerInfo.device_id}</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Typography variant=\"subtitle2\">Country</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                        <Typography variant=\"caption\">Japan</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Typography variant=\"subtitle2\">Device Type</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                        <Typography variant=\"caption\">{markerInfo.id_type}</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Typography variant=\"subtitle2\">Device OS</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                        <Typography variant=\"caption\">\r\n                            {markerInfo.id_type==='aaid'?'Android':'iOS'}\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>  \r\n            </Paper>\r\n            <Paper className={classes.paper}>\r\n                <Grid container className={classes.paperHeader} alignItems=\"center\">\r\n                    <LocationOnIcon color=\"warning\" style={{marginRight:10}} />\r\n                    <Typography variant=\"h6\">\r\n                        Device Location\r\n                    </Typography>\r\n                </Grid> \r\n                <Grid container spacing={1} alignItems=\"center\">\r\n                    <Grid item xs={4}>\r\n                        <Typography variant=\"subtitle2\">Timestamp</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                        <Typography variant=\"caption\">\r\n                            {`UTC ${timeFormat(markerInfo.timestamp/1000-secondsFromDate(params.date))} ${params.date}`}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Typography variant=\"subtitle2\">Longitude</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                        <Typography variant=\"caption\">\r\n                            {markerInfo.longitude}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Typography variant=\"subtitle2\">Latitude</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                        <Typography variant=\"caption\">\r\n                            {markerInfo.latitude}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                        <Typography variant=\"subtitle2\">Horizontal Accuracy</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={8}>\r\n                        <Typography variant=\"caption\">{`${markerInfo.horizontal_accuracy} m`}</Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n            <Paper className={classes.paper}>\r\n                <Grid container className={classes.paperHeader} alignItems=\"center\">\r\n                    <MoreHorizIcon color=\"warning\" style={{marginRight:10}} />\r\n                    <Typography variant=\"h6\">\r\n                        Others\r\n                    </Typography>\r\n                </Grid> \r\n                <Grid container justifyContent=\"center\">\r\n                    <Typography variant=\"caption\">\r\n                        There is no any other information.\r\n                    </Typography>\r\n                </Grid>\r\n            </Paper>    \r\n            </>\r\n            :\r\n            <Grid container justifyContent=\"center\">\r\n                <CircularProgress />\r\n            </Grid>\r\n        } \r\n        </>\r\n    );\r\n}\r\n\r\nexport default MarkerInfo;","import React from 'react';\r\nimport Grid from '@mui/material/Grid';\r\nimport Typography from '@mui/material/Typography';\r\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\r\n\r\nimport { timeFormat, secondsFromDate } from \"../../../utils/util.js\";\r\n\r\nfunction PopupInfo(props){\r\n  const { params, info } = props;\r\n  return (\r\n    <Grid container alignItems=\"center\" style={{maxWidth:350,padding:10}}>\r\n        <Grid item xs={12} container \r\n              style={{\r\n                  paddingBottom:10,\r\n                  marginBottom:10,\r\n                  borderBottom:'1px solid #e3ebf1'\r\n              }}\r\n        >\r\n           <LocationOnIcon color=\"warning\" style={{marginRight:10}} />\r\n           <Typography variant=\"h6\">\r\n               Device Location/Time\r\n            </Typography>  \r\n        </Grid>\r\n        <Grid item xs={4}>\r\n            <Typography variant=\"subtitle2\">Time</Typography>\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n            <Typography variant=\"caption\">\r\n            {`UTC ${timeFormat(parseInt(info['timestamp']/1000)-secondsFromDate(params.date))} ${params.date}`}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Longitude</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n                {info['longitude']}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Latitude</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n                {info['latitude']}\r\n            </Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"subtitle2\">Horizontal Accuracy</Typography>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <Typography variant=\"caption\">\r\n              {`${info['horizontal_accuracy']} m`}\r\n            </Typography>\r\n        </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default PopupInfo;","import React, { useEffect, useState, useRef, useCallback} from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\nimport Slider from '@mui/material/Slider';\r\n\r\nimport ReactMapGL, { \r\n    Source,\r\n    Layer,\r\n    Popup,\r\n    WebMercatorViewport\r\n} from 'react-map-gl';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport { MAPBOX_ACCESS_TOKEN } from \"../../../utils/settings.js\";\r\n\r\nimport * as turf from '@turf/turf';\r\n\r\nimport iconMarker from \"../../../assets/images/marker-icon.png\";\r\n\r\nimport { timeFormat, secondsFromDate } from \"../../../utils/util.js\";\r\nimport { getTracking } from \"../../../services/marker.js\";\r\n\r\nimport PopupInfo from \"./PopupInfo.js\";\r\n\r\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\r\n\r\nconst useStyles = makeStyles({\r\n    mapContainer:{\r\n        flex:1,\r\n        position:'relative'\r\n     },\r\n     mapDiv:{\r\n         border:'1px solid #e3ebf1',\r\n        '& .mapboxgl-ctrl-logo': {\r\n            display: 'none'\r\n         }\r\n     },\r\n     timeslider:{\r\n         position:'absolute',\r\n         bottom:10,\r\n         left:0,\r\n         right:0,\r\n         '& .MuiPaper-root':{\r\n            width:'70%',\r\n            paddingTop:10,\r\n            paddingBottom:5,\r\n            paddingLeft:40,\r\n            paddingRight:40,\r\n            backgroundColor:'rgba(255,255,255,0.7)',\r\n         },\r\n         '&.MuiSlider-root':{\r\n           //position:'absolute'\r\n           width:'60%'\r\n        }\r\n     }\r\n});\r\n\r\nfunction TrackingMap(props){\r\n    const classes = useStyles();\r\n    const { params } = props;\r\n    const mapRef = useRef(null);\r\n    const [viewport, setViewport] = useState({\r\n        longitude: params.geometry.coordinates[0],\r\n        latitude: params.geometry.coordinates[1],\r\n        zoom:15\r\n    });\r\n    const [interactiveLayerIds, setInteractiveLayerIds] = useState(null);\r\n    const [sliderProps, setSliderProps] = useState({\r\n        min:0,\r\n        max:100,\r\n        step: 1,\r\n        defaultValue:0,\r\n        marks:[]\r\n    });\r\n    \r\n    const [sliderValue, setSliderValue] = useState(0);\r\n    const [sliderLabel, setSliderLabel] = useState('');\r\n    //const [isLoading, setIsLoading] = useState(true);\r\n    const [points, setPoints] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    const [trackPoints, setTrackPoints] = useState([]);\r\n    const [trackPoint, setTrackPoint] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    const [trackLine, setTrackLine] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    \r\n    const [hoverInfo, setHoverInfo] = useState(null);\r\n\r\n    const onHover = useCallback(e => {\r\n        var newHoverInfo = null;\r\n        if(e.features && e.features.length>0){\r\n            const feature = e.features[0];\r\n            if(feature.layer.id==='points-layer'){\r\n                newHoverInfo = {\r\n                    longitude: e.lngLat[0],\r\n                    latitude: e.lngLat[1],\r\n                    data: feature.properties\r\n                }\r\n            }\r\n        }\r\n        setHoverInfo(newHoverInfo);\r\n    }, []);\r\n\r\n    const handleSliderChange = (event, newValue) => {\r\n        setSliderValue(newValue);\r\n        setSliderLabel(`UTC ${timeFormat(newValue-secondsFromDate(params.date))} ${params.date}`);\r\n\r\n        // current track line\r\n        let newTrackLine={\r\n            type: 'FeatureCollection',\r\n            features:[{\r\n                type:'Feature',\r\n                geometry:{\r\n                    type:'LineString',\r\n                    coordinates:[]\r\n                },\r\n                properties:{}\r\n            }]\r\n        }\r\n        let newPoint = null;\r\n        trackPoints.forEach(point=>{\r\n            if(point.time<=newValue){\r\n                newTrackLine.features[0].geometry.coordinates.push([\r\n                    point.longitude,\r\n                    point.latitude,\r\n                ]);\r\n                newPoint = point;\r\n            }else{\r\n                return;\r\n            }\r\n        });\r\n        setTrackLine(newTrackLine);\r\n\r\n        // current track point\r\n        if(newPoint){\r\n            let newTrackPoint={\r\n                type: 'FeatureCollection',\r\n                features:[{\r\n                    type:'Feature',\r\n                    geometry:{\r\n                        type:'Point',\r\n                        coordinates:[newPoint.longitude, newPoint.latitude]\r\n                    },\r\n                    properties:{heading: newPoint.heading}\r\n                }]\r\n            }\r\n            setTrackPoint(newTrackPoint);\r\n        }\r\n    };\r\n\r\n    const fetchTrackingData = async () => {\r\n        let res = await getTracking({\r\n            date: params.date,\r\n            id: params.id\r\n        });\r\n\r\n        if(res.status === 'success'){\r\n            let result = res.result;\r\n            // full extent map\r\n            var bbox = turf.bbox(result);\r\n            const map = mapRef.current.getMap();\r\n            const { longitude, latitude, zoom } = new WebMercatorViewport({\r\n                ...viewport,\r\n                width: map.getCanvas().width,\r\n                height: map.getCanvas().height,\r\n                }).fitBounds(\r\n                [\r\n                    [bbox[0], bbox[1]],\r\n                    [bbox[2], bbox[3]],\r\n                ],\r\n                { padding: 40 }\r\n            );\r\n            setViewport({\r\n                ...viewport,\r\n                longitude: longitude,\r\n                latitude: latitude,\r\n                zoom: zoom>20?20:zoom-1,\r\n            });\r\n\r\n            // measured points\r\n            setPoints(result);\r\n            setInteractiveLayerIds(['points-layer']);\r\n\r\n            let features = result.features;\r\n\r\n            // current track point\r\n            let t = 0;\r\n            features.forEach(feature=>{\r\n                if(feature.properties.id == params.id){\r\n                    setTrackPoint({\r\n                        type:'FeatureCollection',\r\n                        features:[feature]\r\n                    });\r\n                    t = parseInt(feature.properties[\"timestamp\"]/1000);\r\n                    setSliderValue(t);\r\n                    setSliderLabel(`UTC ${timeFormat(t-secondsFromDate(params.date))} ${params.date}`);\r\n                    return;\r\n                }\r\n            });\r\n\r\n            // calculate track points\r\n            let newTrackPoints = [];\r\n            for(let i=0;i<features.length-1;i++){\r\n                var t1 = parseInt(features[i].properties['timestamp']/1000);\r\n                var t2 = parseInt(features[i+1].properties['timestamp']/1000);\r\n                var dm=(t2-t1)/30;\r\n                var bearing = turf.bearing(features[i], features[i+1]);\r\n                if(dm>1){\r\n                    var k=0;\r\n                    while(t1<t2){\r\n                        var from_lat=parseFloat(features[i].properties['latitude']);\r\n                        var from_lng=parseFloat(features[i].properties['longitude']);\r\n                        var to_lat=parseFloat(features[i+1].properties['latitude']);\r\n                        var to_lng=parseFloat(features[i+1].properties['longitude']);\r\n                        var lat=from_lat+(to_lat-from_lat)*k/dm;\r\n                        var lng=from_lng+(to_lng-from_lng)*k/dm;\r\n                        newTrackPoints.push({\r\n                           latitude: lat,\r\n                           longitude: lng,\r\n                           time: t1,\r\n                           heading: turf.bearingToAzimuth(bearing),\r\n                        });\r\n                        t1+=30;\r\n                        k++;\r\n                    }\r\n                }else{\r\n                    newTrackPoints.push({\r\n                        latitude: parseFloat(features[i].properties['latitude']),\r\n                        longitude: parseFloat(features[i].properties['longitude']),\r\n                        time: t1,\r\n                        heading: turf.bearingToAzimuth(bearing),\r\n                    });\r\n                }\r\n            }\r\n\r\n            setTrackPoints(newTrackPoints);\r\n\r\n            // current track line\r\n            let newTrackLine={\r\n                type: 'FeatureCollection',\r\n                features:[{\r\n                    type:'Feature',\r\n                    geometry:{\r\n                        type:'LineString',\r\n                        coordinates:[]\r\n                    },\r\n                    properties:{}\r\n                }]\r\n            }\r\n            newTrackPoints.forEach(point=>{\r\n                if(point.time<=t){\r\n                    newTrackLine.features[0].geometry.coordinates.push([\r\n                        point.longitude,\r\n                        point.latitude,\r\n                    ]);\r\n                }else{\r\n                    return;\r\n                }\r\n            });\r\n            setTrackLine(newTrackLine);\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const map = mapRef.current.getMap();\r\n        \r\n        map.loadImage(iconMarker, (error, image) => {\r\n            if (error) throw error;\r\n            // Add the image to the map style.\r\n            map.addImage('marker-icon', image);\r\n        });\r\n\r\n        const t0 = secondsFromDate(params.date);\r\n        setSliderProps({\r\n        min: t0,\r\n        max: t0+86399,\r\n        defaultValue:t0+86399,\r\n        step: 30,\r\n        marks:[\r\n            { value: t0, label: '0'},\r\n            { value: t0+3*3600, label: '3'},\r\n            { value: t0+6*3600, label: '6'},\r\n            { value: t0+9*3600, label: '9'},\r\n            { value: t0+12*3600, label: '12'},\r\n            { value: t0+15*3600, label: '15'},\r\n            { value: t0+18*3600, label: '18'},\r\n            { value: t0+21*3600, label: '21'},\r\n            { value: t0+24*3600, label: '24'}\r\n        ]\r\n        });\r\n        setSliderValue(t0);\r\n        setSliderLabel(`UTC ${timeFormat(0)} ${params.date}`);\r\n        \r\n        fetchTrackingData();\r\n        \r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.mapContainer}>\r\n            <ReactMapGL className={classes.mapDiv}\r\n                {...viewport}    \r\n                width=\"100%\"\r\n                height=\"100%\"\r\n                mapStyle=\"mapbox://styles/mapbox/light-v10\"\r\n                mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN}\r\n                attributionControl={false}\r\n                maxZoom={20}\r\n                //minZoom={14}\r\n                ref={mapRef}\r\n                interactiveLayerIds={interactiveLayerIds}\r\n                onViewportChange={setViewport}\r\n                onHover={onHover}\r\n            >\r\n                <Source id=\"trackLine\" type=\"geojson\" data={trackLine}>\r\n                    <Layer id=\"trackLine\" type=\"line\"\r\n                        filter={['==', '$type', 'LineString']}\r\n                        paint={{\r\n                            'line-color': 'cyan',\r\n                            'line-opacity': 0.75,\r\n                            'line-width': 4\r\n                        }}\r\n                    />\r\n                </Source>   \r\n                <Source id=\"points\" type=\"geojson\" data={points}>\r\n                    <Layer\r\n                        id='points-layer'\r\n                        type='circle'\r\n                        source='points'\r\n                        paint={{\r\n                          'circle-color': '#1976d2',\r\n                          'circle-radius': 6\r\n                        }}\r\n                    />\r\n                </Source>\r\n                <Source id=\"trackPoint\" type=\"geojson\" data={trackPoint}>\r\n                    <Layer\r\n                        id='track-point-layer'\r\n                        type='symbol'\r\n                        source='trackPoint'\r\n                        layout={{\r\n                            'icon-image': 'marker-icon',\r\n                            'icon-size': 0.6,\r\n                            'icon-rotate': [\"get\",\"heading\"],\r\n                            'icon-allow-overlap':true,\r\n                            'icon-ignore-placement': true,\r\n                            'icon-rotation-alignment':'map', // viewport\r\n                            'icon-pitch-alignment':'viewport'\r\n                        }}\r\n                    />\r\n                </Source>\r\n                {hoverInfo && (\r\n                    <Popup\r\n                        longitude={hoverInfo.longitude}\r\n                        latitude={hoverInfo.latitude}\r\n                        closeButton={false}\r\n                    >\r\n                       <PopupInfo info={hoverInfo.data} params={params} />\r\n                    </Popup>\r\n                )}\r\n            </ReactMapGL>\r\n            <Grid container className={classes.timeslider} justifyContent=\"center\">\r\n                <Paper>\r\n                    <Typography variant=\"h6\" align=\"center\">\r\n                        {sliderLabel}\r\n                    </Typography>\r\n                    <Slider\r\n                        aria-label=\"track time\"\r\n                        value={sliderValue}\r\n                        onChange={handleSliderChange}\r\n                        //valueLabelDisplay=\"auto\"\r\n                        style={{color:'#ff844b'}}\r\n                        {...sliderProps}\r\n                    />\r\n                </Paper>\r\n            </Grid>\r\n        </div>  \r\n    );\r\n}\r\n\r\nexport default TrackingMap;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAyCAMAAAAKuilWAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAj1QTFRFAAAAUbvW/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvW/4RL/4RL/4RLUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWUbvWtXpTgAAAAL90Uk5TAAAJgbcodv/CBxrn/muw8hhClgXS/VYBiNEOIOxmBLv5LlerCNxRnOAUNPeJAMz7N2y+F+93r+k/+I0SyplgMRMDAg0lT4DL9VT81XMhCRIUDgIRTrPPBgr0hAsaYrfd5+njzYI0AUR49tc1Oa/6/9RnBRBIgwqF/cokk9NJEL/+60MIvO48A60dTZwGuvA+WaTx4DYNaIspkx/70iiW6jfvjablLS/2fHDFC4zWfcZQ2/WKYdn87ZQbbJGomkgzCm4xAAAB9ElEQVR4nGNgIBkw4pVlYmZhxaubjZ2dgxOPAi5udnYeXjwK+NiBgF8Ap7wgOxgICeOQFxCBKBAVwy4vLsEOBZJSWBVIy8AU8Mhik5eTZ4cDBUUsCpR4EArYlcUx5FVUkeTZRdUwXKjOjgI0NNEUaGmjKmDX0UV1oR6aPLu+AYoCQ3R5dnYjZHcam2AqYDdFyAubYZFnN5eGK7CwxKaA3QrmTmsbMJ/b1s7ewdHJ2cXVzV0UJODhCZFndPMCBr+3j68TA6Off0BgEINucEgoyNCwcLCCiEhg4EdFMzDExMbFJyQmJaekpjE4pWsAVWSAFQRnsmdlMzDk5Oblw0BBYRFDsboou4gjWEVJqSZDWXlFPjKorGJwrK6phfujrr4hHxU0NjHoOsHlm1vyMUBrGyKg2jsw5fPzEzvhCrrysCnI726Hyvf0YpXP7+uHKpiA3YD8/Fyogok45PMnNUMUTMalIH8KWH4qehAgwDSwgiqc8vnTwQpm4FYwE6xgFm4F5ZBgmI1TwQSIL+bgVDAXomAeLvn50LBesBCHgkWwyFyMXX7JUlhsLluOVcEKeHQzrsQWmKtWI1IMwxpM+bUBSPIMResq0OTXdzKggLQNG5GlN22eyoAOerZs3QaV3r5jJ4Y0ON5Td+2euGfvin0xaVjlsQMAFN44ROMgIzgAAAAASUVORK5CYII=\"","import React, { useState } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Drawer from '@mui/material/Drawer';\r\nimport Typography from '@mui/material/Typography';\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\r\n\r\nimport PermDeviceInformationIcon from '@mui/icons-material/PermDeviceInformation';\r\n\r\nimport MarkerInfo from \"./MarkerInfo.js\";\r\nimport TrackingMap from './TrackingMap.js';\r\n\r\nconst useStyles = makeStyles({\r\n    drawer:{\r\n       '& .MuiBackdrop-root':{\r\n           //position:'absolute'\r\n           //backgroundColor:'transparent' //'rgba(0,0,0,0.2)'\r\n       },\r\n       '&>.MuiPaper-root':{\r\n           //position: 'absolute',\r\n           display:'flex',\r\n           flexDirection:'column',\r\n           width: '50%',\r\n           minWidth:400,\r\n           padding:'20px 40px',\r\n           backgroundColor:'#f1f6fa',\r\n           boxSizing:'border-box',\r\n           overflowX:'hidden',\r\n           overflowY:'auto'\r\n       }\r\n    },\r\n    drawerHeader:{\r\n      display:'flex',\r\n      flexDirection:'row',\r\n      paddingTop:20,\r\n      paddingBottom:16,\r\n      marginBottom:20,\r\n      borderBottom:'1px solid #e3ebf1'\r\n    },\r\n });\r\n\r\nfunction MarkerPanel(props) {\r\n    const classes = useStyles();\r\n    const {\r\n        markerPanelInfo,\r\n        setMarkerPanelInfo\r\n    } = props;\r\n\r\n    const [toggleValue, setToggleValue] = useState('properties');\r\n    \r\n    const toggleDrawer = (open) => (event) => {\r\n        if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n            return;\r\n        }\r\n        setMarkerPanelInfo({\r\n            ...markerPanelInfo,\r\n            open: open\r\n        });\r\n    };\r\n\r\n    const handleToggleButton = (event, newValue) => {\r\n        if(newValue !== null){\r\n          setToggleValue(newValue);\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <Drawer\r\n            className={classes.drawer}\r\n            anchor=\"left\"\r\n            open={true}\r\n            onClose={toggleDrawer(false)}\r\n        >\r\n          <Grid container spacing={1} className={classes.drawerHeader} alignItems=\"center\">\r\n                <Grid item md={6} xs={12} container>\r\n                    <PermDeviceInformationIcon color=\"warning\" style={{marginRight:10}}/>\r\n                    <Typography variant=\"h6\" style={{flex:1}}>\r\n                        Device Information\r\n                    </Typography>\r\n                </Grid>    \r\n                <Grid item md={6} xs={12} container justifyContent=\"flex-end\">\r\n                    <ToggleButtonGroup \r\n                        value={toggleValue} exclusive\r\n                        onChange={handleToggleButton} aria-label=\"marker button group\"\r\n                    >\r\n                        <ToggleButton value=\"properties\" aria-label=\"Properties\">\r\n                        Properties\r\n                        </ToggleButton>\r\n                        <ToggleButton value=\"tracking\" aria-label=\"Tracking\">\r\n                        Tracking\r\n                        </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                </Grid>    \r\n          </Grid>\r\n          {toggleValue === 'properties' && (\r\n             <MarkerInfo params={markerPanelInfo} />\r\n          )}\r\n          {toggleValue === 'tracking' && (\r\n             <TrackingMap params={markerPanelInfo} />\r\n          )}\r\n        </Drawer>\r\n   );\r\n}\r\n\r\nexport default MarkerPanel;","\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\nimport LinearProgress from '@mui/material/LinearProgress';\r\n\r\nimport ReactMapGL, { \r\n           Source,\r\n           Layer,\r\n           Marker,\r\n           ScaleControl,\r\n           NavigationControl,\r\n           WebMercatorViewport,\r\n           FlyToInterpolator\r\n       } from 'react-map-gl';\r\n\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport mapboxgl from \"mapbox-gl\";\r\n\r\nimport { MAPBOX_ACCESS_TOKEN, DEFAULT_VIEWPORT } from \"../../utils/settings.js\";\r\nimport { dateFormat } from \"../../utils/util.js\";\r\nimport { getMarkers } from \"../../services/marker.js\";\r\n//import { getClusters } from \"../../services/cluster.js\";\r\n//import { getCounts } from \"../../services/counts.js\";\r\n\r\nimport iconMarker from \"../../assets/images/user-icon.png\";\r\nimport iconSearch from \"../../assets/images/home-icon.png\";\r\n\r\nimport MarkerPanel from \"./MarkerPanel/MarkerPanel.js\";\r\n\r\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\r\n\r\nconst useStyles = makeStyles({\r\n   mapDiv:{\r\n      '& .mapboxgl-ctrl-logo': {\r\n         display: 'none'\r\n       }\r\n   },\r\n   addressLabel:{\r\n      display:'flex',\r\n      alignItems:'center',\r\n      padding:'0 10px',\r\n      width:240,\r\n      height:60,\r\n      color:'#000',\r\n      fontSize:14,\r\n      lineHeight:'14px',\r\n      //borderRadius:4,\r\n      borderLeft:'2px solid #ff0000',\r\n      backgroundColor:'rgba(255,255,255,0.8)',\r\n      pointerEvents:'none'\r\n   }\r\n});\r\n\r\nlet timeout = null;\r\n\r\nfunction Map(props) {\r\n    const classes = useStyles();\r\n    const { \r\n       searchPlace,\r\n       filter,\r\n       renderMode,\r\n       setCounts\r\n    } = props;\r\n\r\n    const mapRef = useRef(null);\r\n    const [viewport, setViewport] = useState(DEFAULT_VIEWPORT);\r\n    const [interactiveLayerIds, setInteractiveLayerIds] = useState([]);\r\n    const [dataSource, setDataSource] = useState({\r\n        type: 'FeatureCollection',\r\n        features:[]\r\n    });\r\n    const [showLoading, setShowLoading] = useState(true);\r\n    const [markerPanelInfo, setMarkerPanelInfo] = useState(false);\r\n\r\n    const handleClick = async (e) => {\r\n        if(e.features && e.features.length>0){\r\n            const feature = e.features[0];\r\n            if(feature.layer.id === 'cluster-layer'){\r\n                setViewport({\r\n                    ...viewport,\r\n                    longitude: feature.geometry.coordinates[0],\r\n                    latitude: feature.geometry.coordinates[1],\r\n                    zoom: viewport.zoom + 1,\r\n                    transitionDuration: 500\r\n                });\r\n            }else if(feature.layer.id === 'unclustered-point-layer'){\r\n                setMarkerPanelInfo({\r\n                    ...markerPanelInfo,\r\n                    open: true,\r\n                    date: dateFormat(filter.date),\r\n                    id: feature.properties[\"id\"],\r\n                    geometry: feature.geometry\r\n                });\r\n               \r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n\r\n        const map = mapRef.current.getMap();\r\n        \r\n        map.loadImage(iconMarker, (error, image) => {\r\n            if (error) throw error;\r\n            // Add the image to the map style.\r\n            map.addImage('marker-icon', image);\r\n        });\r\n        \r\n        return () => {\r\n            if(map.hasImage('marker-icon')){\r\n                map.removeImage('marker-icon');\r\n            }\r\n        }\r\n\r\n    }, []);\r\n\r\n    useEffect(()=>{\r\n        if(searchPlace){\r\n            const vp = new WebMercatorViewport(viewport);\r\n            const { zoom } = vp.fitBounds( //const {longitude, latitude, zoom}\r\n                [ \r\n                    [searchPlace.viewport[0], searchPlace.viewport[1]],\r\n                    [searchPlace.viewport[2], searchPlace.viewport[3]]\r\n                ],\r\n                { padding: 40 }\r\n            );\r\n            setViewport({\r\n                ...viewport,\r\n                longitude:searchPlace.location[0],\r\n                latitude:searchPlace.location[1],\r\n                zoom,\r\n                transitionInterpolator: new FlyToInterpolator(),\r\n                transitionDuration: 1000\r\n            });\r\n        }\r\n    }, [searchPlace]);\r\n\r\n    useEffect(()=>{\r\n\r\n       const map = mapRef.current.getMap();\r\n\r\n       map.on('moveend', mapDataCallback);\r\n\r\n       mapDataCallback();\r\n\r\n       return () => map.off('moveend', mapDataCallback);\r\n\r\n    }, [filter, renderMode]);\r\n\r\n    useEffect(()=>{\r\n        let newCounts = [];\r\n        newCounts['TOTAL'] = dataSource.features.length;\r\n        dataSource.features.forEach(feature=>{\r\n            if(newCounts[feature.properties.id_type]){\r\n                newCounts[feature.properties.id_type] += 1; \r\n            }else{\r\n                newCounts[feature.properties.id_type] = 1;\r\n            }\r\n        });\r\n        setCounts(newCounts);\r\n    }, [dataSource]);\r\n\r\n    const mapDataCallback = () => {\r\n        const map = mapRef.current.getMap();\r\n        setInteractiveLayerIds([]);\r\n        if(timeout){\r\n            clearTimeout(timeout);\r\n        }\r\n        timeout = setTimeout(async () => {\r\n           setShowLoading(true);\r\n           let poiLocations = [];\r\n           if(filter.category !== 'All Categories'){\r\n                const poiFeatures = map.queryRenderedFeatures({ layers: ['poi-label'] });\r\n                let categoryFeatures = poiFeatures.filter(feature=>feature.properties[\"maki\"] === filter.category.toLowerCase());\r\n                categoryFeatures.forEach(feature=>{\r\n                   poiLocations.push(feature.geometry.coordinates);\r\n                });\r\n                if(poiLocations.length === 0){\r\n                    setDataSource({\r\n                        type: 'FeatureCollection',\r\n                        features:[]\r\n                    });\r\n                    setCounts([]);\r\n                    setShowLoading(false);\r\n                    return;\r\n                }\r\n           }\r\n           \r\n           let newDataSource = {\r\n                type: 'FeatureCollection',\r\n                features:[]\r\n           };\r\n           let res = await getMarkers({\r\n                date: dateFormat(filter.date),\r\n                timeRange: filter.timeRange,\r\n                zoom: map.getZoom(),\r\n                bounds: map.getBounds().toArray().flat(),\r\n                poiLocations: poiLocations,\r\n                poiRadius: filter.category_distance\r\n            });\r\n\r\n            if(res.status === 'success'){\r\n                if(res.result && res.result.features){\r\n                    newDataSource = res.result;\r\n                }\r\n            }\r\n            setDataSource(newDataSource);\r\n            if(renderMode === 'cluster'){\r\n                setInteractiveLayerIds(['cluster-layer','unclustered-point-layer']);\r\n            }else{\r\n                setInteractiveLayerIds(['unclustered-point-layer']);\r\n            }\r\n\r\n            setShowLoading(false);\r\n\r\n        }, 500);\r\n    }\r\n\r\n    return (\r\n        <ReactMapGL className={classes.mapDiv}\r\n            {...viewport}    \r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            mapStyle=\"mapbox://styles/mapbox/streets-v11\"\r\n            //mapStyle=\"mapbox://styles/mapbox/satellite-streets-v11\"\r\n            mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN}\r\n            ref={mapRef}\r\n            attributionControl={false}\r\n            maxZoom={24}\r\n            minZoom={16}\r\n            onViewportChange={setViewport}\r\n            interactiveLayerIds={interactiveLayerIds}\r\n            onClick={handleClick}\r\n        >\r\n            {renderMode==='cluster' && (\r\n                <Source\r\n                    id=\"clusterSource\"\r\n                    type=\"geojson\"\r\n                    data={dataSource}\r\n                    cluster={true}\r\n                    clusterMaxZoom={18}\r\n                    clusterRadius={50}\r\n                >\r\n                    <Layer\r\n                        id='cluster-layer'\r\n                        type='circle'\r\n                        source='clusterSource'\r\n                        filter={['has', 'point_count']}\r\n                        //filter={['>', 'point_count', 1]}\r\n                        paint={{\r\n                          'circle-color': ['step', ['get', 'point_count'], '#51bbd6', 100, '#f1f075', 750, '#f28cb1'],\r\n                          'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40]\r\n                        }}\r\n                    />\r\n                    <Layer \r\n                        id='cluster-count-layer'\r\n                        type='symbol'\r\n                        source='clusterSource'\r\n                        filter={['has', 'point_count']}\r\n                        //filter={['>', 'point_count', 1]}\r\n                        layout={{\r\n                          'text-field': '{point_count_abbreviated}',\r\n                          'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n                          'text-size': 12\r\n                        }}\r\n                    />\r\n                    <Layer\r\n                        id='unclustered-point-layer'\r\n                        type='symbol'\r\n                        source='clusterSource'\r\n                        filter={['!', ['has', 'point_count']]}\r\n                        //filter={['==', 'point_count', 1]}\r\n                        layout={{\r\n                           'icon-image': 'marker-icon',\r\n                           'icon-size': 0.5,\r\n                           'icon-offset':[0, -32],\r\n                           //'icon-rotate': [\"get\",\"heading\"],\r\n                           'icon-allow-overlap':true,\r\n                           'icon-ignore-placement': true,\r\n                           //'icon-rotation-alignment':'map', // viewport\r\n                           //'icon-pitch-alignment':'viewport'\r\n                        }}\r\n                    />\r\n                    {markerPanelInfo.open && (\r\n                        <Layer\r\n                            id='select-point-layer'\r\n                            type='symbol'\r\n                            source='clusterSource'\r\n                            filter={['==', 'id', markerPanelInfo.id]}\r\n                            layout={{\r\n                                'icon-image': 'marker-icon',\r\n                                'icon-size': 0.7,\r\n                                'icon-offset':[0, -32],\r\n                                'icon-allow-overlap':true,\r\n                                'icon-ignore-placement': true,\r\n                             }}\r\n                        />\r\n                    )}\r\n                </Source>\r\n            )}\r\n            {renderMode==='heatmap' && (\r\n                <Source\r\n                    id=\"heatmapSource\"\r\n                    type=\"geojson\"\r\n                    data={dataSource}\r\n                >\r\n                    <Layer \r\n                       id='heatmap-layer'\r\n                       type='heatmap'\r\n                       source='heatmapSource'\r\n                       maxzoom={19}\r\n                       paint={{\r\n                         'heatmap-weight':[\r\n                            'interpolate',['linear'], ['zoom'],\r\n                            12,\r\n                            0.2,\r\n                            19,\r\n                            1\r\n                          ],\r\n                         'heatmap-intensity': [\r\n                            'interpolate',['linear'], ['zoom'],\r\n                            12,\r\n                            5,\r\n                            19,\r\n                            1\r\n                          ],\r\n                          'heatmap-color': [\r\n                            'interpolate',['linear'],['heatmap-density'],\r\n                            0,\r\n                            'rgba(33,102,172,0)',\r\n                            0.2,\r\n                            'rgb(103,169,207)',\r\n                            0.4,\r\n                            'rgb(209,229,240)',\r\n                            0.6,\r\n                            'rgb(166,189,219)',\r\n                            0.8,\r\n                            'rgb(103,169,207)',\r\n                            1,\r\n                            'rgb(28,144,153)'\r\n                          ],\r\n                         'heatmap-radius': [\r\n                            'interpolate',['linear'],['zoom'],\r\n                            12,\r\n                            16,\r\n                            19,\r\n                            40\r\n                         ],\r\n                         'heatmap-opacity': [\r\n                            'interpolate',['linear'],['zoom'],\r\n                            12,\r\n                            0.9,\r\n                            19,\r\n                            0.5\r\n                         ]\r\n                       }}\r\n                    />\r\n                    <Layer\r\n                        id='unclustered-point-layer'\r\n                        type='symbol'\r\n                        source='heatmapSource'\r\n                        minzoom={18}\r\n                        layout={{\r\n                            'icon-image': 'marker-icon',\r\n                            'icon-size': 0.5,\r\n                            'icon-offset':[0, -32],\r\n                            //'icon-rotate': [\"get\",\"heading\"],\r\n                            'icon-allow-overlap':true,\r\n                            'icon-ignore-placement': true,\r\n                            //'icon-rotation-alignment':'map', // viewport\r\n                            //'icon-pitch-alignment':'viewport'\r\n                        }}\r\n                    />\r\n                    {markerPanelInfo.open && (\r\n                        <Layer\r\n                            id='select-point-layer'\r\n                            type='symbol'\r\n                            source='heatmapSource'\r\n                            filter={['==', 'id', markerPanelInfo.id]}\r\n                            layout={{\r\n                                'icon-image': 'marker-icon',\r\n                                'icon-size': 0.7,\r\n                                'icon-offset':[0, -32],\r\n                                'icon-allow-overlap':true,\r\n                                'icon-ignore-placement': true,\r\n                            }}\r\n                        />\r\n                    )}\r\n                </Source>\r\n            )}\r\n            <NavigationControl style={{ top:70,right:10}}/>\r\n            <ScaleControl style={{bottom:10,left:10}} />\r\n            {searchPlace && (\r\n                <>\r\n                <Marker longitude={searchPlace.location[0]} latitude={searchPlace.location[1]} offsetLeft={-16} offsetTop={-44}>\r\n                    <img src={iconSearch} alt=\"marker\" />\r\n                </Marker>\r\n                <Marker longitude={searchPlace.location[0]} latitude={searchPlace.location[1]} offsetLeft={20} offsetTop={-56}>\r\n                    <div className={classes.addressLabel}>{searchPlace.address}</div>\r\n                </Marker>\r\n                </>\r\n            )}\r\n            {markerPanelInfo.open && (\r\n                <MarkerPanel\r\n                    markerPanelInfo={markerPanelInfo}    \r\n                    setMarkerPanelInfo={setMarkerPanelInfo}\r\n                />\r\n            )}\r\n            {showLoading && <LinearProgress />}\r\n        </ReactMapGL>\r\n    );\r\n}\r\n\r\nexport default Map;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAArJQTFRFO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzRaC3ptLd4/H0/P7++fz93+/znc3ZQZ62O5uzO5uzO5uzXKzA6PT2/v///////f//4O/zUaa7O5uzO5uzRKC33u7yQZ61O5uzpdHch8HQO5uzO5uz4vD0rtXgR6G3S6O5wuDn0+juO5uzO5uz+/3+TaS69vv8O5uzO5uz+Pz8U6e99fr7O5uzO5uz3e7ywuDo0+nuyuTrO5uzO5uzmszYfLzNO5uzO5uzzOXrP520O5uzO5uzSqO5rdXf8/n78fj6otDcO5uzO5uzrdbg8Pj6o9DcO5uzO5uzi8TS7/j5d7nKO5uz8/n67PX3hsHQj8bU8vj66vX3O5uz7/f56/X3h8LQQp+2kMfU5vP2d7rK7fb47PX4Z7LEO5uzO5uzaLLFWqu/O5uzRqG35/P2Q5+2O5uzxeLpstjhO5uzO5uzl8rXgL7OO5uzO5uzabLF+vz9z+ft9fv8O5uzO5uzR6G46fT3Uaa8W6zAO5uzx+Ppc7jJiMLRs9jhmMvXo9Dbu9zlf77OO5uzO5uz8vn60ejtQJ616/X47vb55fL2O5uzd7rLaLLE5vL2O5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uzO5uz3dPDsgAAAOZ0Uk5TAAIBAwQ6gbLQ5/b99eXOrn0zRazs/6Q8a9nRXFDcPxD+nw3kKVvxRGf7+U5DO/IqEdgMsZNU//////////85Bd7/////////zHD///9M///JSv///////zKv////h+/////mPv////8rhv//WrX//47T//////++6////+H6////+P///////wb/////////////6tL//7v///+K//9WN///J+n/////3af/////fP//////////vF7///////9A////oH7HCh7XxguQuknEuS4oZUizOPwlqYQXD3/LB1H3G5hz3y+uZs2QAAADlElEQVR4nJ2X+UOMQRzG3313S22SMJJIkqJSCbkr2k0UQrkKXch9lXJfIVSOEDly37lvObvc5L5v/4d5q9XOfL/ztswPs+++z/P5vjPPvu87s5KkkSUt0umsrBvY2Ort7BraN3Jo7KgT+QTnmzRtRphm29wJ5bUSckrXwpkgraWLDjFL8FSr1hheXcIVDgLwbRzcRDwhbm3d6wvBqp0YV5qzhzrfXq/OE+LppRZih4718YR4+4hDdLGApxV8RSF2qnf8Nc3PHw8hwN4ynpDOgWiIXSzlCemKhdgN/v5B3Xv07NW7T18guAXDEENCga1f/zCD0WAMCx8ApAgNCHEgMA2q5Q3GyCggDuZD0MAHYIiJNxiHAjFay4U4DFjIcIqOiIkdSYuMgupoLsQx0DKWXjqGkDg6iHiojmNDDBkPLRPopWMJSaCTSIRqkoYJMRk6SAq99MS4hEl0JpMROZUJYQrimFoX4jREns6EOANxREWa+JmzEHk2E+IcaJg7L62WD0ufHwT1DCbETIAviDddX+kWLgIlFjMhLuHUpYkGc552y5ZzlhXmIer48iurqVVZCrp6TXWRtbxHaxZiNi+uo/z6DTlEQUlQbjr9msd7QsxD9ObEjZvysnLop3Jp+hGUuzlvC2fRMyHm8+VrmzITgRTKhLgVN21TktiOawXMnYi/znbsVEKMLETFXcydaI16dtf8iHtQcS9zJxZhln2mm2A/ph5gQtQdhI5Dhyl/JJx2R5EYjsnsO/E4cJw4SdH0U8XxdBApMIbT3DsRvhDOKOM/S8g5ZRLngezP8rLM/5AXFP6icnRJObrMyVfAwnKVc1yj1PUbylFhOJ1ECSe7goVFxw3hpsGYVrugFNNH8xarFshwdb7NLm13SvLu1h3fY58Et1RsdS0FQQlbGbo6u6ObO6yVV+BbHA9Py/j8StEWx4t/LaBN7yjeJ/pYUEHvpLbP8613FpmOarxW8rivzj+o5Al+6/rwkcpW166sgueRzXZRtIh/7G/BZpt2midPMfxZsoyYBf84nifxuHMV5hP+Y5Fe8AVe4j70H4vSyREs/wqdLB5iTffazpx/81bkE52XpXfmBd6LfaLz2g9+dXzmx3/nJc2nugIuQl4YIu2y/25eP38R88IQaffVVCBYZZwqvKTJqOFLVSyqIchV1Vunb9//l5e0P5QCP1UtKiHSLoCuub8CVS1qIdLO1ab8tyqv+QOv/VmKonZqnAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAMAAAAzZkq9AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAblQTFRF6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx60ZG60FB6j099JmZ/vHx/evr84qK6jg46TIy7mJi+tPT//v7//39//z8+cnJ7VlZ60dH9Z6e/vX160RE721t+9vb//7++9nZ72lp60JC+L29//r6+Lm56TQ08Xh4/vDw/e7u8X5+6TU17FBQ+cjI+s7O7VZW7E5O+MHB/OHh/ODg/Ofn/N7e+tDQ6jc360BA97a2+cTE97W1+cbG97e3/OLi72xs72ho72pq72tr/N/f+s/P+cXF+tHR+szM+cPD+cvL+tLS+svL97S0+srK8Xx8+9TU+s3N84+P9aWl9qam9Jqa6TEx6TMz6jY26TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TEx6TExwreklAAAAJN0Uk5Tffn//JL1/f7/////////////////////////////////////////////////////////////////////////////////////////////////////+///2ep0jAd+1vjaiQ4DEEBpn6ZuRBICBAU49kpthLXIBgEZ4ewhQvFQgA+7yxbiLE1bh5YJFMXSGyXtMlJnAcUQTAAAAkBJREFUeJyVUwdb1EAQ3QtVQe80G0ROI6iInp5iIXpYUBFp6mEvWNfu7ootUbFhr2D5xc7Obi7JeeT73C9fJtn35s2byYaQjJWy6upJQxpuWY2kKZ1g/TeheUEqYWFL66LF2XkJuSVLberYbctytQntyzsc6sDV2pKvRVixktqU2i6I0FWd/xC6Vq8BgDoKBxG6titB6F7XY7sOLBcUHFCy3fUbChFh46YIgHxbyxQ3h4R8D+4pnGqawm3ascUQunu3bosDOmzf0eeFJXa274rhyguEUnM+1kV/BQcvOuzOxdvcEwEwS/RSShD60fjefZ0D+wcOHES1UpWC0h/Us2mjauSHkgpYf0gTDuPIh5MELGwURnDkVSbVR7BHNWEMR55UGHfVkEcrJeAt6WEcdig1hCPYZm+CcBTPwjFNKGNLE4nzUJgYK5eLx/XeiaHBvuJJczTJKXMwCp7nndaPZ7LZrGeFB+aslbrOkfPpf84FMnnx0uX50MyVq9cIY9dv3LxV4xfO3L5z9x5jhAvBJLs/VY3XPYBtJjkQ4C7Zw2rCI8gUggvCEBfycRJ/IqRS9gMSSIhQ5umzOP58WppMwjjiPn/xMsKnXkldWYAHKdCmEK8bQ7ypflJtYSbhUF+RBXszExLevjP5goUm0dH0e2PgQwWX2iS2AbePOK/MpwjXbaqJoA3/s/owX77qN7TBSeDriflq59t3y/oxG/pTMgwU8NHXGXM/G36ZkhpnJBCcMS4gcBaI4PcfFTjjHMaskL9P/LzwDEuNkwAAAABJRU5ErkJggg==\"","import React from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\r\n\r\nconst useStyles = makeStyles({\r\n    togglePanel:{\r\n        position:'absolute',\r\n        top:10,\r\n        right:10\r\n    }\r\n });\r\n\r\nfunction RenderMode(props){\r\n   const classes = useStyles();\r\n   const {\r\n      renderMode,\r\n      setRenderMode\r\n   } = props;\r\n\r\n   const handleToggle = (e, newValue) => {\r\n        if(newValue !== null){\r\n           setRenderMode(newValue);\r\n        }\r\n    }\r\n\r\n   return (\r\n    <div className={classes.togglePanel}>\r\n        <ToggleButtonGroup \r\n            value={renderMode} exclusive\r\n            onChange={handleToggle} aria-label=\"chart button group\"\r\n        >\r\n            <ToggleButton value=\"cluster\" aria-label=\"Cluster\">\r\n                Cluster\r\n            </ToggleButton>\r\n            <ToggleButton value=\"heatmap\" aria-label=\"Heatmap\">\r\n                Heatmap\r\n            </ToggleButton>\r\n        </ToggleButtonGroup>\r\n    </div>\r\n   );\r\n}\r\n\r\nexport default RenderMode;","import React from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Paper from '@mui/material/Paper';\r\n\r\nimport Grid from '@mui/material/Grid';\r\nimport Typography from '@mui/material/Typography';\r\nimport numeral from \"numeral\";\r\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\r\nimport PhoneAndroidIcon from '@mui/icons-material/PhoneAndroid';\r\nimport PhoneIphoneIcon from '@mui/icons-material/PhoneIphone';\r\n\r\nconst useStyles = makeStyles({\r\n    countsPanel:{\r\n        position:'absolute',\r\n        top:10,\r\n        left:10,\r\n        width:400,\r\n        //height:160,\r\n        '& .MuiPaper-root':{\r\n           backgroundColor:'rgba(255,255,255,0.8)',\r\n        }\r\n    }\r\n });\r\n\r\nfunction Counts(props){\r\n    const classes = useStyles();\r\n    const { counts } = props;\r\n\r\n    return(\r\n        <div className={classes.countsPanel}>\r\n            <Grid container spacing={2} flexDirection=\"row\">\r\n                <Grid item sm={4} xs={12}>\r\n                    <Paper>\r\n                        <Grid container alignItems=\"center\">\r\n                            <LocationOnIcon color=\"primary\" />\r\n                            <Typography variant=\"caption\">\r\n                                Total Devices\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Typography variant=\"h5\" style={{marginLeft:20}}>\r\n                            {counts[\"TOTAL\"]?numeral(counts[\"TOTAL\"]).format(\"0,0\"):0}\r\n                        </Typography>\r\n                    </Paper>\r\n                </Grid>\r\n                <Grid item sm={4} xs={12}>\r\n                    <Paper>\r\n                        <Grid container alignItems=\"center\">\r\n                            <PhoneAndroidIcon color=\"primary\" />\r\n                            <Typography variant=\"caption\">\r\n                                Android\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Typography variant=\"h5\" style={{marginLeft:20}}>\r\n                        {counts[\"aaid\"]?numeral(counts[\"aaid\"]).format(\"0,0\"):0}\r\n                        </Typography>\r\n                    </Paper>\r\n                </Grid>\r\n                <Grid item sm={4} xs={12}>\r\n                    <Paper>\r\n                        <Grid container alignItems=\"center\">\r\n                            <PhoneIphoneIcon color=\"secondary\" />\r\n                            <Typography variant=\"caption\">\r\n                                iPhone\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Typography variant=\"h5\" style={{marginLeft:20}}>\r\n                        {counts[\"idfa\"]?numeral(counts[\"idfa\"]).format(\"0,0\"):0}\r\n                        </Typography>\r\n                    </Paper>\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Counts;","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Paper from '@mui/material/Paper';\r\n\r\nimport Chart from \"react-google-charts\";\r\n\r\nconst useStyles = makeStyles({\r\n    pieChart:{\r\n        position:'absolute',\r\n        top:100,\r\n        left:10,\r\n        width:160,\r\n        height:160,\r\n        '&.MuiPaper-root':{\r\n           borderRadius:'50%',\r\n           backgroundColor:'rgba(255,255,255,0.7)',\r\n        }\r\n    }\r\n });\r\n\r\nfunction PieChart(props){\r\n    const classes = useStyles();\r\n    const { counts } = props;\r\n    const [chartData, setChartData] = useState([]);\r\n    \r\n    useEffect(()=>{\r\n        var newData = [\r\n           ['Platform','Count',{ role: 'style' }],\r\n           ['Android',parseInt(counts[\"aaid\"]),'#000'],\r\n           ['iOS',parseInt(counts[\"idfa\"]),'#000'],\r\n        ];\r\n        setChartData(newData);\r\n    },[counts]);\r\n\r\n    return(\r\n        <Paper className={classes.pieChart}>\r\n            <Chart\r\n                width=\"100%\"\r\n                height=\"100%\"\r\n                chartType=\"PieChart\"\r\n                //loader={<div>Loading</div>}\r\n                data={chartData}\r\n                options={{\r\n                    //title: 'Device Platform',\r\n                    //is3D: true,\r\n                    pieHole: 0.2,\r\n                    legend: { position: 'top', alignment: 'center' },\r\n                    backgroundColor: 'transparent'\r\n                }}\r\n                rootProps={{ 'data-testid': '1' }}\r\n                style={{flex:1,opacity:0.9}}\r\n            />\r\n        </Paper>\r\n    );\r\n}\r\n\r\nexport default PieChart;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport Grid from '@mui/material/Grid';\r\nimport Paper from '@mui/material/Paper';\r\nimport Slider from '@mui/material/Slider';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nimport { dateFormat, secondsFromDate, timeFormat } from \"../../utils/util.js\";\r\n\r\nconst useStyles = makeStyles({\r\n    timeslider:{\r\n        position:'absolute',\r\n        bottom:10,\r\n        left:0,\r\n        right:0,\r\n        '& .MuiPaper-root':{\r\n           width:'50%',\r\n           maxWidth:600,\r\n           paddingTop:10,\r\n           paddingBottom:5,\r\n           paddingLeft:40,\r\n           paddingRight:40,\r\n           backgroundColor:'rgba(255,255,255,0.7)',\r\n        },\r\n        '&.MuiSlider-root':{\r\n          //position:'absolute'\r\n          //width:'60%'\r\n       }\r\n    }\r\n });\r\n\r\n \r\nfunction TimeSlider(props){\r\n    const classes = useStyles();\r\n    const { \r\n        filter,\r\n        setFilter\r\n    } = props;\r\n    \r\n    const [sliderProps, setSliderProps] = useState({\r\n        min:0,\r\n        max:100,\r\n        step: 1,\r\n        defaultValue:0,\r\n        marks:[]\r\n    });\r\n    const [timeRangeLabel, setTimeRangeLabel] = useState('');\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setFilter({\r\n           ...filter,\r\n           timeRange: newValue\r\n        });\r\n        const t0 = secondsFromDate(dateFormat(filter.date));\r\n        setTimeRangeLabel(`UTC ${timeFormat(newValue[0]-t0)} - ${timeFormat(newValue[1]-t0)} ${dateFormat(filter.date)}`);\r\n    };\r\n\r\n    useEffect(()=>{\r\n        const t0 = secondsFromDate(dateFormat(filter.date));\r\n        setSliderProps({\r\n            min:t0,\r\n            max:t0+86399,\r\n            step:30,\r\n            defaultValue: [t0,t0+86399],\r\n            marks:[\r\n                { value: t0, label: '0'},\r\n                { value: t0+3*3600, label: '3'},\r\n                { value: t0+6*3600, label: '6'},\r\n                { value: t0+9*3600, label: '9'},\r\n                { value: t0+12*3600, label: '12'},\r\n                { value: t0+15*3600, label: '15'},\r\n                { value: t0+18*3600, label: '18'},\r\n                { value: t0+21*3600, label: '21'},\r\n                { value: t0+24*3600, label: '24'}\r\n            ]\r\n        });    \r\n\r\n        setFilter({\r\n            ...filter,\r\n            timeRange: [t0, t0+86399]\r\n        });\r\n        setTimeRangeLabel(`UTC ${timeFormat(0)} - ${timeFormat(86399)} ${dateFormat(filter.date)}`);\r\n\r\n     }, [filter.date]);\r\n\r\n    return (\r\n        <Grid container className={classes.timeslider} justifyContent=\"center\">\r\n            <Paper>\r\n               <Typography variant=\"h6\" align=\"center\">\r\n                  {timeRangeLabel}\r\n               </Typography>\r\n               <Slider\r\n                    getAriaLabel={() => 'Time range'}\r\n                    value={filter.timeRange}\r\n                    onChange={handleChange}\r\n                    //valueLabelDisplay=\"auto\"\r\n                    //color=\"primary\"\r\n                    style={{color:'#ff844b'}}\r\n                    {...sliderProps}\r\n               />\r\n            </Paper>\r\n        </Grid>\r\n    );\r\n}\r\nexport default TimeSlider;","import React, { useState } from 'react';\r\n\r\nimport { makeStyles } from '@mui/styles';\r\n\r\nimport { DEFAULT_DATE } from \"./../../utils/settings.js\";\r\n\r\nimport Header from \"./Header.js\";\r\nimport SideBar from \"./SideBar.js\";\r\nimport Map from \"./Map.js\";\r\nimport RenderMode from \"./RenderMode.js\";\r\nimport Counts from \"./Counts.js\";\r\nimport PieChart from './PieChart.js';\r\nimport TimeSlider from \"./TimeSlider.js\";\r\n\r\nimport { dateFormat, secondsFromDate } from '../../utils/util.js';\r\n\r\nconst useStyles = makeStyles({\r\n   root:{\r\n      display:'flex',\r\n      flexDirection:'column',\r\n      width:'100vw',\r\n      height:'100vh'\r\n   },\r\n   content:{\r\n      position:'relative',\r\n      flex:1,\r\n      display:'flex',\r\n      flexDirection:'row',\r\n      height:0,\r\n      //backgroundColor:'#f1f6fa'\r\n   },\r\n   sidebar:{\r\n     position:'relative',\r\n     display:'flex',\r\n     flexDirection:'column',\r\n     width:400,\r\n     padding:0,\r\n   },\r\n   mapContainer:{\r\n      position:'relative',\r\n      flex:1,\r\n   }\r\n});\r\n\r\nfunction Main() {\r\n    const classes = useStyles();\r\n    const [searchPlace, setSearchPlace] = useState(null);\r\n    const [filter, setFilter] = useState({\r\n       date: DEFAULT_DATE,\r\n       timeRange: [\r\n         secondsFromDate(dateFormat(DEFAULT_DATE)),\r\n         secondsFromDate(dateFormat(DEFAULT_DATE))+86399\r\n      ],\r\n      category: \"All Categories\",\r\n      category_distance: 20\r\n    });\r\n    const [counts, setCounts] = useState([]);\r\n    const [renderMode, setRenderMode] = useState('cluster');\r\n\r\n    return (\r\n       <div className={classes.root}>\r\n           <Header\r\n              searchPlace={searchPlace} \r\n              setSearchPlace={setSearchPlace}\r\n              filter={filter}\r\n              setFilter={setFilter}\r\n           />\r\n           <div className={classes.content}>\r\n              <div className={classes.sidebar}>\r\n                 <SideBar \r\n                    searchPlace={searchPlace}\r\n                    setSearchPlace={setSearchPlace} \r\n                 />\r\n              </div>\r\n              <div className={classes.mapContainer}>\r\n                 <Map \r\n                    searchPlace={searchPlace}\r\n                    filter={filter}\r\n                    renderMode={renderMode}\r\n                    setCounts={setCounts}\r\n                 />\r\n                 <RenderMode \r\n                    renderMode={renderMode}\r\n                    setRenderMode={setRenderMode}\r\n                 />\r\n                 <Counts counts={counts} />\r\n                 {counts['TOTAL'] && <PieChart counts={counts} />}\r\n                 <TimeSlider \r\n                    filter={filter}\r\n                    setFilter={setFilter}\r\n                 />\r\n               </div>\r\n           </div>\r\n       </div>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from 'react';\nimport { createTheme, ThemeProvider, responsiveFontSizes } from '@mui/material/styles';\n\nimport Locations_Dashboard from \"./locations-dashboard/Main.js\";\n\nlet theme = createTheme({\n  components:{\n    MuiPaper:{\n      styleOverrides: {\n        root: {\n          padding:10,\n          boxShadow:'0px 24px 48px -4px #06192114'\n        },\n      },\n    },\n    MuiTypography:{\n      styleOverrides: {\n        root:{\n           lineHeight:'normal',\n           wordBreak:'break-all'\n        }\n     }\n    },\n    MuiButton:{\n      styleOverrides: {\n         root:{\n            padding:'16px 20px',\n            borderRadius:50,\n            lineHeight:'normal',\n            textTransform:'none'\n         }\n      }\n    },\n    MuiTextField:{\n      styleOverrides: {\n        root: {\n          boxSizing:'border-box'\n        },\n      },\n    },\n    MuiOutlinedInput:{\n      styleOverrides: {\n        root:{\n           padding:'0 16px',\n           borderRadius:72,\n           backgroundColor:'#f1f6fa'\n        },\n        input:{\n           padding:'14px 8px',\n           color:'#162c36'\n        },\n        notchedOutline: {\n          border:0\n        },\n      },\n    },\n    MuiToggleButtonGroup:{\n      styleOverrides: {\n        root: {\n          borderRadius:50,\n          backgroundColor:'#e3ebf1'\n        },\n        grouped:{\n          '&:first-of-type':{\n            marginLeft:0,\n          },\n          '&:last-of-type':{\n            marginRight:0,\n          },\n          '&:not(:first-of-type)':{\n            borderTopLeftRadius:50,\n            borderBottomLeftRadius:50\n          },\n          '&:not(:last-of-type)':{\n            borderTopRightRadius:50,\n            borderBottomRightRadius:50\n          }\n        }\n      },\n    },\n    MuiToggleButton:{\n      styleOverrides: {\n        root: {\n          border:0,\n          borderRadius:50,\n          textTransform: 'none',\n          padding:'10px 20px',\n          marginLeft:10,\n          marginRight:10,\n          '&.Mui-selected':{\n            color:'#fff',\n            backgroundColor:'#ff844b'\n          }\n        }\n      }\n    },\n    MuiInputAdornment:{\n      styleOverrides: {\n        root:{\n          color:'#ff844b'\n        }\n      }\n    },\n    MuiIconButton:{\n      styleOverrides: {\n        root:{\n          color:'#ff844b'\n        }\n      }\n    },  \n    MuiBackdrop:{\n      styleOverrides: {\n         root:{\n            //backgroundColor:'rgba(0,0,0,0.8)'\n         }\n      }\n   },\n   MuiDialog:{\n    styleOverrides: {\n       root:{\n          '& .MuiDialog-paper':{\n             width:480,\n             paddingTop:20,\n             paddingBottom:20,\n             paddingLeft:30,\n             paddingRight:30\n          }\n       }\n    }\n   },\n   MuiDialogTitle:{\n    styleOverrides: {\n       root:{\n          //marginBottom: 20,\n          borderBottom:'1px solid #e3ebf1'\n       }\n    }\n   },\n   MuiDialogContent:{\n    styleOverrides: {\n       root:{\n          padding: 10\n       }\n    }\n   },\n   MuiDialogActions:{\n    styleOverrides: {\n       root:{\n          padding:20\n       }\n    }\n   },\n   MuiListItemButton:{\n    styleOverrides:{\n       root:{\n          borderRadius:8,\n          '&:hover':{\n            backgroundColor:'#f1f6fa'\n          }\n       }\n    }\n  }\n }\n});\n\ntheme = responsiveFontSizes(theme);\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n       <Locations_Dashboard />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}