(this["webpackJsonprocations-dashboard-app"]=this["webpackJsonprocations-dashboard-app"]||[]).push([[0],{174:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(56),c=a.n(o),i=(a(174),a(153)),s=a(330),l=a(335),O=a(8),u=a(323),d=a(39),j=a(326),b=a(331),p=a(322),C=a(321),f=a(311),g=a(320),m=a.p+"static/media/logo.3f900ba7.png",L=a(2),K=Object(u.a)({header:{padding:"10px 20px",backgroundColor:"white"},logo:{height:80},headerTitle:{flex:1}});var h=function(e){var t=K(),a=e.selectedDate,n=e.setSelectedDate;return Object(L.jsxs)(j.a,{container:!0,className:t.header,spacing:3,children:[Object(L.jsx)(j.a,{container:!0,item:!0,sm:4,justifyContent:"center",alignItems:"center",children:Object(L.jsx)("img",{src:m,className:t.logo})}),Object(L.jsx)(j.a,{container:!0,item:!0,sm:4,justifyContent:"center",alignItems:"center",children:Object(L.jsx)(b.a,{className:t.headerTitle,variant:"h4",align:"center",children:"Locations Dashboard"})}),Object(L.jsx)(j.a,{container:!0,item:!0,sm:4,justifyContent:"center",alignItems:"center",children:Object(L.jsx)(f.b,{dateAdapter:C.a,children:Object(L.jsx)(g.a,{label:"Locations Date",value:a,onChange:function(e){n(e)},renderInput:function(e){return Object(L.jsx)(p.a,Object(d.a)({},e))}})})})]})},x=a(57),q=a.n(x),A=a(78),y=a(333),v=a(46),w=(a(199),a(200),a(64)),I=a.n(w),k=a(154),D=a(69),M=a.n(D),B="pk.eyJ1IjoibGVld2FuZ2RldiIsImEiOiJja2tnbDU2c2gwMHNvMndsdDF1d2pxNTQ2In0.zKeo06DtCh6fLifrbCZCFA",S={longitude:-79.3966596,latitude:43.6565291,zoom:11},R=a(149),F=a.n(R),N=function(){var e=Object(A.a)(q.a.mark((function e(t){var a,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n="".concat("https://locations-dashboard.herokuapp.com","/api/clusters"),e.next=4,F.a.post(n,t).then((function(e){a=e.data})).catch((function(e){a={status:"failed",message:"No internet connection"}}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=a(328);var E=function(e){var t,a=e.markerInfo,r=e.setMarkerInfo;return Object(n.useEffect)((function(){console.log(a)}),[a]),Object(L.jsx)(T.a,{ModalProps:{container:document.getElementById("map-container"),style:{position:"absolute"}},anchor:"right",open:!0,onClose:(t=!1,function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&r(Object(d.a)(Object(d.a)({},a),{},{open:t}))}),children:"maker info details"})};I.a.workerClass=a(248).default;var U=Object(u.a)({mapDiv:{"& .mapboxgl-ctrl-logo":{display:"none"}}}),V=null;var z=function(e){var t=U(),a=e.selectedDate,r=Object(n.useRef)(null),o=Object(n.useState)(S),c=Object(O.a)(o,2),i=c[0],s=c[1],l=Object(n.useState)({type:"FeatureCollection",features:[]}),u=Object(O.a)(l,2),j=u[0],b=u[1],p=Object(n.useState)(!0),C=Object(O.a)(p,2),f=C[0],g=C[1],m=Object(n.useState)(!1),K=Object(O.a)(m,2),h=K[0],x=K[1],w=function(){var e=Object(A.a)(q.a.mark((function e(t){var a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.features&&t.features.length>0&&("cluster-layer"===(a=t.features[0]).layer.id?s(Object(d.a)(Object(d.a)({},i),{},{longitude:a.geometry.coordinates[0],latitude:a.geometry.coordinates[1],zoom:i.zoom+1,transitionDuration:500})):"unclustered-point-layer"===a.layer.id&&x(Object(d.a)(Object(d.a)({},h),{},{open:!0,id:a.properties.id})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=r.current.getMap();e.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAyCAMAAAAKuilWAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAj1QTFRFAAAAOLC4/4qK/4qK/4qK/oqK/oqK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4/4qK/4qK/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4OLC4OLC4/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4/4qK/4qK/4qKOLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4OLC4VkSAhwAAAL90Uk5TAAAJgbcodv/CBxrn/muw8hhClgXS/VYBiNEOIOxmBLv5LlerCNxRnOAUNPeJAMz7N2y+F+93r+k/+I0SyplgMRMDAg0lT4DL9VT81XMhCRIUDgIRTrPPBgr0hAsaYrfd5+njzYI0AUR49tc1Oa/6/9RnBRBIgwqF/cokk9NJEL/+60MIvO48A60dTZwGuvA+WaTx4DYNaIspkx/70iiW6jfvjablLS/2fHDFC4zWfcZQ2/WKYdn87ZQbbJGomkgzCm4xAAAB9ElEQVR4nGNgIBkw4pVlYmZhxaubjZ2dgxOPAi5udnYeXjwK+NiBgF8Ap7wgOxgICeOQFxCBKBAVwy4vLsEOBZJSWBVIy8AU8Mhik5eTZ4cDBUUsCpR4EArYlcUx5FVUkeTZRdUwXKjOjgI0NNEUaGmjKmDX0UV1oR6aPLu+AYoCQ3R5dnYjZHcam2AqYDdFyAubYZFnN5eGK7CwxKaA3QrmTmsbMJ/b1s7ewdHJ2cXVzV0UJODhCZFndPMCBr+3j68TA6Off0BgEINucEgoyNCwcLCCiEhg4EdFMzDExMbFJyQmJaekpjE4pWsAVWSAFQRnsmdlMzDk5Oblw0BBYRFDsboou4gjWEVJqSZDWXlFPjKorGJwrK6phfujrr4hHxU0NjHoOsHlm1vyMUBrGyKg2jsw5fPzEzvhCrrysCnI726Hyvf0YpXP7+uHKpiA3YD8/Fyogok45PMnNUMUTMalIH8KWH4qehAgwDSwgiqc8vnTwQpm4FYwE6xgFm4F5ZBgmI1TwQSIL+bgVDAXomAeLvn50LBesBCHgkWwyFyMXX7JUlhsLluOVcEKeHQzrsQWmKtWI1IMwxpM+bUBSPIMResq0OTXdzKggLQNG5GlN22eyoAOerZs3QaV3r5jJ4Y0ON5Td+2euGfvin0xaVjlsQMAFN44ROMgIzgAAAAASUVORK5CYII=",(function(t,a){if(t)throw t;e.addImage("marker-icon",a)}))}),[]),Object(n.useEffect)((function(){r.current.getMap().on("moveend",I),I()}),[a]);var I=function(){var e=r.current.getMap();e.getZoom()<13?b({type:"FeatureCollection",features:[]}):(V&&clearTimeout(V),V=setTimeout(Object(A.a)(q.a.mark((function t(){var n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(!0),t.next=3,N({dateString:a.toString(),zoom:e.getZoom(),bounds:e.getBounds().toArray().flat()});case 3:n=t.sent,g(!1),"success"===n.status?n.result&&n.result.features&&(n.result.features.forEach((function(e){var t=M()(e.properties.point_count).format("0.[0] a").toUpperCase();e.properties.point_count>=1e3&&(t+="+"),e.properties.point_count_abbreviated=t})),b(n.result)):b({type:"FeatureCollection",features:[]});case 6:case"end":return t.stop()}}),t)}))),500))};return Object(L.jsxs)(v.f,Object(d.a)(Object(d.a)({className:t.mapDiv},i),{},{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/light-v10",mapboxApiAccessToken:B,ref:r,attributionControl:!1,maxZoom:24,minZoom:13,onViewportChange:s,interactiveLayerIds:["cluster-layer","unclustered-point-layer"],onClick:w,children:[Object(L.jsxs)(v.e,{id:"clusterSource",type:"geojson",data:j,children:[Object(L.jsx)(v.b,{id:"cluster-layer",type:"circle",source:"clusterSource",filter:[">","point_count",1],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),Object(L.jsx)(v.b,{id:"cluster-count-layer",type:"symbol",source:"clusterSource",filter:[">","point_count",1],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),Object(L.jsx)(v.b,{id:"unclustered-point-layer",type:"symbol",source:"clusterSource",filter:["==","point_count",1],layout:{"icon-image":"marker-icon","icon-size":.6,"icon-rotate":["get","heading"],"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-rotation-alignment":"map","icon-pitch-alignment":"viewport"}})]}),Object(L.jsx)(k.a,{mapRef:r,onViewportChange:s,mapboxApiAccessToken:B,position:"top-left",placeholder:"Search your city",zoom:18}),Object(L.jsx)(v.c,{style:{bottom:10,left:10}}),Object(L.jsx)(v.d,{style:{bottom:10,right:10}}),h.open&&Object(L.jsx)(E,{markerInfo:h,setMarkerInfo:x}),f&&Object(L.jsx)(y.a,{})]}))},Z=a(332),J=a(150),P=a.n(J),Y=a(151),Q=a.n(Y),G=a(152),W=a.n(G);var _=function(){return Object(L.jsxs)(j.a,{container:!0,spacing:2,flexDirection:"row",style:{marginBottom:50},children:[Object(L.jsx)(j.a,{item:!0,lg:4,md:6,xs:12,children:Object(L.jsxs)(Z.a,{children:[Object(L.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(L.jsx)(P.a,{color:"primary"}),Object(L.jsx)(b.a,{variant:"caption",children:"Total Devices"})]}),Object(L.jsx)(b.a,{variant:"h5",style:{marginLeft:20},children:M()("1234").format("0,0")})]})}),Object(L.jsx)(j.a,{item:!0,lg:4,md:6,xs:12,children:Object(L.jsxs)(Z.a,{children:[Object(L.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(L.jsx)(Q.a,{color:"primary"}),Object(L.jsx)(b.a,{variant:"caption",children:"Android"})]}),Object(L.jsx)(b.a,{variant:"h5",style:{marginLeft:20},children:M()("1234").format("0,0")})]})}),Object(L.jsx)(j.a,{item:!0,lg:4,md:6,xs:12,children:Object(L.jsxs)(Z.a,{children:[Object(L.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(L.jsx)(W.a,{color:"secondary"}),Object(L.jsx)(b.a,{variant:"caption",children:"iPhone"})]}),Object(L.jsx)(b.a,{variant:"h5",style:{marginLeft:20},children:M()("1234").format("0,0")})]})})]})},H=a(334),X=a(327);var $=function(){var e=Object(n.useState)("platform"),t=Object(O.a)(e,2),a=t[0],r=t[1];return Object(L.jsx)(j.a,{container:!0,justifyContent:"center",children:Object(L.jsxs)(X.a,{value:a,exclusive:!0,onChange:function(e,t){return r(t)},"aria-label":"general conditions button group",children:[Object(L.jsx)(H.a,{value:"platform","aria-label":"General Conditions",children:"Platform"}),Object(L.jsx)(H.a,{value:"device_model","aria-label":"Roof Slope",children:"Device Model"}),Object(L.jsx)(H.a,{value:"category_1","aria-label":"Roof Drainage",children:"Category 1"}),Object(L.jsx)(H.a,{value:"category_2","aria-label":"Wall Details",children:"Category 2"})]})})},ee=Object(u.a)({root:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh"},content:{flex:1,display:"flex",flexDirection:"row",backgroundColor:"#f1f6fa"},leftContainer:{width:540,padding:20},mapContainer:{flex:1,position:"relative"}});var te=function(){var e=ee(),t=Object(n.useState)("2021-08-01"),a=Object(O.a)(t,2),r=a[0],o=a[1];return Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)(h,{selectedDate:r,setSelectedDate:o}),Object(L.jsxs)("div",{className:e.content,children:[Object(L.jsxs)("div",{className:e.leftContainer,children:[Object(L.jsx)(_,{}),Object(L.jsx)($,{})]}),Object(L.jsx)("div",{className:e.mapContainer,id:"map-container",children:Object(L.jsx)(z,{selectedDate:r})})]})]})},ae=Object(i.a)({components:{MuiPaper:{styleOverrides:{root:{padding:10,boxShadow:"0px 24px 48px -4px #06192114"}}},MuiToggleButtonGroup:{styleOverrides:{root:{borderRadius:50,backgroundColor:"#e3ebf1"},grouped:{"&:first-of-type":{marginLeft:0},"&:last-of-type":{marginRight:0},"&:not(:first-of-type)":{borderTopLeftRadius:50,borderBottomLeftRadius:50},"&:not(:last-of-type)":{borderTopRightRadius:50,borderBottomRightRadius:50}}}},MuiToggleButton:{styleOverrides:{root:{border:0,borderRadius:50,textTransform:"none",padding:"10px 20px",marginLeft:10,marginRight:10,"&.Mui-selected":{color:"#fff",backgroundColor:"#ff844b"}}}}}});ae=Object(s.a)(ae);var ne=function(){return Object(L.jsx)(l.a,{theme:ae,children:Object(L.jsx)(te,{})})},re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,337)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};c.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(ne,{})}),document.getElementById("root")),re()}},[[249,1,2]]]);
//# sourceMappingURL=main.d2fb9aa4.chunk.js.map